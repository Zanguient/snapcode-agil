angular.module("agil.controladores").controller("ControladorConfiguracionesEstadosFinancieros",function(i,o,n,e,a,t,s,r,u,c,l,d){i.usuario=JSON.parse(o.usuario),i.idModalConfiguracionGestion="dialog-configuracion-gestiones",i.idModalDetalleImpresion="dialog-detalles-impesion",i.inicio=function(){i.obtenerTipoNumeracion(),i.obtenerGestionesEEFF()},i.$on("$viewContentLoaded",function(){resaltarPestaÃ±a(n.path().substring(1)),ejecutarScriptsConfiguracionEstadosFinacioneros(i.idModalConfiguracionGestion,i.idModalDetalleImpresion),i.buscarAplicacion(i.usuario.aplicacionesUsuario,n.path().substring(1)),t.stop()}),i.abrirModalConfiguracionGestion=function(){t.start(),i.gestionesEF=[],u(i.usuario.id_empresa).then(function(o){o.length>0?i.gestionesEF=o:i.ClasesGestionesEF.forEach(function(o,n,e){o={index:n,tipoGestion:o,inicio:"",fin:"",habilitado:!1};i.gestionesEF.push(o),n==e.length-1&&setTimeout(function(){aplicarDatePickers()},300)}),t.stop()}),i.abrirPopup(i.idModalConfiguracionGestion)},i.habilitarGestion=function(o){i.gestionesEF.forEach(function(i){i.id?i.id!=o.id&&(i.habilitado=!1):i.index!=o.index&&(i.habilitado=!1)})},i.cerrarModalConfiguracionGestion=function(){i.cerrarPopup(i.idModalConfiguracionGestion)},i.abrirModalDetalleImpresion=function(){i.configuracionImpresion={},d(i.usuario.id_empresa).then(function(o){o&&(o.fecha_emision=i.fechaATexto(o.fecha_emision),i.configuracionImpresion=o),t.stop()}),i.abrirPopup(i.idModalDetalleImpresion)},i.cerrarModalDetalleImpresion=function(){i.cerrarPopup(i.idModalDetalleImpresion)},i.obtenerTipoPeriodos=function(){t.start(),r("EEFF_TP").then(function(o){i.TiposPeriodos=o,t.stop()})},i.obtenerTipoNumeracion=function(){t.start(),r("NEEFF").then(function(o){i.TiposNumeraciones=o,t.stop()})},i.obtenerGestionesEEFF=function(){t.start(),s("GESTION_EEFF",i.usuario.id_empresa).then(function(o){i.ClasesGestionesEF=o.clases,t.stop()})},i.guardarConfiguracionImpresion=function(o){t.start(),o.fecha_emision=new Date(i.convertirFecha(o.fecha_emision)),l(i.usuario.id_empresa,o).then(function(o){i.mostrarMensaje(o.mensaje),t.stop()})},i.guardarGestionesEEFF=function(o){t.start(),c(i.usuario.id_empresa,o).then(function(o){i.mostrarMensaje(o.mensaje),t.stop()})},i.$on("$routeChangeStart",function(o,n){i.eliminarPopup(i.idModalConfiguracionGestion),i.eliminarPopup(i.idModalDetalleImpresion)}),i.inicio()});