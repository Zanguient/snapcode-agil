angular.module("agil.controladores").controller("ControladorGtmGrupoEstibaje",["$scope","$localStorage","$location","$templateCache","$route","blockUI","Paginator","FieldViewer","GtmGrupoEstibaje","GtmGrupoEstibajes","GtmGrupoEstibajeItem",function(o,a,i,r,e,t,n,s,u,d,p){t.start(),o.usuario=JSON.parse(a.usuario),o.idModalWizardGrupoEstibajeEdicion="modal-wizard-grupo-estibaje-edicion",o.idModalContenedorWizard="modal-wizard-container-grupo-estibaje-edicion",o.usuario=JSON.parse(a.usuario),o.$on("$viewContentLoaded",function(){resaltarPesta√±a(i.path().substring(1)),ejecutarScriptGrupoEstibaje(o.idModalWizardGrupoEstibajeEdicion,o.idModalContenedorWizard),o.buscarAplicacion(o.usuario.aplicacionesUsuario,i.path().substring(1))}),o.inicio=function(){o.obtenerGrupoEstibajes()},o.obtenerGrupoEstibajes=function(){d(o.usuario.id_empresa).then(function(a){o.grupo_estibajes=a})},o.crearNuevoGrupoEstibaje=function(){o.grupo_estibaje=new u({id_empresa:o.usuario.id_empresa}),o.abrirPopup(o.idModalWizardGrupoEstibajeEdicion)},o.cerrarPopPupEdicion=function(){o.cerrarPopup(o.idModalWizardGrupoEstibajeEdicion)},o.modificarGrupoEstibaje=function(a){o.grupo_estibaje=a,o.abrirPopup(o.idModalWizardGrupoEstibajeEdicion)},o.removerGrupoEstibaje=function(a){a.eliminado=!0,p.update({id_grupo_estibaje:a.id},a,function(a){o.obtenerGrupoEstibajes(),t.stop(),o.mostrarMensaje(a.mensaje)})},o.guardarEstadoGrupoEstibaje=function(a){p.update({id_grupo_estibaje:a.id},a,function(a){o.obtenerGrupoEstibajes(),t.stop(),o.mostrarMensaje(a.mensaje),o.recargarItemsTabla()})},o.guardarGrupoEstibaje=function(a){"Siguiente"!=$("#siguiente").text().trim()&&(t.start(),a.id?p.update({id_grupo_estibaje:a.id},a,function(a){o.obtenerGrupoEstibajes(),t.stop(),o.cerrarPopPupEdicion(),o.mostrarMensaje(a.mensaje),o.recargarItemsTabla()}):a.$save(function(a){o.obtenerGrupoEstibajes(),t.stop(),o.cerrarPopPupEdicion(),o.mostrarMensaje("Estibaje creado satisfactoriamente!"),o.recargarItemsTabla()},function(a){t.stop(),o.cerrarPopPupEdicion(),o.mostrarMensaje("Ocurrio un problema al momento de guardar!")}))},o.$on("$routeChangeStart",function(a,i){o.eliminarPopup(o.idModalWizardGrupoEstibajeEdicion)}),o.inicio()}]);