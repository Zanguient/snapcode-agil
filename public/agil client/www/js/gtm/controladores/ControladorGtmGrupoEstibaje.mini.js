angular.module("agil.controladores").controller("ControladorGtmGrupoEstibaje",["$scope","$localStorage","$location","$templateCache","$route","blockUI","Paginator","FieldViewer","GtmGrupoEstibaje","GtmGrupoEstibajes","GtmGrupoEstibajeItem",function(a,i,o,r,e,t,n,s,u,d,p){t.start(),a.usuario=JSON.parse(i.usuario),a.idModalWizardGrupoEstibajeEdicion="modal-wizard-grupo-estibaje-edicion",a.idModalContenedorWizard="modal-wizard-container-grupo-estibaje-edicion",a.usuario=JSON.parse(i.usuario),a.$on("$viewContentLoaded",function(){resaltarPesta√±a(o.path().substring(1)),ejecutarScriptGrupoEstibaje(a.idModalWizardGrupoEstibajeEdicion,a.idModalContenedorWizard),a.buscarAplicacion(a.usuario.aplicacionesUsuario,o.path().substring(1))}),a.inicio=function(){a.obtenerGrupoEstibajes()},a.obtenerGrupoEstibajes=function(){d(a.usuario.id_empresa).then(function(i){a.grupo_estibajes=i})},a.crearNuevoGrupoEstibaje=function(){a.grupo_estibaje=new u({id_empresa:a.usuario.id_empresa}),a.abrirPopup(a.idModalWizardGrupoEstibajeEdicion)},a.cerrarPopPupEdicion=function(){a.cerrarPopup(a.idModalWizardGrupoEstibajeEdicion)},a.modificarGrupoEstibaje=function(i){a.grupo_estibaje=i,a.abrirPopup(a.idModalWizardGrupoEstibajeEdicion)},a.removerGrupoEstibaje=function(i){i.eliminado=!0,p.update({id_grupo_estibaje:i.id},i,function(i){a.obtenerGrupoEstibajes(),t.stop(),a.mostrarMensaje(i.mensaje)})},a.guardarEstadoGrupoEstibaje=function(i){p.update({id_grupo_estibaje:i.id},i,function(i){a.obtenerGrupoEstibajes(),t.stop(),a.mostrarMensaje(i.mensaje),a.recargarItemsTabla()})},a.guardarGrupoEstibaje=function(i){"Siguiente"!=$("#siguiente").text().trim()&&(t.start(),i.id?p.update({id_grupo_estibaje:i.id},i,function(i){a.obtenerGrupoEstibajes(),t.stop(),a.cerrarPopPupEdicion(),a.mostrarMensaje(i.mensaje),a.recargarItemsTabla()}):i.$save(function(i){a.obtenerGrupoEstibajes(),t.stop(),a.cerrarPopPupEdicion(),a.mostrarMensaje("Estibaje creado satisfactoriamente!"),a.recargarItemsTabla()},function(i){t.stop(),a.cerrarPopPupEdicion(),a.mostrarMensaje("Ocurrio un problema al momento de guardar!")}))},a.$on("$routeChangeStart",function(i,o){a.eliminarPopup(a.idModalWizardGrupoEstibajeEdicion)}),a.inicio()}]);