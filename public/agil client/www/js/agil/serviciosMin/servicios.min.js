angular.module("agil.servicios").factory("ActivosPaginador",["$resource",function(e){return e(restServer+"activos/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/subgrupo/:subgrupo/mes/:mes/year/:anio/codigo/:codigo/activo/:activo/vida/:vida_util")}]).factory("ActivosFijosEmpresa",["ActivosPaginador","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,pagina:t.currentPage,items_pagina:t.itemsPerPage,texto_busqueda:t.search,mes:t.filter.mes.id,anio:t.filter.anio.id,subgrupo:t.filter.subgrupo.id?t.filter.subgrupo.id:0,codigo:t.filter.codigo,activo:t.filter.activo,vida_util:t.filter.vida_util},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ConfiguracionActivos",["$resource",function(e){return e(restServer+"activos/configuracion/empresa/:id_empresa/:id_usuario")}]).factory("GuardarConfiguracionActivosFijos",["ConfiguracionActivos","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_empresa:e,id_usuario:t},r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ObtenerConfiguracionActivosFijos",["ConfiguracionActivos","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,id_usuario:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("Revaluacion",["$resource",function(e){return e(restServer+"activos/revaluacion/:id_empresa/user/:id_usuario",null,{update:{method:"PUT"}})}]).factory("RevaluarActivo",["Revaluacion","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.update({id_empresa:t,id_usuario:r},e,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ActualizacionMensualActivos",["$resource",function(e){return e(restServer+"activos/mensual/:id_empresa",null,{update:{method:"PUT"}})}]).factory("VerificacionMensualActivos",["ActualizacionMensualActivos","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]),angular.module("agil.servicios").factory("Banco",["$resource",function(e){return e(restServer+"bancos/empresa/:idEmpresa",{id:"@idEmpresa"},{update:{method:"PUT"}})}]).factory("BancoDatos",["$resource",function(e){return e(restServer+"bancos/:id_banco",{id:"@id_banco"},{update:{method:"PUT"}})}]).factory("ListaBancos",["Banco","$q",function(r,o){return function(e){var t=o.defer();return r.query({idEmpresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("BancoEmpresaPaginador",["$resource",function(e){return e(restServer+"bancos/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda")}]).factory("BancoPaginador",["BancoEmpresaPaginador","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,pagina:t,items_pagina:r,texto_busqueda:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("TransaccionBancoEmpresaPaginador",["$resource",function(e){return e(restServer+"transacciones/bancos/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/nombre/:texto_nombre/cta/:id_cuenta/desde/:desde/hasta/:hasta/concepto/:concepto/ref_doc/:ref_doc/tipo_doc/:tipo_doc/estado/:estado")}]).factory("TransaccionBancoPaginador",["TransaccionBancoEmpresaPaginador","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,pagina:t.currentPage,items_pagina:t.itemsPerPage,texto_nombre:t.filter.nombre,id_cuenta:void 0!==t.filter.cuenta.id?t.filter.cuenta.id:0,desde:t.filter.desde,hasta:t.filter.hasta,concepto:t.filter.concepto,ref_doc:t.filter.ref_doc,tipo_doc:t.filter.tipo_doc,estado:t.filter.estado},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("TransaccionIngresoBancoEmpresa",["$resource",function(e){return e(restServer+"transacciones/ingreso/bancos/empresa/:id_empresa/:id_ususario")}]).factory("TransaccionIngresoBanco",["TransaccionIngresoBancoEmpresa","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_empresa:e,id_ususario:r},t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("TransaccionEgresoBancoEmpresa",["$resource",function(e){return e(restServer+"transacciones/egreso/bancos/empresa/:id_empresa/:id_ususario")}]).factory("TransaccionEgresoBanco",["TransaccionEgresoBancoEmpresa","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_empresa:e,id_ususario:r},t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("TransaccionSeguimientoBancoEmpresa",["$resource",function(e){return e(restServer+"transacciones/seguimiento/bancos/empresa/:id_empresa/:id_usuario")}]).factory("TransaccionSeguimientoBanco",["TransaccionSeguimientoBancoEmpresa","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_empresa:e,id_usuario:r},t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("TransaccionSeguimientoEstadoEmpresa",["$resource",function(e){return e(restServer+"transacciones/seguimiento/Estados/empresa",null,{update:{method:"PUT"}})}]).factory("TransaccionSeguimientoEstado",["TransaccionSeguimientoEstadoEmpresa","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.update(null,{id:o,id_empresa:e,id_usuario:r,id_estado:t},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("TransaccionRevisionEstadoEmpresa",["$resource",function(e){return e(restServer+"transacciones/revision/Estados/empresa",null,{update:{method:"PUT"}})}]).factory("TransaccionRevisionEstado",["TransaccionRevisionEstadoEmpresa","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.update(null,{id_empresa:e,id_usuario:t,id_trans:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("SaldoCuentaEmpresa",["$resource",function(e){return e(restServer+"transacciones/saldo/cuenta/empresa/:id_empresa/:id_cuenta/:fecha_desde/:fecha_hasta",null,{update:{method:"PUT"}})}]).factory("SaldoCuenta",["SaldoCuentaEmpresa","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,id_cuenta:t,fecha_desde:r,fecha_hasta:o},null,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("SaldoDisponibleCuentaEmpresa",["$resource",function(e){return e(restServer+"transacciones/saldo/disponible/empresa/:id_empresa/:id_cuenta/:fecha_desde/:fecha_hasta",null,{update:{method:"PUT"}})}]).factory("SaldoDisponibleCuenta",["SaldoDisponibleCuentaEmpresa","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,id_cuenta:t,fecha_desde:r,fecha_hasta:o},null,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("SaldoProformasEmpresa",["$resource",function(e){return e(restServer+"transacciones/saldo/proformas/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("SaldoProformas",["SaldoProformasEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},null,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]),angular.module("agil.servicios").factory("CierreCaja",["$resource",function(e){return e(restServer+"cierres-caja/empresa/:idEmpresa/:idUsuario",{id:"@idEmpresa"},{update:{method:"PUT"}})}]).factory("CierreCajaDatos",["$resource",function(e){return e(restServer+"cierres-caja/:id_cierre_caja",{id:"@id_cierre_caja"},{update:{method:"PUT"}})}]).factory("CierreCajaPaginador",["$resource",function(e){return e(restServer+"cierres-caja/empresa/:idEmpresa/:idUsuario/pagina/:pagina/items-pagina/:items_pagina/busqueda/:busqueda/columna/:columna/direccion/:direccion",{id:"@idEmpresa"},{update:{method:"PUT"}})}]).factory("CierreCajaDatosItem",["CierreCajaDatos","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_cierre_caja:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ListaCierresCaja",["CierreCajaPaginador","$q",function(r,o){return function(e){var t=o.defer();return r.get({idEmpresa:e.filter.empresa,idUsuario:e.filter.usuario,pagina:e.currentPage,items_pagina:e.itemsPerPage,busqueda:e.search,columna:e.column,direccion:e.direction},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CierreCajaPendiente",["$resource",function(e){return e(restServer+"cierre-caja-pendiente/:idsSucursales")}]).factory("CierresCajaPendiente",["CierreCajaPendiente","$q",function(r,o){return function(e){var t=o.defer();return r.query({idsSucursales:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]),angular.module("agil.servicios").factory("ClienteVencimientoCredito",["$resource",function(e){return e(restServer+"cliente-vencimiento-credito/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("ClientesEmpresaPaginador",["$resource",function(e){return e(restServer+"cliente/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda")}]).factory("ClientesPaginador",["ClientesEmpresaPaginador","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,pagina:t,items_pagina:r,texto_busqueda:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("Cliente",["$resource",function(e){return e(restServer+"clientes/:idCliente",{idCliente:"@id"},{update:{method:"PUT"}})}]).factory("GetCliente",["Cliente","$q",function(r,o){return function(e){var t=o.defer();return r.get({idCliente:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ClientesEmpresa",["$resource",function(e){return e(restServer+"clientes/empresa/:idEmpresa")}]).factory("Clientes",["ClientesEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({idEmpresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("RazonSocialClientesEmpresa",["$resource",function(e){return e(restServer+"clientes-upload-razonsocial/empresa/:idEmpresa",{},{update:{method:"PUT"}})}]).factory("RazonesSocialesCliente",["RazonSocialClientesEmpresa","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({idEmpresa:t},e,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("BusquedaClientesNit",["$resource",function(e){return e(restServer+"clientes/empresa/:idEmpresa/texto/:texto")}]).factory("ClientesNit",["BusquedaClientesNit","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({idEmpresa:e,texto:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("CodigoSiguienteClienteEmpresa",["$resource",function(e){return e(restServer+"cliente/empresa/:id_empresa/siguiente-codigo")}]).factory("DatoCodigoSiguienteClienteEmpresa",["CodigoSiguienteClienteEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("DestinoEmpresa",["$resource",function(e){return e(restServer+"gtm-destinos/empresa/:id_empresa")}]).factory("DestinosCliente",["DestinoEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]),angular.module("agil.servicios").factory("CodigoControl",["$resource",function(e){return e(restServer+"pruebas-codigo-control")}]),angular.module("agil.servicios").factory("Alias",["$resource",function(e){return e(restServer+"cliente/empresa/alias/:id_empresa/:id_usuario")}]).factory("Gerencia",["$resource",function(e){return e(restServer+"cliente/empresa/gerencias/:id_empresa/:id_usuario/:id_cliente")}]).factory("Comensal",["$resource",function(e){return e(restServer+"cliente/empresa/comensales/:id_empresa/:id_usuario/:id_cliente")}]).factory("Comida",["$resource",function(e){return e(restServer+"cliente/empresa/horarios/comida/:id_empresa/:id_usuario/:id_cliente")}]).factory("PrecioComida",["$resource",function(e){return e(restServer+"cliente/empresa/precio/comida/:id_empresa/:id_usuario/:id_cliente")}]).factory("HistorialExcel",["$resource",function(e){return e(restServer+"cliente/empresa/excel/historial/:id_empresa/:id_usuario/:id_cliente")}]).factory("Historial",["$resource",function(e){return e(restServer+"cliente/empresa/historial/:id_empresa/:id_usuario/:id_cliente/:desde/:hasta/:mes/:anio/:empresaCliente/:gerencia/:comensal/:comida/:estado/:pagina/:items_pagina")}]).factory("ComensalesExcel",["$resource",function(e){return e(restServer+"cliente/empresa/excel/comensal/:id_empresa/:id_usuario")}]).factory("AliasExcel",["$resource",function(e){return e(restServer+"cliente/empresa/excel/alias/:id_empresa/:id_usuario/:id_cliente/:desde/:hasta")}]).factory("GerenciasExcel",["$resource",function(e){return e(restServer+"cliente/empresa/excel/gerencias/:id_empresa/:id_usuario/:id_cliente")}]).factory("ComidasExcel",["$resource",function(e){return e(restServer+"cliente/empresa/excel/comidas/:id_empresa/:id_usuario/:id_cliente")}]).factory("PreciosExcel",["$resource",function(e){return e(restServer+"cliente/empresa/excel/precios/:id_empresa/:id_usuario/:id_cliente")}]).factory("BuscarComensal",["$resource",function(e){return e(restServer+"comensal/empresa/busqueda/:busqueda/:id_empresa/:id_usuario/:id_cliente")}]).factory("ReporteComedor",["$resource",function(e){return e(restServer+"reporte/comedor/:id_empresa/:id_usuario/:id_cliente/:desde/:hasta/:mes/:anio/:empresaCliente/:gerencia/:comensal/:comida/:estado")}]).factory("ReporteEmpresa",["$resource",function(e){return e(restServer+"reporte/empresa/:id_empresa/:id_usuario/:id_cliente/:desde/:hasta/:mes/:anio/:empresaCliente/:gerencia/:comensal/:comida/:estado")}]).factory("ReporteComensal",["$resource",function(e){return e(restServer+"reporte/comensal/:id_empresa/:id_usuario/:id_cliente/:desde/:hasta/:mes/:anio/:empresaCliente/:gerencia/:comensal/:comida/:estado")}]).factory("AlertaMarcacion",["$resource",function(e){return e(restServer+"alertas/marcaciones/:id_empresa/:id_usuario/:id_cliente/:mes/:anio")}]).factory("AgregarMarcacion",["$resource",function(e){return e(restServer+"agregar/marcaciones/:id_empresa/:id_usuario/:id_cliente/:comensal")}]).factory("HistorialDocumentos",["$resource",function(e){return e(restServer+"cliente/documentos/historial/:id_empresa/:id_usuario/:id_cliente/:desde/:hasta/:mes/:anio/:empresaCliente/:gerencia/:comensal/:comida/:estado/:pagina/:items_pagina")}]).factory("Documentos",["$resource",function(e){return e(restServer+"obtener/documentos/historial/:id_empresa/:id_usuario/:id_cliente/:documento")}]).factory("GuardarAlias",["Alias","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_empresa:e,id_usuario:r},t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ObtenerAlias",["Alias","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,id_usuario:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("GuardarGerencias",["Gerencia","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_empresa:e,id_usuario:r,id_cliente:0},t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ObtenerGerencias",["Gerencia","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_empresa:e,id_usuario:t,id_cliente:r||0},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("GuardarComensales",["Comensal","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_empresa:e,id_usuario:r},t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ObtenerComensales",["Comensal","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_empresa:e,id_usuario:t,id_cliente:r||0},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("GuardarComidas",["Comida","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.save({id_empresa:e,id_usuario:r,id_cliente:o},t,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("ObtenerComidas",["Comida","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_empresa:e,id_usuario:t,id_cliente:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("GuardarPrecioComidas",["PrecioComida","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.save({id_empresa:e,id_usuario:r,id_cliente:o},t,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("ObtenerPrecioComidas",["PrecioComida","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_empresa:e,id_usuario:t,id_cliente:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("GuardarPrecioComidas",["PrecioComida","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.save({id_empresa:e,id_usuario:r,id_cliente:o},t,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("ObtenerPrecioComidas",["PrecioComida","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_empresa:e,id_usuario:t,id_cliente:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ObtenerHistorial",["Historial","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return o.filter.mes,i.get({id_empresa:e,id_usuario:t,id_cliente:r,desde:o.filter.desde&&""!==o.filter.desde?o.filter.mes||o.filter.anio?0:o.filter.desde:0,hasta:o.filter.hasta&&""!==o.filter.hasta?o.filter.mes||o.filter.anio?0:o.filter.hasta:0,mes:o.filter.mes?o.filter.desde||o.filter.hasta?0:o.filter.mes.id:0,anio:o.filter.anio?o.filter.desde||o.filter.hasta?0:o.filter.anio.id:0,empresaCliente:o.filter.empresaCliente&&o.filter.empresaCliente.id?o.filter.empresaCliente.id:0,gerencia:o.filter.gerencia?o.filter.gerencia:0,comensal:o.filter.comensal&&o.filter.comensal.id?o.filter.comensal.id:0,comida:o.filter.comida?o.filter.comida:0,estado:o.filter.estado&&""!==o.filter.estado?o.filter.estado:0,pagina:o.currentPage,items_pagina:o.itemsPerPage},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("GuardarHistorialExcel",["HistorialExcel","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.save({id_empresa:e,id_usuario:r,id_cliente:o},t,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("GuardarComensalesExcel",["ComensalesExcel","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.save({id_empresa:e,id_usuario:r,id_cliente:o},t,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("GuardarEmpresasExcel",["AliasExcel","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.save({id_empresa:e,id_usuario:r,id_cliente:o},t,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("GuardarGerenciasExcel",["GerenciasExcel","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.save({id_empresa:e,id_usuario:r,id_cliente:o},t,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("GuardarComidasExcel",["ComidasExcel","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.save({id_empresa:e,id_usuario:r,id_cliente:o},t,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("GuardarPreciosExcel",["PreciosExcel","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.save({id_empresa:e,id_usuario:r,id_cliente:o},t,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("BusquedaComensales",["BuscarComensal","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.query({busqueda:o,id_empresa:e,id_usuario:t,id_cliente:r},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("ObtenerReporteComedor",["ReporteComedor","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,id_usuario:t,id_cliente:r,desde:o.filter.desde&&""!==o.filter.desde?o.filter.mes||o.filter.anio?0:o.filter.desde:0,hasta:o.filter.hasta&&""!==o.filter.hasta?o.filter.mes||o.filter.anio?0:o.filter.hasta:0,mes:o.filter.mes?o.filter.desde||o.filter.hasta?0:o.filter.mes.id:0,anio:o.filter.anio?o.filter.desde||o.filter.hasta?0:o.filter.anio.id:0,empresaCliente:o.filter.empresaCliente&&o.filter.empresaCliente.id?o.filter.empresaCliente.id:0,gerencia:o.filter.gerencia?o.filter.gerencia:0,comensal:o.filter.comensal&&o.filter.comensal.id?o.filter.comensal.id:0,comida:o.filter.comida?o.filter.comida:0,estado:o.filter.estado&&""!==o.filter.estado?o.filter.estado:0},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("ObtenerReporteEmpresa",["ReporteEmpresa","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,id_usuario:t,id_cliente:r,desde:o.filter.desde&&""!==o.filter.desde?o.filter.mes||o.filter.anio?0:o.filter.desde:0,hasta:o.filter.hasta&&""!==o.filter.hasta?o.filter.mes||o.filter.anio?0:o.filter.hasta:0,mes:o.filter.mes?o.filter.desde||o.filter.hasta?0:o.filter.mes.id:0,anio:o.filter.anio?o.filter.desde||o.filter.hasta?0:o.filter.anio.id:0,empresaCliente:o.filter.empresaCliente&&o.filter.empresaCliente.id?o.filter.empresaCliente.id:0,gerencia:o.filter.gerencia?o.filter.gerencia:0,comensal:o.filter.comensal&&o.filter.comensal.id?o.filter.comensal.id:0,comida:o.filter.comida?o.filter.comida:0,estado:o.filter.estado&&""!==o.filter.estado?o.filter.estado:0},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("ObtenerReporteComensal",["ReporteComensal","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,id_usuario:t,id_cliente:r,desde:o.filter.desde&&""!==o.filter.desde?o.filter.mes||o.filter.anio?0:o.filter.desde:0,hasta:o.filter.hasta&&""!==o.filter.hasta?o.filter.mes||o.filter.anio?0:o.filter.hasta:0,mes:o.filter.mes?o.filter.desde||o.filter.hasta?0:o.filter.mes.id:0,anio:o.filter.anio?o.filter.desde||o.filter.hasta?0:o.filter.anio.id:0,empresaCliente:o.filter.empresaCliente&&o.filter.empresaCliente.id?o.filter.empresaCliente.id:0,gerencia:o.filter.gerencia?o.filter.gerencia:0,comensal:o.filter.comensal&&o.filter.comensal.id?o.filter.comensal.id:0,comida:o.filter.comida?o.filter.comida:0,estado:o.filter.estado&&""!==o.filter.estado?o.filter.estado:0},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("ObtenerAlertasMarcacion",["AlertaMarcacion","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,id_usuario:t,id_cliente:r,mes:0,anio:0},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("EditarAlertasMarcacion",["AgregarMarcacion","$q",function(n,c){return function(e,t,r,o,a){var i=c.defer();return n.save({id_empresa:e,id_usuario:t,id_cliente:r,comensal:o.comensal.id},o,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}]).factory("ObtenerHistorialDocumentos",["HistorialDocumentos","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return o.filter.mes,i.get({id_empresa:e,id_usuario:t,id_cliente:r,desde:o.filter.desde&&""!==o.filter.desde?o.filter.mes||o.filter.anio?0:o.filter.desde:0,hasta:o.filter.hasta&&""!==o.filter.hasta?o.filter.mes||o.filter.anio?0:o.filter.hasta:0,mes:o.filter.mes?o.filter.desde||o.filter.hasta?0:o.filter.mes.id:0,anio:o.filter.anio?o.filter.desde||o.filter.hasta?0:o.filter.anio.id:0,empresaCliente:o.filter.empresaCliente&&o.filter.empresaCliente.id?o.filter.empresaCliente.id:0,gerencia:o.filter.gerencia?o.filter.gerencia:0,comensal:o.filter.comensal&&o.filter.comensal.id?o.filter.comensal.id:0,comida:o.filter.comida?o.filter.comida:0,estado:o.filter.estado&&""!==o.filter.estado?o.filter.estado:0,pagina:o.currentPage,items_pagina:o.itemsPerPage},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("ObtenerDocumento",["Documentos","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,id_usuario:t,id_cliente:r,documento:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]),angular.module("agil.servicios").factory("ContabilidadCambioMoneda",["$resource",function(e){return e(restServer+"comprobante-contabilidad/monedaCambio",{},{update:{method:"PUT"}})}]).factory("CambioMoneda",["$resource",function(e){return e(restServer+"comprobante-contabilidad/monedaCambio/:fecha",{fecha:"@fecha"},{update:{method:"PUT"}})}]).factory("ObtenerCambioMoneda",["CambioMoneda","$q",function(r,o){return function(e){var t=o.defer();return r.get({fecha:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("EditarComprobanteContabilidad",["$resource",function(e){return e(restServer+"comprobante-contabilidad-edicion/id/:id",null,{update:{method:"PUT"}})}]).factory("EdicionComprobanteContabilidad",["EditarComprobanteContabilidad","$q",function(r,o){return function(e){var t=o.defer();return r.get({id:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CambioMonedas",["$resource",function(e){return e(restServer+"comprobante-contabilidad/monedaCambio/mes/:mes/anio/:anio")}]).factory("ListaCambioMoneda",["CambioMonedas","$q",function(r,o){return function(e){var t=o.defer();return r.query({mes:e.mes,anio:e.anio},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ActualizarCambio",["$resource",function(e){return e(restServer+"comprobante-contabilidad/monedaCambio/:id_moneda",{id_moneda:"@id_moneda"},{update:{method:"PUT"}})}]).factory("ActualizarCambioMoneda",["ActualizarCambio","$q",function(r,o){return function(e){var t=o.defer();return r.update({id_moneda:e.id},e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("UltimaFechaTipoComp",["$resource",function(e){return e(restServer+"ultima-fecha-comprobante/empresa/:id_empresa/tipo/:id_tipo",{id_moneda:"@id_moneda"},{update:{method:"PUT"}})}]).factory("UltimaFechaTipoComprobante",["UltimaFechaTipoComp","$q",function(o,a){return function(e,t){var r=a.defer();r=a.defer();return o.get({id_empresa:e,id_tipo:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ImportarComprobantes",["$resource",function(e){return e(restServer+"importar-comprobantes/usuario/:id_usuario/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("GuardarComprobantesImportados",["ImportarComprobantes","$q",function(a,i){return function(e,t,r){var o=i.defer();o=i.defer();return a.save({id_empresa:r,id_usuario:t},e,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]),angular.module("agil.servicios").factory("ConfiguracionApp",["$resource",function(e){return e(restServer+"configuraciones-app/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ConfiguracionAppVendedor",["$resource",function(e){return e(restServer+"configuraciones-app/:id_configuracion",null,{update:{method:"PUT"}})}]).factory("ConfiguracionesApp",["ConfiguracionApp","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ConfiguracionGeneralApp",["$resource",function(e){return e(restServer+"configuracion-general-app/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ConfiguracionAppEmpresa",["$resource",function(e){return e(restServer+"configuracion-general-app/:id_configuracion",null,{update:{method:"PUT"}})}]).factory("ConfiguracionGeneralAppDato",["ConfiguracionGeneralApp","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]),angular.module("agil.servicios").factory("ValidarCodigoCuenta",["$resource",function(e){return e(restServer+"/validar-codigo",{update:{method:"PUT"}})}]).factory("ConfigCuentas",["$resource",function(e){return e(restServer+"configuracion-cuentas/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("AsignarCuentaCiente",["$resource",function(e){return e(restServer+"contabilidad-cuentas/asignar-cuenta-cliente",{update:{method:"PUT"}})}]).factory("AsignarCuentaProveedor",["$resource",function(e){return e(restServer+"contabilidad-cuentas/asignar-cuenta-proveedor",{update:{method:"PUT"}})}]).factory("ConfiguracionesCuentasEmpresa",["ConfigCuentas","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ConfiguracionCuentas",["$resource",function(e){return e(restServer+"configuracion-cuentas/empresa/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("ConfiguracionCuentaEmpresa",["ConfiguracionCuentas","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ContabilidadCuentas",["$resource",function(e){return e(restServer+"contabilidad-cuentas/empresa/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("ListaContabilidadCuentas",["ContabilidadCuentas","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ContabilidadCuenta",["$resource",function(e){return e(restServer+"contabilidad-cuenta/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("CuentaContabilidadFiltro",["$resource",function(e){return e(restServer+"contabilidad-cuentas/empresa/:id_empresa/clasificacion/:id_clasificacion/tipo/:id_tipo/monto/:monto/pagina/:pagina/items-pagina/:items_pagina/busqueda/:busqueda/columna/:columna/direccion/:direccion",null,{update:{method:"PUT"}})}]).factory("CuentaContabilidad",["CuentaContabilidadFiltro","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,id_clasificacion:e.filter.clasificacion,id_tipo:e.filter.tipo_cuenta,monto:e.filter.monto,pagina:e.currentPage,items_pagina:e.itemsPerPage,busqueda:e.search,columna:e.column,direccion:e.direction},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CuentasEmpresaPaginador",["$resource",function(e){return e(restServer+"contabilidad-cuentas/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda")}]).factory("CuentasClasificaciones",["$resource",function(e){return e(restServer+"contabilidad-cuentas/clasificaciones/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("CuentasClasificaciones2",["$resource",function(e){return e(restServer+"contabilidad-cuentas/clasificaciones/id/:id_empresa",null,{update:{method:"PUT"}})}]).factory("CuentasClasificacionesEdicion",["$resource",function(e){return e(restServer+"contabilidad-cuentas/clasificaciones/edicion/id/:id_empresa",null,{update:{method:"PUT"}})}]).factory("lasClasificaciones",["CuentasClasificaciones2","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("TiposDeCuentas",["$resource",function(e){return e(restServer+"contabilidad-cuentas/tipos-cuenta/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("losTiposDeCuentas",["TiposDeCuentas","$q",function(e,r){return function(){var t=r.defer();return e.get(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("operaciones",["$resource",function(e){return e(restServer+"contabilidad-cuentas/calculos/operaciones/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("lasOperacionesCalculos",["operaciones","$q",function(e,r){return function(){var t=r.defer();return e.get(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("saldosClasificaciones",["$resource",function(e){return e(restServer+"contabilidad-cuentas/clasificaciones/saldos")}]).factory("losSaldos",["saldosClasificaciones","$q",function(e,r){return function(){var t=r.defer();return e.get(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("movimientosClasificaciones",["$resource",function(e){return e(restServer+"contabilidad-cuentas/clasificaciones/movimientos")}]).factory("losMovimientos",["movimientosClasificaciones","$q",function(e,r){return function(){var t=r.defer();return e.get(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CuentasPaginador",["CuentasEmpresaPaginador","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,pagina:t,items_pagina:r,texto_busqueda:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("CuentasEmpresaCreacion",["$resource",function(e){return e(restServer+"cuentas/empresa")}]),angular.module("agil.servicios").factory("Cotizaciones",["$resource",function(e){return e(restServer+"cotizaciones/empresa/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("ListaCotizacion",["Cotizaciones","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("Cotizacion",["$resource",function(e){return e(restServer+"cotizacion/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("FiltroCotizacionEmpresaPaginador",["$resource",function(e){return e(restServer+"cotizaciones/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/fecha-inicio/:inicio/fecha-fin/:fin/columna/:columna/direccion/:direccion")}]).factory("FiltroCotizacionPaginador",["FiltroCotizacionEmpresaPaginador","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,pagina:t.currentPage,items_pagina:t.itemsPerPage,texto_busqueda:t.search,inicio:r,fin:o,columna:t.column,direccion:t.direction},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("CotizacionesFiltro",["$resource",function(e){return e(restServer+"cotizaciones/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/importe/:importe/busqueda/:busqueda/fecha-inicio/:inicio/fecha-fin/:fin/columna/:columna/direccion/:direccion/estado/:estado/sucursal/:sucursal/usuario/:usuario/razon-social/:razon_social/nit/:nit",null,{update:{method:"PUT"}})}]).factory("filtroCotizaciones",["CotizacionesFiltro","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,importe:e.filter.importe,busqueda:e.search,estado:e.filter.estado,inicio:e.filter.fecha_inicio,fin:e.filter.fecha_fin,columna:e.column,sucursal:e.filter.sucursal,usuario:e.filter.usuario,razon_social:e.filter.razon_social,nit:e.filter.nit,direccion:e.direction},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CotizacionesPendientesFiltro",["$resource",function(e){return e(restServer+"cotizaciones-pendientes/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/importe/:importe/busqueda/:busqueda/fecha-inicio/:inicio/fecha-fin/:fin/columna/:columna/direccion/:direccion",null,{update:{method:"PUT"}})}]).factory("filtroCotizacionesPendientes",["CotizacionesPendientesFiltro","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,importe:e.filter.importe,busqueda:e.search,inicio:e.filter.fecha_inicio,fin:e.filter.fecha_fin,columna:e.column,direccion:e.direction},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ConfiguracionCotizacionVista",["$resource",function(e){return e(restServer+"empresas/:id_empresa/configuracion-cotizacion-vista",null,{update:{method:"PUT"}})}]).factory("ConfiguracionCotizacionVistaDatos",["ConfiguracionCotizacionVista","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("DatosConfiguracionCotizacion",["$resource",function(e){return e(restServer+"cotizacion/:id/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("DatosImpresionCotizacion",["DatosConfiguracionCotizacion","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id:e,id_empresa:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("lastIdCotizacion",["$resource",function(e){return e(restServer+"cotizacion/ultima",{update:{method:"PUT"}})}]).factory("ultimaCotizacion",["lastIdCotizacion","$q",function(e,r){return function(){var t=r.defer();return e.get(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CotizacionRechazo",["$resource",function(e){return e(restServer+"cotizacion-rechazo/:id_cotizacion",{id_cotizacion:"@id_cotizacion"},{update:{method:"PUT"}})}]),angular.module("agil.servicios").factory("Dosificacion",["$resource",function(e){return e(restServer+"dosificaciones/:idDosificacion",{idDosificacion:"@id"},{update:{method:"PUT"}})}]).factory("DosificacionesEmpresa",["$resource",function(e){return e(restServer+"dosificaciones/empresa/:idEmpresa")}]).factory("Dosificaciones",["DosificacionesEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({idEmpresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("DosificacionesDisponiblesEmpresa",["$resource",function(e){return e(restServer+"dosificaciones-disponibles/empresa/:idEmpresa")}]).factory("DosificacionesDisponibles",["DosificacionesDisponiblesEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({idEmpresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("VerificarDosificacionesExpiradas",["$resource",function(e){return e(restServer+"actualizacion-dosificaciones-expiradas/:id_empresa")}]).factory("VencimientoDosificaciones",["VerificarDosificacionesExpiradas","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]),angular.module("agil.servicios").factory("Empresa",["$resource",function(e){return e(restServer+"empresas/:idEmpresa",{idEmpresa:"@id"},{update:{method:"PUT"}})}]).factory("Empresas",["Empresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({idEmpresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("EmpresaDatosInicio",["Empresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({idEmpresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("AplicacionesSistema",["$resource",function(e){return e(restServer+"sistema/aplicaciones",null,{update:{method:"PUT"}})}]).factory("ListaAplicacionesSistema",["AplicacionesSistema","$q",function(r,o){return function(e){var t=o.defer();return r.query({app:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("AplicacionesSistemaEmpresa",["$resource",function(e){return e(restServer+"sistema/aplicaciones/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ListaAplicacionesSistemaEmpresa",["AplicacionesSistemaEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]),angular.module("agil.servicios"),angular.module("agil.servicios").factory("ConfiguracionFactura",["$resource",function(e){return e(restServer+"configuraciones-factura/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ConfiguracionFacturaSucursal",["$resource",function(e){return e(restServer+"configuraciones-factura/:id_configuracion",null,{update:{method:"PUT"}})}]).factory("ConfiguracionesFactura",["ConfiguracionFactura","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ConfiguracionGeneralFactura",["$resource",function(e){return e(restServer+"configuracion-general-factura/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ConfiguracionFacturaEmpresa",["$resource",function(e){return e(restServer+"configuracion-general-factura/:id_configuracion",null,{update:{method:"PUT"}})}]).factory("ConfiguracionGeneralFacturaDato",["ConfiguracionGeneralFactura","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ConfiguracionImpresionEmpresa",["$resource",function(e){return e(restServer+"configuracion-impresion/empresa/:id_empresa/sucursal/:id_sucursal",null,{update:{method:"PUT"}})}]).factory("ConfiguracionImpresionEmpresaDato",["ConfiguracionImpresionEmpresa","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,id_sucursal:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]),angular.module("agil.servicios").factory("BusquedaPacientesNit",["$resource",function(e){return e(restServer+"pacientes/empresa/:id_empresa/texto/:texto")}]).factory("PacientesNit",["BusquedaPacientesNit","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empresa:e,texto:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ImprimirSalidaFarmacia",["Diccionario","ImprimirProformaFarmacia",function(a,i){return function(e,t,r,o){e==a.EGRE_PROFORMA?i(t,r,o):e==a.EGRE_PRE_FACTURACION&&i(t,r,o)}}]).factory("ImprimirIndicacionesFarmacia",[function(){return function(e,t,r,o,a,i){for(var n=0;n<e.sucursal.copias_impresion_pedido;n++){0!=n&&r.addPage({size:[227,a],margins:{top:10,bottom:10,left:20,right:20}}),r.font("Helvetica-Bold",14),r.text("Indicaciones",{align:"center"}),r.font("Helvetica",12),r.moveDown(.4),r.text("Paciente : "+e.farmacia.paciente.persona.nombre_completo,{align:"left"}),r.moveDown(.4),r.text("Empresa : "+e.farmacia.paciente.designacion_empresa,{align:"left"}),r.moveDown(.4),r.moveDown(.2),r.text("---------------------------------------------",{align:"center"}),r.moveDown(.4),r.y,r.fontSize(10);for(var c=0;c<e.detallesVenta.length;c++)40<e.detallesVenta[c].producto.nombre.length&&r.fontSize(9),r.font("Helvetica-Bold",9).text(e.detallesVenta[c].producto.nombre+" ",{continued:!0}),r.font("Helvetica",9).text(e.detallesVenta[c].observaciones),r.moveDown(.2);r.moveDown(4),r.x=0;var s=new Date,u=s.getMinutes();u<10&&(u="0"+u),r.fontSize(7),r.text("  Usuario : "+i.nombre_usuario+" -- Fecha : "+s.getDate()+"/"+(s.getMonth()+1)+"/"+s.getFullYear()+"  "+s.getHours()+":"+u+"  ",{align:"center"})}}}]).factory("ImprimirProformaFarmacia",["Diccionario","ImprimirIndicacionesFarmacia","ImprimirProformaRolloFarmacia","$timeout",function(c,s,u,d){return function(e,t,r){var o,a,i;if(e.configuracion.tamanoPapelNotaVenta.nombre_corto==c.FACT_PAPEL_ROLLO){if(o=[227,e.detallesVenta.length<=2?400:400+20*(e.detallesVenta.length-2)],t&&!e.configuracion.imprimir_al_guardar){if(r.empresa.usar_pedidos){var n=230+20*e.detallesVenta.length;a=new PDFDocument({size:[227,n],margins:{top:10,bottom:10,left:20,right:20}}),i=a.pipe(blobStream()),s(e,t,a,i,n,r)}}else a=new PDFDocument({compress:!1,size:o,margins:{top:0,bottom:0,left:20,right:20}}),i=a.pipe(blobStream()),u(e,o,a,i,r),r.empresa.usar_pedidos&&(n=230+20*e.detallesVenta.length,a.addPage({size:[227,n],margins:{top:10,bottom:10,left:20,right:20}}),s(e,t,a,i,n,r));a&&i&&(a.end(),i.on("finish",function(){var e=i.toBlobURL("application/pdf"),t=window.open(e,"_blank","location=no");d(function(){t.print()},500)}))}}}]).factory("ImprimirProformaRolloFarmacia",["blockUI",function(e){return function(e,t,r,o,a){r.moveDown(1),100<a.empresa.imagen.length&&r.image(a.empresa.imagen,15,r.y,{align:"right",width:80,height:50}),r.y=40,r.moveDown(2),r.font("Helvetica-Bold",8),r.text("ATENCIÓN MÉDICA",70,30,{align:"center"}),r.moveDown(.4),r.font("Helvetica",7),r.text("Nº "+e.farmacia.numero_receta,70,40,{align:"center"}),r.moveDown(.4),r.text(e.fechaTexto,70,50,{align:"center"}),r.moveDown(.4),r.moveDown(.4),r.text("Paciente : "+e.farmacia.paciente.persona.nombre_completo,20,70,{align:"left"}),r.moveDown(.4),r.text("Empresa : "+e.farmacia.paciente.designacion_empresa),r.moveDown(.4),r.text("Campamento : "+e.farmacia.paciente.campo),r.moveDown(.4);for(var i=[],n=0;n<e.farmacia.paciente.empleadosFichas[e.farmacia.paciente.empleadosFichas.length-1].cargos.length;n++)i.push(e.farmacia.paciente.empleadosFichas[e.farmacia.paciente.empleadosFichas.length-1].cargos[n].cargo.nombre);r.text("Cargos : "+i.toString()),r.moveDown(.4),null!==e.farmacia.diagnostico&&void 0!==e.farmacia.diagnostico||(e.farmacia.diagnostico=""),null!==e.farmacia.observaciones&&void 0!==e.farmacia.observaciones||(e.farmacia.observaciones=""),r.text("Diagnostico : "+e.farmacia.diagnostico),r.moveDown(.4),r.text("Observación : "+e.farmacia.observaciones),r.moveDown(.4),r.text("--------------------------------------------------------------------------------",{align:"center"}),r.moveDown(.2),r.text("CANT   Farmaco                                P. UNIT.    SUBTOTAL",{align:"left"}),r.moveDown(.2),r.text("--------------------------------------------------------------------------------",{align:"center"}),r.moveDown(.4);for(var c=r.y,s=0,u=0,d=0,l=0,f=0;f<e.detallesVenta.length;f++)r.text(e.detallesVenta[f].cantidad,20,c),40<e.detallesVenta[f].producto.nombre.length&&r.fontSize(6),r.text(e.detallesVenta[f].producto.nombre,35,c,{width:100}),r.fontSize(7),r.text(e.detallesVenta[f].precio_unitario.toFixed(2),145,c),r.text(e.detallesVenta[f].importe.toFixed(2),180,c),s+=e.detallesVenta[f].tipo_descuento?e.detallesVenta[f].importe*(e.detallesVenta[f].descuento/100):e.detallesVenta[f].descuento,u+=e.detallesVenta[f].tipo_recargo?e.detallesVenta[f].importe*(e.detallesVenta[f].recargo/100):e.detallesVenta[f].recargo,d+=e.detallesVenta[f].ice,l+=e.detallesVenta[f].excento,c+=20;r.text("--------------",10,c,{align:"right"}),r.moveDown(.4),r.text("IMPORTE TOTAL Bs.              "+e.importe.toFixed(2),{align:"right"}),r.moveDown(.3),0<s&&r.text("DESCUENTO Bs.              "+s.toFixed(2),{align:"right"}),r.moveDown(.3),0<u&&r.text("RECARGO Bs.              "+u.toFixed(2),{align:"right"}),r.moveDown(.3),0<d&&r.text("ICE Bs.              "+d.toFixed(2),{align:"right"}),r.moveDown(.3),0<l&&r.text("EXCENTO Bs.              "+l.toFixed(2),{align:"right"}),r.moveDown(.3),r.text("TOTAL Bs.              "+e.total.toFixed(2),{align:"right"}),r.moveDown(.4),r.moveDown(.6),r.moveDown(.4),r.moveDown(.4),r.moveDown(.4),r.moveDown(.4),r.text("------------------------     ----------------          -------------------------",20,r.y,{align:"center"}),r.moveDown(.2),r.text("Médico de turno        Supervisor             Recibí Conforme",{align:"center"}),r.moveDown(.4);var m=new Date,p=m.getMinutes();p<10&&(p="0"+p),r.text("  Usuario : "+a.nombre_usuario+" -- Fecha : "+m.getDate()+"/"+(m.getMonth()+1)+"/"+m.getFullYear()+"  "+m.getHours()+":"+p+"  ",{align:"center"})}}]).factory("VentaFarmaciaFiltro",["$resource",function(e){return e(restServer+"ventas-farmacia/:idsSucursales/inicio/:inicio/fin/:fin/codigo/:codigo/nombreCompleto/:nombreCompleto/ci/:ci/tipo-venta/:tipo_venta/campo/:campo/cargo/:cargo/empresa/:empresa/numero_receta/:numero_receta",null,{update:{method:"PUT"}})}]).factory("VentasFarmacia",["VentaFarmaciaFiltro","$q",function(f,m){return function(e,t,r,o,a,i,n,c,s,u,d){var l=m.defer();return f.query({idsSucursales:e,inicio:t,fin:r,codigo:o,nombreCompleto:a,ci:i,tipo_venta:n,campo:c,cargo:s,empresa:u,numero_receta:d},function(e){l.resolve(e)},function(e){l.reject(e)}),l.promise}}]).factory("VentaFarmacia",["$resource",function(e){return e(restServer+"ventas-farmacia/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("VentaEmpresaDatosFarmacia",["$resource",function(e){return e(restServer+"ventas-farmacia/:id/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("DatosVentaFarmacia",["VentaEmpresaDatosFarmacia","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id:e,id_empresa:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]),angular.module("agil.servicios").factory("Diccionario",[function(){return{MOV_ING:"MOVING",MOV_EGR:"MOVEGR",ING_INV_INICIAL:"III",EGRE_FACTURACION:"FACT",EGRE_PRE_FACTURACION:"PREFACT",EGRE_BAJA:"BAJA",EGRE_PROFORMA:"PFR",EGRE_TRASPASO:"TRAS",EGRE_AJUSTE:"AJU",EGRE_COTIZACION:"COT",FACT_IMPRESION_VACIA:"VAC",FACT_IMPRESION_COMPLETA:"COMPL",FACT_IMPRESION_SEMICOMPLETA:"SEMICOMPL",FACT_PAPEL_OFICIO:"OFICIO",FACT_PAPEL_CARTA:"CARTA",FACT_PAPEL_MEDIOOFICIO:"MEDOFI",FACT_PAPEL_ROLLO:"ROLLO",FACT_PAPEL_CUARTOCARTA:"CARTACUARTO",TIPO_PAGO_CREDITO:"CREDITO",TIPO_PAGO_CONTADO:"CONTADO",CENTRO_COSTO_ALMACEN:"ALMACEN",ROL_ADMINISTRADOR:"ADMINISTRADOR",ROL_VENDEDOR:"VENDEDOR",ROL_OPERADOR:"OPERADOR",DIA_LUNES:"LUN19",DIA_MARTES:"MAR19",DIA_MIERCOLES:"MIE19",DIA_JUEVES:"JUE19",DIA_VIERNES:"VIE19",DIA_SABADO:"SAB19",DIA_DOMINGO:"DOM19",USUARIO_SUPERADMIN:"SUPER-ADMINISTRADOR",MENU_RUTAS:"RUTAS",MENU_SEGUIMIENTOAPP:"SEGUIMIENTO APP",MENU_APPMOVIL:"APP MOVIL",MENU_PANTALLACLIENTE:"PANTALLA CLIENTE",MENU_PANTALLADESPACHO:"PANTALLA DESPACHO",TIPO_PRODUCTO_BASE:"PBASE",TIPO_PRODUCTO_INTER:"PINTER",TIPO_PRODUCTO_FINAL:"PFINAL",DESTINO_CIERRE_BANCO:"DBANCO",DESTINO_CIERRE_CAJA:"CAJA",DESTINO_CIERRE_SIGUIENTETURNO:"SIGUIENTETURNO",ESTADO_MESA_OCUPADO:"OCU",ESTADO_MESA_DISPONIBLE:"DIS",ESTADO_MESA_RESERVADO:"RE",MENU_MESAS:"MESAS",MENU_PLAN_CUENTAS:"PLAN CUENTAS",MENU_COMPROBANTES:"COMPROBANTES",MENU_MEDICO:"PACIENTES",IVA_DF:"IVA DF",IVA_CF:"IVA CF",IT:"IT",IT_POR_PAGAR:"IT POR PAGAR",CAJA_BANCOS:"CAJA/BANCOS",COMPROBANTE_INGRESO:"INGRESO",COMPROBANTE_EGRESO:"EGRESO",COMPROBANTE_TRASPASO:"TRASPASO",COMPROBANTE_CAJA_CHICA:"CAJA CHICA",MENU_VEHICULOS:"VEHICULOS",MENU_PROFORMAS:"PROFORMAS",MENU_USUARIO:"USUARIOS",MENU_EMPRESA:"EMPRESAS",MENU_VENTA:"VENTAS",MENU_COMPRA:"COMPRAS",MENU_CONFIGURACION:"CONFIGURACIONES",MENU_REPORTE:"REPORTES",MENU_LIBRO_COMPRA:"LIBRO DE COMPRAS",MENU_LIBRO_VENTAS:"LIBRO DE VENTAS",MENU_REPORTE_VENTAS:"REPORTE DE VENTAS",MENU_REPORTE_COMPRAS:"REPORTE DE COMPRAS",MENU_ESTADO_RESULTADOS:"ESTADO DE RESULTADOS NO CONTABLE",MENU_ALMACEN:"ALMACENES",MENU_CERT_COD_CONTROL:"CERT. COD. DE CONTROL",MENU_ESTADO_CUENTAS_CLIENTES:"ESTADO DE CUENTAS CLIENTES",MENU_ESTADO_CUENTAS_PROVEEDORES:"ESTADO DE CUENTAS PROVEEDORES",MENU_PANTALLA:"PANTALLAS",MENU_DESPACHO:"DESPACHOS",MENU_CONCEPTO:"CONCEPTOS",MENU_DOSIFICACION:"DOSIFICACIONES",TIPO_CORRELATIVO_CLIENTES:"CORRELATIVO CLIENTES",TIPO_CORRELATIVO_DESTINOS:"CORRELATIVO DESTINOS",MOVING_INVENTARIO_INICIAL:"INGRESO POR INVENTARIO INICIAL",MOVING_POR_TRASPASO:"INGRESO POR TRASPASO",MOVING_POR_DEVOLUCION:"INGRESO POR DEVOLUCIÓN",MOVING_DIARIO:"INGRESO DIARIO",MOVING_POR_AJUSTE:"INGRESO POR AJUSTE",MOVING_POR_IMPORTACION:"INGRESO POR IMPORTACIÓN",MOVING_POR_RETENCION_SERVICIOS:"INGRESO POR RETENCIONES DE SERVICIOS",MOVING_POR_RETENCION_BIENES:"INGRESO POR RETENCIONES DE BIENES",MOVING_POR_COMPRA_SIN_FACTURA:"INGRESO POR COMPRA S/F",IT_RETENCION_BIEN:"IT RETENCION BIEN ALMACEN",IUE_RETENCION_BIEN:"IUE RETENCION BIEN ALMACEN",CUENTA_ALMACEN_RETENCION_BIEN:"CUENTA ALMACEN RETENCION BIEN",CUENTA_GASTO_RETENCION_BIEN:"CUENTA GASTO RETENCION BIEN",IT_RETENCION_BIEN_GASTO:"IT RETENCION BIEN GASTO",IUE_RETENCION_BIEN_GASTO:"IUE RETENCION BIEN GASTO",CUENTA_RETENCION_SERVICIO:"CUENTA RETENCION SERVICIO",IT_RETENCION_SERVICIO:"IT RETENCION SERVICIO",IUE_RETENCION_SERVICIO:"IUE RETENCION SERVICIO",CC_ESTADO_PROCESADO:"PROCESADO",CC_ESTADO_DESEMBOLSADO:"DESEMBOLSADO",CC_ESTADO_VERIFICADO:"VERIFICADO",CC_ESTADO_PENDIENTE:"PENDIENTE",CC_ESTADO_AUTORIZADO:"AUTORIZADO",CC_ESTADO_ANULADO:"ANULADO",CC_MOV_ANTICIPO:"ANTICIPO",EGRE_SERVICIO:"SERV"}}]).factory("VerificarDescuentos",[function(){return function(e){var t=!1;if(void 0!==e)for(var r=0;r<e.length;r++)(0<e[r].descuento||0<e[r].recargo||0<e[r].ice||0<e[r].excento)&&(t=!0);return t}}]).factory("NuevoComprobante",["blockUI","AsignarComprobanteFavorito","LibroMayorCuenta","ComprobanteRevisarPaginador","NuevoComprobanteContabilidad","ListaCuentasComprobanteContabilidad","ActualizarComprobanteContabilidad","ImprimirComprobante","DatosComprobante",function(e,x,P,C,E,S,b,y,T){return function(t,r,o,a,e,i,n,c,s,u,d,l,f,m,p){e&&(h=x(e)).then(function(e){t(e.mensaje),r.getSearch("",o)});if(i&&i.asiento.id)return h=P(i.asiento.id,i.fechaInicio,i.fechaFin);if(n)return r.filter.inicio,r.filter.fin,null==r.filter.inicio&&(r.filter.inicio=0,r.filter.fin=0),0!=r.filter.inicio&&(r.filter.inicio=new Date(c(o.inicio)),r.filter.fin=new Date(c(o.fin))),h=C(r);if(u){var v=new Date;if(u.fechaActual=new Date,u.id){for(u.importe=0,u.abierto=!1,_=0;_<u.asientosContables.length;_++)0!=(g=u.asientosContables[_]).activo&&""!=g.debe_bs&&(u.importe=Math.round(1e4*(u.importe+g.debe_bs))/1e4);u.fecha=new Date(c(u.fecha)),u.fecha.setHours(v.getHours()),u.fecha.setMinutes(v.getMinutes()),b.update({id_comprobante:u.id},u,function(e){l(a.id_empresa),f(a.id_empresa),t(e.mensaje),s(),m()}),console.log("falta agregar el put para guardar")}else{for(var _=0;_<u.asientosContables.length;_++){var g;0!=(g=u.asientosContables[_]).activo&&""!=g.debe_bs&&(u.importe=Math.round(1e4*(u.importe+g.debe_bs))/1e4)}u.fecha=new Date(c(u.fecha)),u.fecha.setHours(v.getHours()),u.fecha.setMinutes(v.getMinutes()),E.save(u,function(e){l(a.id_empresa),f(a.id_empresa),t(e.mensaje),T(e.comprobante.id).then(function(e){e.comprobante.importe_literal=e.importeLiteral,y(e.comprobante,!1,a,p)}),m(),s()})}}if(d&&""!=d&&null!=d){var h=S(a.id_empresa,d);return console.log(h),h}}}]).factory("ImprimirComprobante",["blockUI","DibujarCabeceraComprobante","Diccionario","DibujarCabeceraFacturaNVCartaOficio","DibujarCabeceraFacturaNVmedioOficio","$timeout",function(j,N,e,t,r,L){return function(I,O,$,V){var q=[],R=[],F={calculo:0,monto:0,texto1:"",texto2:"",texto3:"",cant:0},U={calculo:0,monto:0,texto1:"",texto2:"",texto3:"",cant:0};I.asientosContables.forEach(function(e,t,r){if(0!=e.debe_bs?q.push(e):R.push(e),e.cuenta.especifica&&(e.cuenta.tipo_especifica?(U.monto+=e.debe_bs,U.texto1=e.cuenta.especificaTexto1.nombre_corto,U.texto2=e.cuenta.especificaTexto2.nombre_corto,U.texto3=e.cuenta.especificaTexto3.nombre_corto,U.cant++,U.calculo=100*U.monto/13,U.calculo=V(U.calculo,2)):(F.monto+=e.haber_bs,F.texto1=e.cuenta.especificaTexto1.nombre_corto,F.texto2=e.cuenta.especificaTexto2.nombre_corto,F.texto3=e.cuenta.especificaTexto3.nombre_corto,F.cant++,F.calculo=100*F.monto/13,F.calculo=V(F.calculo,2))),t===r.length-1){var o=q.concat(R),a=new PDFDocument({compress:!1,size:[612,792],margin:10}),i=a.pipe(blobStream());a.font("Helvetica",8);var n=160,c=0,s=1,u=Math.ceil(o.length/19),d=0,l=0,f=0,m=0,p=new Date;if(O){N(a,O,$,I,s,u,U,F);for(var v=0;v<o.length&&c<=19;v++){e=o[v],a.rect(390,n,0,30).stroke(),a.rect(440,n,0,30).stroke(),a.rect(490,n,0,30).stroke(),a.rect(540,n,0,30).stroke(),a.font("Helvetica",7),a.text(e.cuenta.codigo,28,n+5),a.font("Helvetica-Bold",7),e.cuenta.tipoAuxiliar&&a.text(e.cuentaAux.nombre,28,n+13,{width:80}),a.font("Helvetica-Bold",7),a.text(e.cuenta.nombre,120,n+5,{width:190,underline:!0}),a.font("Helvetica",7),a.text(e.glosa,125,n+13,{width:190}),e.centroCosto&&a.text(e.centroCosto.nombre,310,n+5),a.text("",350,n+5);var _=V(e.debe_bs,2),g=V(e.haber_bs,2);"0.00"!=_&&a.text(_,395,n+5),"0.00"!=g&&a.text(g,445,n+5);var h=V(e.debe_sus,2),x=V(e.haber_sus,2);"0.00"!=h&&a.text(h,500,n+5),"0.00"!=g&&a.text(x,545,n+5),d+=0+e.debe_bs,l+=0+e.haber_bs,f+=0+e.debe_sus,m+=0+e.haber_sus,n+=30,19<++c&&(a.addPage({size:[612,792],margin:10}),n=160,c=0,N(a,O,$,I,s+=1,u,U,F))}a.font("Helvetica-Bold",7),a.text("SUMA TOTAL:",330,n+5),d=V(d,2),l=V(l,2),a.text(d,395,n+5),a.text(l,445,n+5),m=V(m,2),f=V(f,2),a.text(f,500,n+5),a.text(m,545,n+5),a.rect(20,n,571,0).stroke(),a.rect(20,n+20,571,0).stroke(),a.rect(390,n,0,20).stroke(),a.rect(440,n,0,20).stroke(),a.rect(490,n,0,20).stroke(),a.rect(540,n,0,20).stroke()}else{for(N(a,O,$,I,s,u,U,F),v=0;v<o.length&&c<=19;v++)e=o[v],a.rect(450,n,0,30).stroke(),a.rect(520,n,0,30).stroke(),a.font("Helvetica",7),a.text(e.cuenta.codigo,38,n+5),a.font("Helvetica-Bold",7),e.cuenta.tipoAuxiliar&&e.cuentaAux&&a.text(e.cuentaAux.nombre,38,n+13,{width:80}),a.font("Helvetica-Bold",7),a.text(e.cuenta.nombre,130,n+5,{width:190,underline:!0}),a.font("Helvetica",7),a.text(e.glosa,135,n+13,{width:190}),e.centroCosto&&a.text(e.centroCosto.nombre,340,n+5),a.text("",380,n+5),_=V(e.debe_bs,2),g=V(e.haber_bs,2),"0.00"!=_&&a.text(_,470,n+5),"0.00"!=g&&a.text(g,540,n+5),d+=0+e.debe_bs,l+=0+e.haber_bs,n+=30,19<++c&&(a.rect(450,n,0,2).stroke(),a.rect(520,n,0,2).stroke(),a.addPage({size:[612,792],margin:10}),n=160,c=0,N(a,O,$,I,s+=1,u,U,F));a.font("Helvetica-Bold",7),a.text("SUMA TOTAL:",390,n+5),a.font("Helvetica",7),d=V(d,2),l=V(l,2),a.text(d,470,n+5),a.text(l,540,n+5),a.rect(20,n,571,0).stroke(),a.rect(20,n+20,571,0).stroke(),a.font("Helvetica-Bold",7),a.rect(450,n,0,20).stroke(),a.rect(520,n,0,20).stroke()}if(a.text("Son:",38,n+25),a.font("Helvetica",7),a.text(I.importe_literal,60,n+25),a.rect(20,n+40,571,0).stroke(),"TRASPASO"==I.tipoComprobante.nombre){a.rect(20,720,571,0).stroke(),a.font("Helvetica-Bold",7),a.text("Preparado por:",38,725),a.font("Helvetica",7),a.text($.persona.nombre_completo,38,735),a.rect(200,720,0,42).stroke();var P=(E=new Date(I.fecha_creacion)).getMonth()+1;(S=E.getMinutes())<10&&(S="0"+E.getMinutes()),(b=E.getHours())<10&&(b="0"+E.getHours()),(y=E.getSeconds())<10&&(y="0"+E.getSeconds()),P<10?a.text(+E.getDate()+"/0"+P+"/"+E.getFullYear()+"         "+b+":"+S+":"+y,58,752):a.text(+E.getDate()+"/"+P+"/"+E.getFullYear()+"         "+b+":"+S+":"+y,58,752);var C=p.getMonth()+1;(T=p.getMinutes())<10&&(T="0"+p.getMinutes()),(A=p.getHours())<10&&(A="0"+p.getHours()),(D=p.getSeconds())<10&&(D="0"+p.getSeconds()),C<10?a.text("IMP.:"+p.getDate()+"/0"+C+"/"+p.getFullYear()+"         "+A+":"+T+":"+D,38,765):a.text("IMP.:"+p.getDate()+"/"+C+"/"+p.getFullYear()+"         "+A+":"+T+":"+D,38,765),a.text("Revisado",290,752),a.text("Autorizado",480,752),a.rect(410,720,0,42).stroke(),a.rect(20,750,571,0).stroke()}else{var E,S,b,y,T,A,D;a.rect(20,720,571,0).stroke(),a.font("Helvetica-Bold",7),a.text("Preparado por:",38,725),a.font("Helvetica",7),a.text($.persona.nombre_completo,38,735),a.rect(200,720,0,42).stroke(),P=(E=new Date(I.fecha_creacion)).getMonth()+1,(S=E.getMinutes())<10&&(S="0"+E.getMinutes()),(b=E.getHours())<10&&(b="0"+E.getHours()),(y=E.getSeconds())<10&&(y="0"+E.getSeconds()),P<10?a.text(+E.getDate()+"/0"+P+"/"+E.getFullYear()+"         "+b+":"+S+":"+y,58,752):a.text(+E.getDate()+"/"+P+"/"+E.getFullYear()+"         "+b+":"+S+":"+y,58,752),C=p.getMonth()+1,(T=p.getMinutes())<10&&(T="0"+p.getMinutes()),(A=p.getHours())<10&&(A="0"+p.getHours()),(D=p.getSeconds())<10&&(D="0"+p.getSeconds()),C<10?a.text("IMP.:"+p.getDate()+"/0"+C+"/"+p.getFullYear()+"         "+A+":"+T+":"+D,38,765):a.text("IMP.:"+p.getDate()+"/"+C+"/"+p.getFullYear()+"         "+A+":"+T+":"+D,38,765),a.text("Revisado",240,752),a.text("Autorizado",350,752),a.text("Recibio conforme:",425,740),a.text("CI:",425,752),a.rect(310,720,0,42).stroke(),a.rect(420,720,0,42).stroke(),a.rect(20,750,571,0).stroke()}a.end(),i.on("finish",function(){var e=i.toBlobURL("application/pdf"),t=window.open(e,"_blank","location=no");L(function(){t.print()},500)}),j.stop()}})}}]).factory("DibujarCabeceraComprobante",[function(){return function(e,t,r,o,a,i,n,c){var s,u=new Date(o.fecha);console.log(r),t?(e.rect(20,30,571,732).stroke(),e.font("Helvetica-Bold",8),e.text(r.empresa.razon_social,25,35),e.text("SISTEMA DE CONTABILIDAD.",25,50),e.text("NIT: ",25,65),e.font("Helvetica",8),e.text(r.empresa.nit+".",50,65),e.font("Helvetica-Bold",14),e.text("COMPROBANTE DE "+o.tipoComprobante.nombre,0,75,{align:"center"}),e.font("Helvetica",8),e.text(a+" de: "+i,545,35),e.font("Helvetica-Bold",8),e.text("Gestión: "+u.getFullYear(),515,50),e.font("Helvetica-Bold",12),e.text("N°: ",535,65),e.font("Helvetica",12),e.text(o.numero,555,65),e.rect(20,90,571,0).stroke(),e.font("Helvetica",8),e.text(o.gloza,68,105),e.font("Helvetica-Bold",8),(s=u.getMonth()+1)<10?e.text("Fecha: "+u.getDate()+"/0"+s+"/"+u.getFullYear(),500,95):e.text("Fecha: "+u.getDate()+"/"+s+"/"+u.getFullYear(),500,95),e.text("T. Cambio: ",500,105),e.font("Helvetica",8),e.text(o.tipoCambio.dolar,545,105),0<n.cant&&0==c.cant&&e.text(n.texto1+" "+n.monto+"    "+n.texto2+" "+n.calculo+"    "+n.texto3+" "+n.cant,400,120),0<c.cant&&0==n.cant&&e.text(c.texto1+" "+c.monto+"    "+c.texto2+" "+c.calculo+"    "+c.texto3+" "+c.cant,400,120),0<c.cant&&0<n.cant&&e.text(c.texto1+" "+c.monto+"    "+c.texto2+" "+c.calculo+"    "+c.texto3+" "+c.cant+"     "+n.texto1+" "+n.monto+"    "+n.texto2+" "+n.calculo+"    "+n.texto3+" "+n.cant,350,120),e.font("Helvetica-Bold",8),e.rect(20,130,571,0).stroke(),e.font("Helvetica-Bold",8),e.text("Cuenta",45,145),e.text("Descripcion/Glosa",140,145),e.text("C.Costo",310,145),e.text("ref",350,145),e.rect(20,160,571,0).stroke(),e.rect(390,130,0,30).stroke(),e.rect(440,145,0,15).stroke(),e.rect(390,145,200,0).stroke(),e.text("BOLIVIANOS",415,137),e.text("Debe",405,150),e.text("Haber",455,150),e.rect(490,130,0,30).stroke(),e.rect(540,145,0,15).stroke(),e.text("DOLARES",520,137),e.text("Debe",505,150),e.text("Haber",550,150)):(e.rect(20,30,571,732).stroke(),e.font("Helvetica-Bold",8),e.text(r.empresa.razon_social,25,35),e.text("SISTEMA DE CONTABILIDAD.",25,50),e.text("NIT: ",25,65),e.font("Helvetica",8),e.text(r.empresa.nit+".",50,65),e.font("Helvetica-Bold",14),e.text("COMPROBANTE DE "+o.tipoComprobante.nombre,0,75,{align:"center"}),e.font("Helvetica",8),e.text(a+" de: "+i,545,35),e.font("Helvetica-Bold",8),e.text("Gestión: "+u.getFullYear(),515,50),e.font("Helvetica-Bold",12),e.text("N°: ",535,65),e.font("Helvetica",12),e.text(o.numero,555,65),e.rect(20,90,571,0).stroke(),e.font("Helvetica",8),e.text(o.gloza,38,105),e.font("Helvetica-Bold",8),(s=u.getMonth()+1)<10?e.text("Fecha: "+u.getDate()+"/0"+s+"/"+u.getFullYear(),500,95):e.text("Fecha: "+u.getDate()+"/"+s+"/"+u.getFullYear(),500,95),e.text("T. Cambio: ",500,105),e.font("Helvetica",8),e.text(o.tipoCambio.dolar,545,105),0<n.cant&&0==c.cant&&e.text(n.texto1+" "+n.monto+"    "+n.texto2+" "+n.calculo+"    "+n.texto3+" "+n.cant,400,120),0<c.cant&&0==n.cant&&e.text(c.texto1+" "+c.monto+"    "+c.texto2+" "+c.calculo+"    "+c.texto3+" "+c.cant,400,120),0<c.cant&&0<n.cant&&e.text(c.texto1+" "+c.monto+"    "+c.texto2+" "+c.calculo+"    "+c.texto3+" "+c.cant+"     "+n.texto1+" "+n.monto+"    "+n.texto2+" "+n.calculo+"    "+n.texto3+" "+n.cant,350,120),e.font("Helvetica-Bold",8),e.rect(20,130,571,0).stroke(),e.text("Cuenta",50,145),e.text("Descripcion/Glosa",150,145),e.text("C.Costo",340,145),e.text("ref",405,145),e.text("BOLIVIANOS",500,135),e.rect(450,145,140,0).stroke(),e.rect(20,160,571,0).stroke(),e.rect(450,130,0,30).stroke(),e.rect(520,145,0,15).stroke(),e.text("Debe",475,150),e.text("Haber",545,150))}}]).factory("ComprasComprobante",["$resource",function(e){return e(restServer+"comprasComprobante")}]).factory("CuentasAuxiliares",["$resource",function(e){return e(restServer+"cuentas-auxiliares/empresa/:id_empresa/tipo/:tipo")}]).factory("ListasCuentasAuxiliares",["CuentasAuxiliares","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empresa:e,tipo:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ComprobanteTotalGeneral",["$resource",function(e){return e(restServer+"comprobantes/totalGeneral/empresa/:id_empresa")}]).factory("ComprobanteTotalGeneralEmpresa",["ComprobanteTotalGeneral","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ComprobanteRevisarDatosPaginador",["$resource",function(e){return e(restServer+"comprobantes/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/fecha-inicio/:inicio/fecha-fin/:fin/columna/:columna/direccion/:direccion/busqueda/:texto_busqueda")}]).factory("ComprobanteRevisarPaginador",["ComprobanteRevisarDatosPaginador","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,inicio:e.filter.inicio,fin:e.filter.fin,columna:e.column,direccion:e.direction,texto_busqueda:e.search},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CuentasComprobanteContabilidad",["$resource",function(e){return e(restServer+"comprobante-cuenta/empresa/:id_empresa/busqueda/:buscar",{id_empresa:"@id_empresa",buscar:"@buscar"},{update:{method:"PUT"}})}]).factory("ListaCuentasComprobanteContabilidad",["CuentasComprobanteContabilidad","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empresa:e,buscar:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ComprobanteEmpresaPaginador",["$resource",function(e){return e(restServer+"comprobantes/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/fecha-inicio/:inicio/fecha-fin/:fin/columna/:columna/direccion/:direccion/monto/:monto/tipo-comprobante/:tipo_comprobante/sucursal/:sucursal/usuario/:usuario/numero/:numero/busqueda/:busqueda")}]).factory("ComprobantePaginador",["ComprobanteEmpresaPaginador","$q",function(r,o){return function(e){null==e.filter.monto&&(e.filter.monto=0),null==e.filter.tipo_comprobante&&(e.filter.tipo_comprobante=0),null==e.filter.sucursal&&(e.filter.sucursal=0),null==e.filter.usuario&&(e.filter.usuario=0),null==e.filter.numero&&(e.filter.numero=0);var t=o.defer();return r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,inicio:e.filter.inicio,fin:e.filter.fin,columna:e.column,direccion:e.direction,monto:e.filter.monto,tipo_comprobante:e.filter.tipo_comprobante,sucursal:e.filter.sucursal,usuario:e.filter.usuario,numero:e.filter.numero,busqueda:e.search},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("LibroMayor",["$resource",function(e){return e(restServer+"/comprobante-cuenta/:id_cuenta/periodo/:inicio/:fin")}]).factory("LibroMayorCuenta",["LibroMayor","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_cuenta:e,inicio:t,fin:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ComprobanteFavorito",["$resource",function(e){return e(restServer+"comprobante-contabilidad/favorito/:id_comprobante",{id_comprobante:"@id_comprobante"},{update:{method:"PUT"}})}]).factory("AsignarComprobanteFavorito",["ComprobanteFavorito","$q",function(r,o){return function(e){var t=o.defer();return r.update({id_comprobante:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("AsientosComprobanteContabilidad",["$resource",function(e){return e(restServer+"comprobante-cuenta/asientos/:id_cuenta",{id_cuenta:"@id_cuenta"},{update:{method:"PUT"}})}]).factory("FormatoImpresion",["$resource",function(e){return e(restServer+"tipos/:nombre_corto",{nombre_corto:"@nombre_corto"},{update:{method:"PUT"}})}]).factory("IdsFormatoImpresion",["FormatoImpresion","$q",function(e,r){return function(){var t=r.defer();return e.get({nombre_corto:"FORM_IMP_FAC"},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ListaAsientosComprobanteContabilidad",["AsientosComprobanteContabilidad","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_cuenta:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("NuevoComprobanteContabilidad",["$resource",function(e){return e(restServer+"comprobante-contabolidad",{update:{method:"PUT"}})}]).factory("ActualizarComprobanteContabilidad",["$resource",function(e){return e(restServer+"comprobante-contabolidad/:id_comprobante",{id_comprobante:"@id_comprobante"},{update:{method:"PUT"}})}]).factory("DatosComprobante",["ActualizarComprobanteContabilidad","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_comprobante:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("EliminarComprobante",["ActualizarComprobanteContabilidad","$q",function(r,o){return function(e){var t=o.defer();return r.save({id_comprobante:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ImprimirSalida",["Diccionario","ImprimirFactura","ImprimirProforma","ImprimirNotaBaja","ImprimirNotaTraspaso","ImprimirServicio",function(i,n,c,s,u,d){return function(e,t,r,o,a){e==i.EGRE_FACTURACION?n(t,r,o):e==i.EGRE_PROFORMA?c(t,r,o,a):e==i.EGRE_BAJA?s(t,o):e==i.EGRE_TRASPASO?u(t,o):e==i.EGRE_SERVICIO&&d(t,r,o)}}]).factory("ImprimirFactura",["Diccionario","ImprimirFacturaCartaOficio","ImprimirFacturaCartaOficioSinFormato","ImprimirPedido","ImprimirFacturaRollo","$timeout",function(s,u,e,d,l,f){return function(e,t,r,o){var a,i,n;if(e.configuracion.formatoColor=e.configuracion.formatoColorFactura,e.configuracion.formatoPapel=e.configuracion.formatoPapelFactura,e.configuracion.color1=e.configuracion.color_cabecera_factura,e.configuracion.color2=e.configuracion.color_detalle_factura,e.configuracion.nota=e.configuracion.nota_factura_bien?e.configuracion.nota_factura_bien:"",e.configuracion.tamanoPapelFactura.nombre_corto==s.FACT_PAPEL_OFICIO)a=[612,936],e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_VACIA?u(e,a,!0,!1,!1,r):e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_COMPLETA?u(e,a,!1,!0,!1,r):e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_SEMICOMPLETA&&u(e,a,!1,!1,!0);else if(e.configuracion.tamanoPapelFactura.nombre_corto==s.FACT_PAPEL_CARTA)a=[612,792],e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_VACIA?u(e,a,!0,!1,!1,r):e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_COMPLETA?u(e,a,!1,!0,!1,r):e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_SEMICOMPLETA&&u(e,a,!1,!1,!0,r);else if(e.configuracion.tamanoPapelFactura.nombre_corto==s.FACT_PAPEL_MEDIOOFICIO)a=[612,468],e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_VACIA?u(e,a,!0,!1,!1,r):e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_COMPLETA?u(e,a,!1,!0,!1,r):e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_SEMICOMPLETA&&u(e,a,!1,!1,!0,r);else if(e.configuracion.tamanoPapelFactura.nombre_corto==s.FACT_PAPEL_ROLLO){if(a=[227,e.detallesVenta.length<=2?610:610+20*(e.detallesVenta.length-2)],t&&!e.configuracion.imprimir_al_guardar){if(r.empresa.usar_pedidos){var c=230+20*e.detallesVenta.length;i=new PDFDocument({compress:!1,size:[227,c],margins:{top:10,bottom:10,left:20,right:20}}),n=i.pipe(blobStream()),d(e,t,i,n,c,r,!1)}}else i=new PDFDocument({compress:!1,size:a,margins:{top:0,bottom:0,left:20,right:20}}),n=i.pipe(blobStream()),l(e,a,i,n,r),r.empresa.usar_pedidos&&(c=230+20*e.detallesVenta.length,i.addPage({size:[227,c],margins:{top:10,bottom:10,left:20,right:20}}),d(e,t,i,n,c,r,!1));i&&n&&(i.end(),n.on("finish",function(){var e=n.toBlobURL("application/pdf"),t=window.open(e,"_blank","location=no");f(function(){t.print()},500)}))}}}]).factory("ImprimirServicio",["Diccionario","ImprimirFacturaCartaOficio","ImprimirFacturaCartaOficioSinFormato","ImprimirPedido","ImprimirFacturaRollo","$timeout",function(c,s,e,u,d,l){return function(e,t,r){var o,a,i;if(e.configuracion.formatoColor=e.configuracion.formatoColorFacturaServicio,e.configuracion.formatoPapel=e.configuracion.formatoPapelFacturaServicio,e.configuracion.color1=e.configuracion.color_cabecera_factura_servicio,e.configuracion.color2=e.configuracion.color_detalle_factura_servicio,e.configuracion.nota=e.configuracion.nota_factura_servicio?e.configuracion.nota_factura_servicio:"",e.configuracion.tamanoPapelFacturaServicio.nombre_corto==c.FACT_PAPEL_OFICIO)o=[612,936],e.configuracion.impresionFactura.nombre_corto==c.FACT_IMPRESION_VACIA?s(e,o,!0,!1,!1,r):e.configuracion.impresionFactura.nombre_corto==c.FACT_IMPRESION_COMPLETA?s(e,o,!1,!0,!1,r):e.configuracion.impresionFactura.nombre_corto==c.FACT_IMPRESION_SEMICOMPLETA&&s(e,o,!1,!1,!0);else if(e.configuracion.tamanoPapelFacturaServicio.nombre_corto==c.FACT_PAPEL_CARTA)o=[612,792],e.configuracion.impresionFactura.nombre_corto==c.FACT_IMPRESION_VACIA?s(e,o,!0,!1,!1,r):e.configuracion.impresionFactura.nombre_corto==c.FACT_IMPRESION_COMPLETA?s(e,o,!1,!0,!1,r):e.configuracion.impresionFactura.nombre_corto==c.FACT_IMPRESION_SEMICOMPLETA&&s(e,o,!1,!1,!0,r);else if(e.configuracion.tamanoPapelFacturaServicio.nombre_corto==c.FACT_PAPEL_MEDIOOFICIO)o=[612,468],e.configuracion.impresionFactura.nombre_corto==c.FACT_IMPRESION_VACIA?s(e,o,!0,!1,!1,r):e.configuracion.impresionFactura.nombre_corto==c.FACT_IMPRESION_COMPLETA?s(e,o,!1,!0,!1,r):e.configuracion.impresionFactura.nombre_corto==c.FACT_IMPRESION_SEMICOMPLETA&&s(e,o,!1,!1,!0,r);else if(e.configuracion.tamanoPapelFacturaServicio.nombre_corto==c.FACT_PAPEL_ROLLO){if(o=[227,e.detallesVenta.length<=2?610:610+20*(e.detallesVenta.length-2)],t&&!e.configuracion.imprimir_al_guardar){if(r.empresa.usar_pedidos){var n=230+20*e.detallesVenta.length;a=new PDFDocument({compress:!1,size:[227,n],margins:{top:10,bottom:10,left:20,right:20}}),i=a.pipe(blobStream()),u(e,t,a,i,n,r,!1)}}else a=new PDFDocument({compress:!1,size:o,margins:{top:0,bottom:0,left:20,right:20}}),i=a.pipe(blobStream()),d(e,o,a,i,r),r.empresa.usar_pedidos&&(n=230+20*e.detallesVenta.length,a.addPage({size:[227,n],margins:{top:10,bottom:10,left:20,right:20}}),u(e,t,a,i,n,r,!1));a&&i&&(a.end(),i.on("finish",function(){var e=i.toBlobURL("application/pdf"),t=window.open(e,"_blank","location=no");l(function(){t.print()},500)}))}}}]).factory("ImprimirFacturaCartaOficio",["blockUI","VerificarDescuentos","Diccionario","DibujarCabeceraFacturaNVCartaOficio","DibujarCabeceraFacturaNVmedioOficio","$timeout",function(E,S,b,y,T,A){return function(e,t,r,o,a,i){var n=new PDFDocument({compress:!1,size:t,margin:10}),c=n.pipe(blobStream());if(e.configuracion.usar_pf){var s=0;e.configuracion.tamanoPapelFactura.nombre_corto==b.FACT_PAPEL_OFICIO?s=19:e.configuracion.tamanoPapelFactura.nombre_corto==b.FACT_PAPEL_CARTA?s=16:e.configuracion.tamanoPapelFactura.nombre_corto==b.FACT_PAPEL_MEDIOOFICIO&&(s=3);var u=240,d=0,l=1,f=Math.ceil(e.detallesVenta.length/s);y(n,r,o,e,t,l,f,i);for(var m=0;m<e.detallesVenta.length&&d<=s;m++){if(n.font("Helvetica",8),e.detallesVenta[m].producto){e.detallesVenta[m].fecha_vencimiento=new Date(e.detallesVenta[m].fecha_vencimiento);var p=e.detallesVenta[m].fecha_vencimiento.getDate()+"/"+(e.detallesVenta[m].fecha_vencimiento.getMonth()+1)+"/"+e.detallesVenta[m].fecha_vencimiento.getFullYear().toString().substring(2);n.text(e.detallesVenta[m].producto.codigo,55,u,{width:70}),n.text(e.detallesVenta[m].cantidad,135,u),n.text(e.detallesVenta[m].producto.unidad_medida,160,u-3,{width:43});var v=(P=e.detallesVenta[m].producto.nombre.length)<=24?u:24<P&&P<=60?u-4:u-11;n.text(e.detallesVenta[m].producto.nombre,198,v,{width:130}),e.con_vencimiento&&(n.text(p,340,u),n.text(e.detallesVenta[m].lote,380,u)),n.text(e.detallesVenta[m].precio_unitario.toFixed(2),410,u),n.text(e.detallesVenta[m].total.toFixed(2),530,u),(o||r)&&"FORM_C_MAR"==e.configuracion.formatoPapel.nombre_corto&&n.rect(50,u-15,520,30).stroke()}else e.detallesVenta[m].servicio&&(e.detallesVenta[m].fecha_vencimiento=new Date(e.detallesVenta[m].fecha_vencimiento),p=e.detallesVenta[m].fecha_vencimiento.getDate()+"/"+(e.detallesVenta[m].fecha_vencimiento.getMonth()+1)+"/"+e.detallesVenta[m].fecha_vencimiento.getFullYear().toString().substring(2),n.text(e.detallesVenta[m].servicio.codigo,55,u,{width:70}),n.text(e.detallesVenta[m].cantidad,130,u),v=(P=e.detallesVenta[m].servicio.nombre.length)<=24?u:24<P&&P<=60?u-4:u-11,n.text(e.detallesVenta[m].servicio.nombre,198,v,{width:130}),e.con_vencimiento&&(n.text(p,340,u),n.text(e.detallesVenta[m].lote,380,u)),n.text(e.detallesVenta[m].importe.toFixed(2),450,u),n.text(e.detallesVenta[m].total.toFixed(2),530,u),(o||r)&&"FORM_C_MAR"==e.configuracion.formatoPapel.nombre_corto&&n.rect(50,u-15,520,30).stroke());u+=30,++d==s&&(n.addPage({size:t,margin:10}),u=240,d=0,y(n,r,o,e,t,l+=1,f,i))}(o||r)&&(n.font("Helvetica-Bold",8),n.text("TOTAL",485,u)),n.font("Helvetica",8),n.text(e.total.toFixed(2),530,u),n.text("SON : "+e.numero_literal,55,u),(o||r)&&n.rect(50,u-15,520,30).stroke();var _=new Date,g=_.getMinutes();g<10&&(g="0"+g),n.text("usuario : "+i.nombre_usuario,55,u+20),n.text("fecha : "+_.getDate()+"/"+(_.getMonth()+1)+"/"+_.getFullYear()+"  "+_.getHours()+":"+g,180,u+20)}else{var h=document.getElementById("qr-code"),x=S(e.detallesVenta);for(n.font("Helvetica",8),s=0,e.configuracion.tamanoPapelFactura.nombre_corto==b.FACT_PAPEL_OFICIO?s=19:e.configuracion.tamanoPapelFactura.nombre_corto==b.FACT_PAPEL_CARTA?s=16:e.configuracion.tamanoPapelFactura.nombre_corto==b.FACT_PAPEL_MEDIOOFICIO&&(s=3),void 0!==e.detallesVenta?e.detallesVenta:e.detallesProformas,u=240,d=0,l=1,f=Math.ceil(e.detallesVenta.length/s),T(n,r,o,e,t,l,f,i,b),m=0;m<e.detallesVenta.length&&d<=s;m++){if(n.font("Helvetica",8),e.detallesVenta[m].producto)x?(n.text(e.detallesVenta[m].producto.codigo,55,u),n.text(e.detallesVenta[m].cantidad,115,u),n.text(e.detallesVenta[m].producto.unidad_medida,140,u),n.text(e.detallesVenta[m].producto.nombre,180,u-6,{width:120}),n.text(e.detallesVenta[m].precio_unitario.toFixed(2),300,u),n.text(e.detallesVenta[m].importe.toFixed(2),335,u),n.text(e.detallesVenta[m].tipo_descuento?"%":"Bs",385,u-10),n.text(e.detallesVenta[m].descuento.toFixed(2),385,u),n.text(e.detallesVenta[m].tipo_recargo?"%":"Bs",420,u-10),n.text(e.detallesVenta[m].recargo.toFixed(2),420,u),n.text(e.detallesVenta[m].ice.toFixed(2),455,u),n.text(e.detallesVenta[m].excento.toFixed(2),490,u)):(n.text(e.detallesVenta[m].producto.codigo,55,u),n.text(e.detallesVenta[m].cantidad,110,u),n.text(e.detallesVenta[m].producto.unidad_medida,165,u),v=(P=e.detallesVenta[m].producto.nombre.length)<=45?u:45<P&&P<=90?u-4:u-11,n.text(e.detallesVenta[m].producto.nombre,220,v,{width:225}),n.text(e.detallesVenta[m].precio_unitario.toFixed(2),450,u)),n.text(e.detallesVenta[m].total.toFixed(2),520,u);else if(e.movimiento&&(e.movimientoServicio=e.movimiento.nombre_corto==b.EGRE_SERVICIO?e.movimiento:null),e.movimientoServicio)e.detallesVenta[m].fecha_vencimiento=new Date(e.detallesVenta[m].fecha_vencimiento),p=e.detallesVenta[m].fecha_vencimiento.getDate()+"/"+(e.detallesVenta[m].fecha_vencimiento.getMonth()+1)+"/"+e.detallesVenta[m].fecha_vencimiento.getFullYear().toString().substring(2),x?(v=(P=e.detallesVenta[m].observaciones.length)<=24?u:24<P&&P<=60?u-4:u-11,n.text(e.detallesVenta[m].observaciones,55,v,{width:300}),n.text(e.detallesVenta[m].importe.toFixed(2),335,u),n.text(e.detallesVenta[m].descuento.toFixed(2),385,u),n.text(e.detallesVenta[m].recargo.toFixed(2),420,u),n.text(e.detallesVenta[m].ice.toFixed(2),455,u),n.text(e.detallesVenta[m].excento.toFixed(2),490,u)):(v=(P=e.detallesVenta[m].observaciones.length)<=24?u:24<P&&P<=60?u-4:u-11,n.text(e.detallesVenta[m].observaciones,55,v,{width:400}),n.text(e.detallesVenta[m].importe.toFixed(2),450,u)),n.text(e.detallesVenta[m].total.toFixed(2),530,u),(o||r)&&"FORM_C_MAR"==e.configuracion.formatoPapel.nombre_corto&&n.rect(50,u-15,520,30).stroke();else if(x)n.text(e.detallesVenta[m].servicio.codigo,55,u),n.text(e.detallesVenta[m].cantidad,115,u),n.text(e.detallesVenta[m].observaciones,180,u-6,{width:120}),n.text(e.detallesVenta[m].precio_unitario.toFixed(2),300,u),n.text(e.detallesVenta[m].importe.toFixed(2),335,u),n.text(e.detallesVenta[m].total.toFixed(2),520,u);else{var P;n.text(e.detallesVenta[m].servicio.codigo,55,u),n.text(e.detallesVenta[m].cantidad,110,u),v=(P=e.detallesVenta[m].servicio.nombre.length)<=45?u:45<P&&P<=90?u-4:u-11,n.text(e.detallesVenta[m].observaciones,220,v,{width:225}),n.text(e.detallesVenta[m].precio_unitario.toFixed(2),450,u),n.text(e.detallesVenta[m].total.toFixed(2),520,u)}(o||r)&&"FORM_C_MAR"==e.configuracion.formatoPapel.nombre_corto&&n.rect(50,u-15,520,30).stroke(),u+=30,s<++d&&(n.addPage({size:t,margin:10}),u=240,d=0,T(n,r,o,e,t,l+=1,f,i,b))}(o||r)&&(n.font("Helvetica-Bold",8),n.text("TOTAL",455,u)),n.font("Helvetica",8),n.text(e.total.toFixed(2),520,u),n.text("SON : "+e.numero_literal,55,u),n.text("CÓDIGO DE CONTROL : "+e.codigo_control,55,u+30),e.fecha_limite_emision=new Date(e.fecha_limite_emision),n.text("FECHA LÍMITE DE EMISIÓN: "+e.fecha_limite_emision.getDate()+"/"+(e.fecha_limite_emision.getMonth()+1)+"/"+e.fecha_limite_emision.getFullYear(),55,u+60),(o||r)&&(n.rect(50,u-15,520,30).stroke(),n.rect(50,u+25,400,20).stroke(),n.rect(50,u+55,400,20).stroke()),qr.canvas({canvas:h,value:i.empresa.nit+"|"+e.factura+"|"+e.autorizacion+"|"+e.fechaTexto+"|"+e.total.toFixed(2)+"|"+e.total.toFixed(2)+"|"+e.codigo_control+"|"+e.cliente.nit+"|0|0|0|0"},function(){});var C=h.toDataURL("image/png");n.image(C,470,u+20,{width:70,height:70}),(o||r)&&(n.text(e.configuracion.nota,50,t[1]-80),n.text(void 0!==e.pieFactura&&null!==e.pieFactura?e.pieFactura.nombre:"",50,t[1]-60),n.text('"ESTA FACTURA CONTRIBUYE AL DESARROLLO DEL PAIS. EL USO ILICITO DE ESTA SERA SANCIONADO DE ACUERDO A LEY"',50,t[1]-40))}n.end(),c.on("finish",function(){var e=c.toBlobURL("application/pdf"),t=window.open(e,"_blank","location=no");A(function(){t.print()},500)}),E.stop()}}]).factory("DibujarCabeceraFacturaNVCartaOficio",[function(){return function(e,t,r,o,a,i,n,c){if(o.configuracion.usar_pf){if(t){100<c.empresa.imagen.length&&e.image(c.empresa.imagen,60,40,{fit:[65,65]}),e.font("Helvetica-Bold",8),e.text(c.empresa.razon_social.toUpperCase(),60,105),e.font("Helvetica",7),e.text(o.sucursal.nombre.toUpperCase(),60,113);var s=(d=o.sucursal.direccion.length)<=45?129:45<d&&d<=90?139:145;e.text(o.sucursal.direccion.toUpperCase(),60,121);var u=(null!=o.sucursal.telefono1?o.sucursal.telefono1:"")+(null!=o.sucursal.telefono2?"-"+o.sucursal.telefono2:"")+(null!=o.sucursal.telefono3?"-"+o.sucursal.telefono3:"");e.text("TELF.: "+u,60,s),e.text("COCHABAMBA - BOLIVIA",60,s+8)}e.font("Helvetica-Bold",16),e.text(o.configuracion.tituloFactura.nombre.toUpperCase(),250,90),e.font("Helvetica-Bold",8),(r||t)&&(e.rect(380,40,190,50).stroke(),e.text("NIT : ",400,50),e.text("Nota No : ",400,60)),e.text(c.empresa.nit,500,50),e.text(o.factura,500,60),(r||t)&&(e.rect(50,160,520,40).stroke(),e.text("FECHA : ",60,165),e.text("SEÑOR(ES) : ",60,175),e.text("NIT : ",360,165)),e.text(o.fecha_factura?o.fecha_factura:o.fechaTexto,120,165),e.text(o.cliente.razon_social,120,175),e.text(o.cliente.nit,400,165),(r||t)&&(e.rect(50,200,520,25).stroke(),e.text("CODIGO",55,210,{width:70}),e.text("CANT.",125,210),o.detallesVenta[0].producto&&e.text("UNIDAD",155,210),e.text("DETALLE",198,210),o.con_vencimiento&&(e.text("VENC.",340,210),e.text("LOTE",380,210)),o.detallesVenta[0].producto&&e.text("P.UNIT.",410,210),e.text("TOTAL",530,210)),e.font("Helvetica",7),e.text("PÁGINA "+i+" DE "+n,500,a[1]-60)}else{var d;if(t)100<c.empresa.imagen.length&&e.image(c.empresa.imagen,60,40,{fit:[65,65]}),e.font("Helvetica-Bold",8),e.text(c.empresa.razon_social.toUpperCase(),60,105),e.font("Helvetica",7),e.text(o.sucursal.nombre.toUpperCase(),60,113),s=(d=o.sucursal.direccion.length)<=45?129:45<d&&d<=90?139:145,e.text(o.sucursal.direccion.toUpperCase(),60,121),u=(null!=o.sucursal.telefono1?o.sucursal.telefono1:"")+(null!=o.sucursal.telefono2?"-"+o.sucursal.telefono2:"")+(null!=o.sucursal.telefono3?"-"+o.sucursal.telefono3:""),e.text("TELF.: "+u,60,s),e.text("COCHABAMBA - BOLIVIA",60,s+8);e.font("Helvetica-Bold",16),e.text(o.configuracion.tituloFactura.nombre.toUpperCase(),250,90),e.font("Helvetica-Bold",8),e.text(o.actividad.nombre,380,95,{width:200}),(r||t)&&(e.rect(380,40,190,50).stroke(),e.text("NIT : ",390,50),e.text("FACTURA No : ",390,60),e.text("AUTORIZACIÓN No : ",390,70)),e.text(c.empresa.nit,500,50),e.text(o.factura,500,60),e.text(o.autorizacion,500,70),(r||t)&&(e.rect(50,160,520,40).stroke(),e.text("FECHA : ",60,165),e.text("SEÑOR(ES) : ",60,175),e.text("NIT : ",360,165)),e.text(o.fecha_factura?o.fecha_factura:o.fechaTexto,120,165),e.text(o.cliente.razon_social,120,175),e.text(o.cliente.nit,400,165),(r||t)&&(e.rect(50,200,520,25).stroke(),e.text("CODIGO",55,210,{width:70}),e.text("CANT.",125,210),o.detallesVenta[0].producto&&e.text("UNIDAD",155,210),e.text("DETALLE",198,210),o.con_vencimiento&&(e.text("VENC.",340,210),e.text("LOTE",380,210)),o.detallesVenta[0].producto&&e.text("P.UNIT.",410,210),e.text("IMP.",450,210),o.detallesVenta[0].producto&&e.text("DESC.",490,210),e.text("TOTAL",530,210)),e.font("Helvetica",7),e.text("PÁGINA "+i+" DE "+n,500,a[1]-60)}}}]).factory("ImprimirFacturaCartaOficioSinFormato",["blockUI","VerificarDescuentos","Diccionario","DibujarCabeceraFacturaNVCartaOficioSinFormato","DibujarCabeceraFacturaNVmedioOficio","$timeout",function(E,S,b,y,T,A){return function(e,t,r,o,a,i){var n=new PDFDocument({compress:!1,size:t,margin:10}),c=n.pipe(blobStream());if(e.configuracion.usar_pf){var s=0;e.configuracion.tamanoPapelFactura.nombre_corto==b.FACT_PAPEL_OFICIO?s=19:e.configuracion.tamanoPapelFactura.nombre_corto==b.FACT_PAPEL_CARTA?s=32:e.configuracion.tamanoPapelFactura.nombre_corto==b.FACT_PAPEL_MEDIOOFICIO&&(s=3);var u=240,d=0,l=1,f=Math.ceil(e.detallesVenta.length/s);y(n,r,o,e,t,l,f,i);for(var m=0;m<e.detallesVenta.length&&d<=s;m++){if(n.font("Helvetica",8),e.detallesVenta[m].producto){e.detallesVenta[m].fecha_vencimiento=new Date(e.detallesVenta[m].fecha_vencimiento);var p=e.detallesVenta[m].fecha_vencimiento.getDate()+"/"+(e.detallesVenta[m].fecha_vencimiento.getMonth()+1)+"/"+e.detallesVenta[m].fecha_vencimiento.getFullYear().toString().substring(2);n.text(e.detallesVenta[m].producto.codigo,55,u,{width:70}),n.text(e.detallesVenta[m].cantidad,135,u),n.text(e.detallesVenta[m].producto.unidad_medida,180,u-3,{width:43});var v=(P=e.detallesVenta[m].producto.nombre.length)<=27?u:27<P&&P<=63?u-4:u-11;n.text(e.detallesVenta[m].producto.nombre,240,v,{width:250}),e.con_vencimiento&&(n.text(p,340,u),n.text(e.detallesVenta[m].lote,380,u)),n.text(e.detallesVenta[m].precio_unitario.toFixed(2),505,u),n.text(e.detallesVenta[m].total.toFixed(2),560,u)}else e.detallesVenta[m].fecha_vencimiento=new Date(e.detallesVenta[m].fecha_vencimiento),p=e.detallesVenta[m].fecha_vencimiento.getDate()+"/"+(e.detallesVenta[m].fecha_vencimiento.getMonth()+1)+"/"+e.detallesVenta[m].fecha_vencimiento.getFullYear().toString().substring(2),n.text(e.detallesVenta[m].servicio.codigo,55,u,{width:70}),n.text(e.detallesVenta[m].cantidad,130,u),v=(P=e.detallesVenta[m].observaciones.length)<=24?u:24<P&&P<=60?u-4:u-11,n.text(e.detallesVenta[m].observaciones,198,v,{width:130}),e.con_vencimiento&&(n.text(p,340,u),n.text(e.detallesVenta[m].lote,380,u)),n.text(e.detallesVenta[m].importe.toFixed(2),450,u),n.text(e.detallesVenta[m].total.toFixed(2),580,u);u+=15,++d==s&&(n.addPage({size:t,margin:10}),u=240,d=0,y(n,r,o,e,t,l+=1,f,i))}(o||r)&&(n.font("Helvetica-Bold",8),n.text("TOTAL",500,u)),n.font("Helvetica",8),n.text(e.total.toFixed(2),560,u),n.text("SON : "+e.numero_literal,55,u),(o||r)&&n.rect(50,u-5,545,15).stroke();var _=new Date,g=_.getMinutes();g<10&&(g="0"+g),n.text("usuario : "+i.nombre_usuario,55,u+20),n.text("fecha : "+_.getDate()+"/"+(_.getMonth()+1)+"/"+_.getFullYear()+"  "+_.getHours()+":"+g,180,u+20)}else{var h=document.getElementById("qr-code"),x=S(e.detallesVenta);for(n.font("Helvetica",8),s=0,e.configuracion.tamanoPapelFactura.nombre_corto==b.FACT_PAPEL_OFICIO?s=19:e.configuracion.tamanoPapelFactura.nombre_corto==b.FACT_PAPEL_CARTA?s=32:e.configuracion.tamanoPapelFactura.nombre_corto==b.FACT_PAPEL_MEDIOOFICIO&&(s=3),void 0!==e.detallesVenta?e.detallesVenta:e.detallesProformas,u=240,d=0,l=1,f=Math.ceil(e.detallesVenta.length/s),T(n,r,o,e,t,l,f,i,b),m=0;m<e.detallesVenta.length&&d<=s;m++){if(n.font("Helvetica",8),e.detallesVenta[m].producto)x?(n.text(e.detallesVenta[m].producto.codigo,55,u),n.text(e.detallesVenta[m].cantidad,115,u),n.text(e.detallesVenta[m].producto.unidad_medida,140,u),n.text(e.detallesVenta[m].producto.nombre,180,u-6,{width:120}),n.text(e.detallesVenta[m].precio_unitario.toFixed(2),300,u),n.text(e.detallesVenta[m].importe.toFixed(2),335,u),n.text(e.detallesVenta[m].tipo_descuento?"%":"Bs",385,u-10),n.text(e.detallesVenta[m].descuento.toFixed(2),385,u),n.text(e.detallesVenta[m].tipo_recargo?"%":"Bs",420,u-10),n.text(e.detallesVenta[m].recargo.toFixed(2),420,u),n.text(e.detallesVenta[m].ice.toFixed(2),455,u),n.text(e.detallesVenta[m].excento.toFixed(2),490,u)):(n.text(e.detallesVenta[m].producto.codigo,55,u),n.text(e.detallesVenta[m].cantidad,110,u),n.text(e.detallesVenta[m].producto.unidad_medida,165,u),v=(P=e.detallesVenta[m].producto.nombre.length)<=45?u:45<P&&P<=90?u-4:u-11,n.text(e.detallesVenta[m].producto.nombre,220,v,{width:225}),n.text(e.detallesVenta[m].precio_unitario.toFixed(2),450,u)),n.text(e.detallesVenta[m].total.toFixed(2),520,u);else if(e.movimiento&&(e.movimientoServicio=e.movimiento.nombre_corto==b.EGRE_SERVICIO?e.movimiento:null),e.movimientoServicio)e.detallesVenta[m].fecha_vencimiento=new Date(e.detallesVenta[m].fecha_vencimiento),p=e.detallesVenta[m].fecha_vencimiento.getDate()+"/"+(e.detallesVenta[m].fecha_vencimiento.getMonth()+1)+"/"+e.detallesVenta[m].fecha_vencimiento.getFullYear().toString().substring(2),x?(v=(P=e.detallesVenta[m].observaciones.length)<=24?u:24<P&&P<=60?u-4:u-11,n.text(e.detallesVenta[m].observaciones,55,v,{width:300}),n.text(e.detallesVenta[m].importe.toFixed(2),335,u),n.text(e.detallesVenta[m].descuento.toFixed(2),385,u),n.text(e.detallesVenta[m].recargo.toFixed(2),420,u),n.text(e.detallesVenta[m].ice.toFixed(2),455,u),n.text(e.detallesVenta[m].excento.toFixed(2),490,u)):(v=(P=e.detallesVenta[m].observaciones.length)<=24?u:24<P&&P<=60?u-4:u-11,n.text(e.detallesVenta[m].observaciones,55,v,{width:400}),n.text(e.detallesVenta[m].importe.toFixed(2),450,u)),n.text(e.detallesVenta[m].total.toFixed(2),530,u),(o||r)&&n.rect(50,u-15,520,30).stroke();else if(x)n.text(e.detallesVenta[m].servicio.codigo,55,u),n.text(e.detallesVenta[m].cantidad,115,u),n.text(e.detallesVenta[m].observaciones,180,u-6,{width:120}),n.text(e.detallesVenta[m].precio_unitario.toFixed(2),300,u),n.text(e.detallesVenta[m].importe.toFixed(2),335,u),n.text(e.detallesVenta[m].total.toFixed(2),520,u);else{var P;n.text(e.detallesVenta[m].servicio.codigo,55,u),n.text(e.detallesVenta[m].cantidad,110,u),v=(P=e.detallesVenta[m].observaciones.length)<=45?u:45<P&&P<=90?u-4:u-11,n.text(e.detallesVenta[m].observaciones,220,v,{width:225}),n.text(e.detallesVenta[m].precio_unitario.toFixed(2),450,u),n.text(e.detallesVenta[m].total.toFixed(2),520,u)}(o||r)&&n.rect(50,u-15,520,30).stroke(),u+=30,s<++d&&(n.addPage({size:t,margin:10}),u=240,d=0,T(n,r,o,e,t,l+=1,f,i,b))}(o||r)&&(n.font("Helvetica-Bold",8),n.text("TOTAL",455,u)),n.font("Helvetica",8),n.text(e.total.toFixed(2),520,u),n.text("SON : "+e.numero_literal,55,u),n.text("CÓDIGO DE CONTROL : "+e.codigo_control,55,u+30),e.fecha_limite_emision=new Date(e.fecha_limite_emision),n.text("FECHA LÍMITE DE EMISIÓN: "+e.fecha_limite_emision.getDate()+"/"+(e.fecha_limite_emision.getMonth()+1)+"/"+e.fecha_limite_emision.getFullYear(),55,u+60),(o||r)&&(n.rect(50,u-15,520,30).stroke(),n.rect(50,u+25,400,20).stroke(),n.rect(50,u+55,400,20).stroke()),qr.canvas({canvas:h,value:i.empresa.nit+"|"+e.factura+"|"+e.autorizacion+"|"+e.fechaTexto+"|"+e.total.toFixed(2)+"|"+e.total.toFixed(2)+"|"+e.codigo_control+"|"+e.cliente.nit+"|0|0|0|0"},function(){});var C=h.toDataURL("image/png");n.image(C,470,u+20,{width:70,height:70}),(o||r)&&(n.text(void 0!==e.pieFactura&&null!==e.pieFactura?e.pieFactura.nombre:"",50,t[1]-60),n.text('"ESTA FACTURA CONTRIBUYE AL DESARROLLO DEL PAIS. EL USO ILICITO DE ESTA SERA SANCIONADO DE ACUERDO A LEY"',50,t[1]-40))}n.end(),c.on("finish",function(){var e=c.toBlobURL("application/pdf"),t=window.open(e,"_blank","location=no");A(function(){t.print()},500)}),E.stop()}}]).factory("DibujarCabeceraFacturaNVCartaOficioSinFormato",[function(){return function(e,t,r,o,a,i,n,c){if(o.configuracion.usar_pf){if(t){100<c.empresa.imagen.length&&e.image(c.empresa.imagen,60,40,{fit:[65,65]}),e.font("Helvetica-Bold",8),e.text(c.empresa.razon_social.toUpperCase(),60,105),e.font("Helvetica",7),e.text(o.sucursal.nombre.toUpperCase(),60,113);var s=(d=o.sucursal.direccion.length)<=45?129:45<d&&d<=90?139:145;e.text(o.sucursal.direccion.toUpperCase(),60,120,{width:150});var u=(null!=o.sucursal.telefono1?o.sucursal.telefono1:"")+(null!=o.sucursal.telefono2?"-"+o.sucursal.telefono2:"")+(null!=o.sucursal.telefono3?"-"+o.sucursal.telefono3:"");e.text("TELF.: "+u,60,s),s+=11,e.font("Helvetica-Bold").text("COCHABAMBA - BOLIVIA",60,s)}e.font("Helvetica-Bold",16),e.text(o.configuracion.tituloFactura.nombre.toUpperCase(),250,90),e.font("Helvetica-Bold",10),(r||t)&&(e.text("NIT : ",410,50),e.text("Nota No : ",410,60)),e.text(c.empresa.nit,500,50),e.font("Helvetica-Bold",13),e.text(o.factura,500,60),e.font("Helvetica-Bold",10),(r||t)&&(e.text("FECHA : ",60,165),e.text("SEÑOR(ES) : ",60,175),e.text("NIT : ",470,165)),e.text(o.fecha_factura?o.fecha_factura:o.fechaTexto,120,165),e.text(o.cliente.razon_social,130,175),e.text(o.cliente.nit,530,165),(r||t)&&(e.rect(50,200,545,25).stroke(),e.text("CODIGO",55,210,{width:70}),e.text("CANT.",125,210),o.detallesVenta[0].producto&&e.text("UNIDAD",175,210),e.text("DETALLE",250,210),o.con_vencimiento&&(e.text("VENC.",340,210),e.text("LOTE",380,210)),o.detallesVenta[0].producto&&e.text("P.UNIT.",500,210),e.text("TOTAL",555,210)),e.font("Helvetica",7),e.text("PÁGINA "+i+" DE "+n,500,a[1]-60)}else{var d;if(t)100<c.empresa.imagen.length&&e.image(c.empresa.imagen,60,40,{fit:[65,65]}),e.font("Helvetica-Bold",8),e.text(c.empresa.razon_social.toUpperCase(),60,105),e.font("Helvetica",7),e.text(o.sucursal.nombre.toUpperCase(),60,113),s=(d=o.sucursal.direccion.length)<=45?129:45<d&&d<=90?139:145,e.text(o.sucursal.direccion.toUpperCase(),60,120,{width:150}),u=(null!=o.sucursal.telefono1?o.sucursal.telefono1:"")+(null!=o.sucursal.telefono2?"-"+o.sucursal.telefono2:"")+(null!=o.sucursal.telefono3?"-"+o.sucursal.telefono3:""),e.text("TELF.: "+u,60,s),s+=11,e.font("Helvetica-Bold").text("COCHABAMBA - BOLIVIA",60,s);e.font("Helvetica-Bold",16),e.text(o.configuracion.tituloFactura.nombre.toUpperCase(),250,90),e.font("Helvetica-Bold",8),e.text(o.actividad.nombre,380,95,{width:200}),(r||t)&&(e.text("NIT : ",390,50),e.text("FACTURA No : ",390,60),e.text("AUTORIZACIÓN No : ",390,70)),e.text(c.empresa.nit,500,50),e.text(o.factura,500,60),e.text(o.autorizacion,500,70),(r||t)&&(e.text("FECHA : ",60,165),e.text("SEÑOR(ES) : ",60,175),e.text("NIT : ",360,165)),e.text(o.fecha_factura?o.fecha_factura:o.fechaTexto,120,165),e.text(o.cliente.razon_social,130,175),e.text(o.cliente.nit,410,165),(r||t)&&(e.text("CODIGO",55,210,{width:70}),e.text("CANT.",125,210),o.detallesVenta[0].producto&&e.text("UNIDAD",155,210),e.text("DETALLE",198,210),o.con_vencimiento&&(e.text("VENC.",340,210),e.text("LOTE",380,210)),o.detallesVenta[0].producto&&e.text("P.UNIT.",410,210),e.text("TOTAL",530,210)),e.font("Helvetica",7),e.text("PÁGINA "+i+" DE "+n,500,a[1]-60)}}}]).factory("DibujarCabeceraFacturaNVmedioOficio",["VerificarDescuentos",function(_){return function(e,t,r,o,a,i,n,c,s){if(o.configuracion.usar_pf){if(t){100<c.empresa.imagen.length&&e.image(c.empresa.imagen,60,40,{fit:[70,70]}),e.font("Helvetica-Bold",8);var u=(m=c.empresa.razon_social.length+30)<=35?105:36<m&&m<=72?95:85;e.text(c.empresa.razon_social.toUpperCase(),60,u,{width:170}),e.font("Helvetica",7),e.text(o.sucursal.nombre.toUpperCase(),60,113),u=(m=o.sucursal.direccion.length)<=45?129:45<m&&m<=90?139:145,e.text(o.sucursal.direccion.toUpperCase(),60,121,{width:200});var d=(null!=o.sucursal.telefono1?o.sucursal.telefono1:"")+(null!=o.sucursal.telefono2?"-"+o.sucursal.telefono2:"")+(null!=o.sucursal.telefono3?"-"+o.sucursal.telefono3:"");e.text("TELF.: "+d,60,u),e.text("COCHABAMBA - BOLIVIA",60,u+6)}e.font("Helvetica-Bold",16),e.text(o.configuracion.tituloFactura.nombre.toUpperCase(),250,100),e.font("Helvetica-Bold",8),(r||t)&&("FORM_C_MAR"==o.configuracion.formatoPapel.nombre_corto&&e.rect(380,40,190,50).stroke(),e.text("NIT : ",390,50),e.text("NOTA No : ",390,60)),e.text(c.empresa.nit,500,50),e.text(o.factura,500,60),e.text(o.autorizacion,500,70),(r||t)&&(e.rect(50,160,520,40).stroke(),e.text("FECHA : ",60,165),e.text("SEÑOR(ES) : ",60,175),e.text("NIT : ",360,165)),e.text(o.fecha_factura?o.fecha_factura:o.fechaTexto,120,165),e.text(o.cliente.razon_social,120,175),e.text(o.cliente.nit,400,165),(r||t)&&(e.rect(50,200,520,25).stroke(),(v=_(o.detallesVenta))?(e.text("CODIGO",55,210),e.text("CANT.",110,210),e.text("DETALLE",160,210),e.text("P. UNIT.",300,210),e.text("IMPORTE",335,210),o.detallesVenta[0].producto&&(e.text("UNID.",140,210),e.text("DESC.",385,210),e.text("REC.",420,210),e.text("ICE",455,210),e.text("EXC.",490,210))):(e.text("CODIGO",55,210),e.text("CANTIDAD",110,210),o.detallesVenta[0].producto&&e.text("UNIDAD",165,210),e.text("DETALLE",220,210),e.text("P.UNIT.",450,210)),e.text("TOTAL",520,210))}else{if(t){var l=80;100<c.empresa.imagen.length&&(e.image(c.empresa.imagen,60,40,{fit:[65,65]}),l=c.altura_imagen);var f=l<=1.95?l+85:105;e.font("Helvetica-Bold",8),u=(m=c.empresa.razon_social.length)<=35?f+11:f+20,e.text(c.empresa.razon_social.toUpperCase(),60,f,{width:170}),e.font("Helvetica",7),e.text(o.sucursal.nombre.toUpperCase(),60,u);var m,p=(m=o.sucursal.direccion.length)<=35?u+9:u+18;e.text(o.sucursal.direccion.toUpperCase(),60,u+9,{width:200}),d=(null!=o.sucursal.telefono1?o.sucursal.telefono1:"")+(null!=o.sucursal.telefono2?"-"+o.sucursal.telefono2:"")+(null!=o.sucursal.telefono3?"-"+o.sucursal.telefono3:""),e.text("TELF.: "+d,60,p+9),e.text("COCHABAMBA - BOLIVIA",60,p+18)}if(e.font("Helvetica-Bold",16),e.text(o.configuracion.tituloFactura.nombre.toUpperCase(),250,100),e.font("Helvetica-Bold",8),e.text(o.actividad.nombre,380,105,{width:200}),(r||t)&&("FORM_C_MAR"==o.configuracion.formatoPapel.nombre_corto&&("FORM_S_COL"==o.configuracion.formatoColor.nombre_corto?e.rect(380,40,190,50).stroke():e.rect(380,40,190,50).fillAndStroke(o.configuracion.color1,"black").fillColor("black").stroke()),e.text("NIT : ",390,50),e.text("FACTURA No : ",390,60),e.text("AUTORIZACIÓN No : ",390,70)),e.text(c.empresa.nit,500,50),e.text(o.factura,500,60),e.text(o.autorizacion,500,70),(r||t)&&("FORM_S_COL"==o.configuracion.formatoColor.nombre_corto?e.rect(50,160,520,40).stroke():e.rect(50,160,520,40).fillAndStroke(o.configuracion.color1,"black").fillColor("black").stroke(),e.text("FECHA : ",60,165),e.text("SEÑOR(ES) : ",60,175),e.text("NIT : ",360,165)),e.text(o.fecha_factura?o.fecha_factura:o.fechaTexto,120,165),e.text(o.cliente.razon_social,120,175),e.text(o.cliente.nit,400,165),r||t){"FORM_S_COL"==o.configuracion.formatoColor.nombre_corto?e.rect(50,200,520,25).stroke():e.rect(50,200,520,25).fillAndStroke(o.configuracion.color2,"black").fillColor("white").stroke();var v=_(o.detallesVenta);o.movimiento&&(o.movimientoServicio=o.movimiento.nombre_corto==s.EGRE_SERVICIO?o.movimiento:null),o.movimientoServicio?v?(e.text("DETALLE",55,210),e.text("IMPORTE",335,210),e.text("DESC.",385,210),e.text("REC.",420,210),e.text("ICE",455,210),e.text("EXC.",490,210)):(e.text("DETALLE",55,210),e.text("IMPORTE",450,210)):v?(e.text("CODIGO",55,210),e.text("CANT.",110,210),e.text("DETALLE",160,210),e.text("P. UNIT.",300,210),e.text("IMPORTE",335,210),o.detallesVenta[0].producto&&(e.text("UNID.",140,210),e.text("DESC.",385,210),e.text("REC.",420,210),e.text("ICE",455,210),e.text("EXC.",490,210))):(e.text("CODIGO",55,210),e.text("CANTIDAD",110,210),o.detallesVenta[0].producto&&e.text("UNIDAD",165,210),e.text("DETALLE",220,210),e.text("P.UNIT.",450,210)),e.text("TOTAL",520,210),e.fillColor("black")}}}}]).factory("ImprimirPedido",[function(){return function(e,t,r,o,a,i,n){for(var c=0;c<e.sucursal.copias_impresion_pedido;c++){0!=c&&r.addPage({size:[227,a],margins:{top:10,bottom:10,left:20,right:20}}),r.font("Helvetica-Bold",12),n&&r.text("PARA LLEVAR¡¡¡",{align:"center"}),r.font("Helvetica-Bold",14),r.text("Nro. Pedido : "+e.pedido,{align:"left"}),r.font("Helvetica",12),r.text(e.sucursal.frase_pedido+" : "+e.factura,{align:"left"}),r.moveDown(.4),r.text("Cliente : "+e.cliente.razon_social,{align:"left"}),r.moveDown(.4),r.text("NIT/CI : "+e.cliente.nit,{align:"left"}),r.moveDown(.4),r.text("Total Transacción : "+e.total.toFixed(2),{align:"left"}),r.moveDown(.2),r.text("---------------------------------------------",{align:"center"}),r.moveDown(.2),r.text("Cant.   Producto         Subtotal",{align:"left"}),r.moveDown(.2),r.text("---------------------------------------------",{align:"center"}),r.moveDown(.4);var s=r.y;r.fontSize(10);for(var u=0;u<e.detallesVenta.length;u++)r.text(e.detallesVenta[u].cantidad,20,s),e.detallesVenta[u].producto?(40<e.detallesVenta[u].producto.nombre.length&&r.fontSize(9),r.text(e.detallesVenta[u].producto.nombre,50,s,{width:90}),r.text(e.detallesVenta[u].total.toFixed(2),150,s)):(40<e.detallesVenta[u].servicio.nombre.length&&r.fontSize(9),r.text(e.detallesVenta[u].servicio.nombre,50,s,{width:90}),r.text(e.detallesVenta[u].total?e.detallesVenta[u].total.toFixed(2):e.detallesVenta[u].importe.toFixed(2),150,s)),r.fontSize(10),s+=20;r.moveDown(4),r.x=0;var d=new Date,l=d.getMinutes();l<10&&(l="0"+l),r.text(" Fecha : "+d.getDate()+"/"+(d.getMonth()+1)+"/"+d.getFullYear()+"  "+d.getHours()+":"+l+"  ",{align:"center"})}if(e.sucursal.imprimir_pedido_corto){for(r.addPage({size:[227,a],margins:{top:10,bottom:10,left:20,right:20}}),r.font("Helvetica-Bold",12),n&&r.text("PARA LLEVAR¡¡¡",{align:"center"}),r.font("Helvetica-Bold",14),r.text(i.empresa.razon_social,{align:"left"}),r.x,s=r.y,r.text("Nro. Pedido : ",20,s,{align:"left"}),r.font("Helvetica-Bold",22),r.text(e.pedido,120,s-5),r.font("Helvetica",12),r.x=20,s=r.y,r.text("Cant.   Producto         Subtotal",{align:"left"}),s=r.y,r.fontSize(10),u=0;u<e.detallesVenta.length;u++)r.text(e.detallesVenta[u].cantidad,20,s),e.detallesVenta[u].producto?(40<e.detallesVenta[u].producto.nombre.length&&r.fontSize(9),r.text(e.detallesVenta[u].producto.nombre,50,s,{width:90}),r.text(e.detallesVenta[u].total.toFixed(2),150,s)):(40<e.detallesVenta[u].servicio.nombre.length&&r.fontSize(9),r.text(e.detallesVenta[u].servicio.nombre,50,s,{width:90}),r.text(e.detallesVenta[u].total?e.detallesVenta[u].total.toFixed(2):e.detallesVenta[u].importe.toFixed(2),150,s)),r.fontSize(10),s+=20;r.moveDown(4),r.x=0,r.text("Gracias por su preferencia",{align:"center"})}}}]).factory("ImprimirFacturaRollo",["blockUI",function(_){return function(e,t,r,o,a){if(e.configuracion.usar_pf){var i=document.getElementById("qr-code");r.moveDown(2),r.font("Helvetica-Bold",8),r.text(a.empresa.razon_social.toUpperCase(),{align:"center"}),r.moveDown(.4),r.font("Helvetica",7),r.text(e.sucursal.nombre.toUpperCase(),{align:"center"}),r.moveDown(.4),r.text(e.sucursal.direccion.toUpperCase(),{align:"center"}),r.moveDown(.4);var n=(null!=e.sucursal.telefono1?e.sucursal.telefono1:"")+(null!=e.sucursal.telefono2?"-"+e.sucursal.telefono2:"")+(null!=e.sucursal.telefono3?"-"+e.sucursal.textlefono3:"");r.text("TELF.: "+n,{align:"center"}),r.moveDown(.4),r.text("COCHABAMBA - BOLIVIA",{align:"center"}),r.moveDown(.5),r.font("Helvetica-Bold",8),r.text("PROFORMA NV",{align:"center"}),r.font("Helvetica",7),r.moveDown(.4),r.text("------------------------------------",{align:"center"}),r.moveDown(.4),r.text("Nro.  "+e.factura,{align:"center"}),r.moveDown(.4),r.text("------------------------------------",{align:"center"}),r.moveDown(.4),r.text(e.tipoPago.nombre_corto,{align:"center"}),r.moveDown(.4),r.text("------------------------------------",{align:"center"}),r.moveDown(.6),r.text("FECHA : "+e.fechaTexto,{align:"left"}),r.moveDown(.4),r.text("SEÑOR(ES) : "+e.cliente.razon_social,{align:"left"}),r.moveDown(.4),r.text("NIT/CI : "+e.cliente.nit,{align:"left"}),r.moveDown(.4),r.text("---------------------------------------------------------------------------------",{align:"center"}),r.moveDown(.2),r.text("CANT   CONCEPTO                                   P. UNIT.    SUBTOTAL",{align:"left"}),r.moveDown(.2),r.text("---------------------------------------------------------------------------------",{align:"center"}),r.moveDown(.4);for(var c=r.y,s=0,u=0,d=0,l=0,f=0;f<e.detallesVenta.length;f++)r.text(e.detallesVenta[f].cantidad,15,c),e.detallesVenta[f].producto?(40<e.detallesVenta[f].producto.nombre.length&&r.fontSize(6),r.text(e.detallesVenta[f].producto.nombre,35,c,{width:100})):(40<e.detallesVenta[f].servicio.nombre.length&&r.fontSize(6),r.text(e.detallesVenta[f].servicio.nombre,35,c,{width:100})),r.fontSize(7),r.text(e.detallesVenta[f].precio_unitario.toFixed(2),145,c),r.text(e.detallesVenta[f].importe.toFixed(2),180,c),s+=e.detallesVenta[f].tipo_descuento?e.detallesVenta[f].importe*(e.detallesVenta[f].descuento/100):e.detallesVenta[f].descuento,u+=e.detallesVenta[f].tipo_recargo?e.detallesVenta[f].importe*(e.detallesVenta[f].recargo/100):e.detallesVenta[f].recargo,d+=e.detallesVenta[f].ice,l+=e.detallesVenta[f].excento,c+=20;r.text("--------------",10,c,{align:"right"}),r.moveDown(.4),r.text("IMPORTE TOTAL Bs.              "+e.importe.toFixed(2),{align:"right"}),r.moveDown(.3),0<s&&r.text("DESCUENTO Bs.              "+s.toFixed(2),{align:"right"}),r.moveDown(.3),0<u&&r.text("RECARGO Bs.              "+u.toFixed(2),{align:"right"}),r.moveDown(.3),0<d&&r.text("ICE Bs.              "+d.toFixed(2),{align:"right"}),r.moveDown(.3),0<l&&r.text("EXCENTO Bs.              "+l.toFixed(2),{align:"right"}),r.moveDown(.3),r.text("TOTAL Bs.              "+e.total.toFixed(2),{align:"right"}),r.moveDown(.4),r.moveDown(.4),r.text("SON: "+e.numero_literal,{align:"left"}),r.moveDown(.6),(p=(m=new Date).getMinutes())<10&&(p="0"+p),r.text("usuario : "+a.nombre_usuario,0,c+205,{align:"right"}),r.moveDown(.4),r.text("fecha : "+m.getDate()+"/"+(m.getMonth()+1)+"/"+m.getFullYear()+"  "+m.getHours()+":"+p,10,c+215,{align:"right"})}else{for(i=document.getElementById("qr-code"),r.moveDown(1),100<a.empresa.imagen.length&&r.image(a.empresa.imagen,75,r.y,{align:"center",fit:[75,75]}),r.y=40,r.moveDown(2),r.font("Helvetica-Bold",8),r.text(a.empresa.razon_social.toUpperCase(),35,r.y,{align:"center",width:150}),r.moveDown(.4),r.font("Helvetica",7),r.text(e.sucursal.nombre.toUpperCase(),{align:"center"}),r.moveDown(.4),r.text(e.sucursal.direccion.toUpperCase(),{align:"center"}),r.moveDown(.4),n=(null!=e.sucursal.telefono1?e.sucursal.telefono1:"")+(null!=e.sucursal.telefono2?"-"+e.sucursal.telefono2:"")+(null!=e.sucursal.telefono3?"-"+e.sucursal.telefono3:""),r.text("TELF.: "+n,{align:"center"}),r.moveDown(.4),r.text("COCHABAMBA - BOLIVIA",{align:"center"}),r.moveDown(.5),r.font("Helvetica-Bold",8),r.text(e.configuracion.tituloFactura.nombre.toUpperCase(),{align:"center"}),r.font("Helvetica",7),r.moveDown(.4),r.text("------------------------------------",{align:"center"}),r.moveDown(.4),r.text("NIT: "+a.empresa.nit,{align:"center"}),r.moveDown(.4),r.text("FACTURA No: "+e.factura,{align:"center"}),r.moveDown(.4),r.text("AUTORIZACIÓN No: "+e.autorizacion,{align:"center"}),r.moveDown(.4),r.text("------------------------------------",{align:"center"}),r.moveDown(.4),r.text(e.actividad.nombre,{align:"center",width:150}),r.x=20,r.moveDown(.6),r.text("FECHA : "+e.fechaTexto,{align:"left"}),r.moveDown(.4),r.text("SEÑOR(ES) : "+e.cliente.razon_social,{align:"left"}),r.moveDown(.4),r.text("NIT/CI : "+e.cliente.nit,{align:"left"}),r.moveDown(.4),r.text("--------------------------------------------------------------------------------",{align:"center"}),r.moveDown(.2),r.text("CANT   CONCEPTO                    P. UNIT.    SUBTOTAL",{align:"left"}),r.moveDown(.2),r.text("--------------------------------------------------------------------------------",{align:"center"}),r.moveDown(.4),c=r.y,f=l=d=u=s=0;f<e.detallesVenta.length;f++)r.text(e.detallesVenta[f].cantidad,20,c),e.detallesVenta[f].producto?(40<e.detallesVenta[f].producto.nombre.length&&r.fontSize(6),r.text(e.detallesVenta[f].producto.nombre,40,c,{width:100}),r.fontSize(7),r.text(e.detallesVenta[f].precio_unitario.toFixed(2),150,c),r.text(e.detallesVenta[f].importe.toFixed(2),175,c),s+=e.detallesVenta[f].tipo_descuento?e.detallesVenta[f].importe*(e.detallesVenta[f].descuento/100):e.detallesVenta[f].descuento,u+=e.detallesVenta[f].tipo_recargo?e.detallesVenta[f].importe*(e.detallesVenta[f].recargo/100):e.detallesVenta[f].recargo,d+=e.detallesVenta[f].ice,l+=e.detallesVenta[f].excento):(40<e.detallesVenta[f].servicio.nombre.length&&r.fontSize(6),r.text(e.detallesVenta[f].servicio.nombre,40,c,{width:100}),r.fontSize(7),r.text(e.detallesVenta[f].precio_unitario.toFixed(2),150,c),r.text(e.detallesVenta[f].importe.toFixed(2),175,c)),c+=20;r.x=20,r.text("--------------",{align:"right"}),r.moveDown(.4),r.text("IMPORTE TOTAL Bs.         "+e.importe.toFixed(2),90,r.y),r.moveDown(.3),0<s&&r.text("DESCUENTO Bs.              "+s.toFixed(2),97,r.y),r.moveDown(.3),0<u&&r.text("RECARGO Bs.              "+u.toFixed(2),105,r.y),r.moveDown(.3),0<d&&r.text("ICE Bs.              "+d.toFixed(2),128,r.y),r.moveDown(.3),0<l&&r.text("EXCENTO Bs.              "+l.toFixed(2),107,r.y),r.moveDown(.3),r.text("TOTAL Bs.         "+e.total.toFixed(2),124,r.y),r.x=20,r.moveDown(.4),r.moveDown(.4),r.text("SON: "+e.numero_literal,{align:"left"}),r.moveDown(.6),r.text("CÓDIGO DE CONTROL: "+e.codigo_control,{align:"center"}),r.moveDown(.4),e.fecha_limite_emision=new Date(e.fecha_limite_emision),r.text("FECHA LÍMITE DE EMISIÓN: "+e.fecha_limite_emision.getDate()+"/"+(e.fecha_limite_emision.getMonth()+1)+"/"+e.fecha_limite_emision.getFullYear(),{align:"center"}),r.moveDown(.4),qr.canvas({canvas:i,value:a.empresa.nit+"|"+e.factura+"|"+e.autorizacion+"|"+e.fechaTexto+"|"+e.total.toFixed(2)+"|"+e.total.toFixed(2)+"|"+e.codigo_control+"|"+e.cliente.nit+"|0|0|0|0"},function(){});var m,p,v=i.toDataURL("image/png");r.image(v,70,r.y,{width:85,height:85}),r.moveDown(.4),r.text(e.pieFactura?e.pieFactura.nombre:"",{align:"center",width:150}),r.moveDown(.6),r.text('"ESTA FACTURA CONTRIBUYE AL DESARROLLO DEL PAIS. EL USO ILICITO DE ESTA SERA SANCIONADO DE ACUERDO A LEY"',{align:"center",width:150}),r.moveDown(.4),(p=(m=new Date).getMinutes())<10&&(p="0"+p),r.text("  Usuario : "+a.nombre_usuario+" -- Fecha : "+m.getDate()+"/"+(m.getMonth()+1)+"/"+m.getFullYear()+"  "+m.getHours()+":"+p+"  ",{align:"center"})}_.stop()}}]).factory("ImprimirProforma",["Diccionario","ImprimirProformaCartaOficio","ImprimirPedido","ImprimirProformaRollo","$timeout",function(s,u,d,l,f){return function(e,t,r,o){var a,i,n;if(e.configuracion.tamanoPapelNotaVenta.nombre_corto==s.FACT_PAPEL_OFICIO)a=[612,936],e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_VACIA?u(e,a,!0,!1,!1,r):e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_COMPLETA?u(e,a,!1,!0,!1,r):e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_SEMICOMPLETA&&u(e,a,!1,!1,!0,r);else if(e.configuracion.tamanoPapelNotaVenta.nombre_corto==s.FACT_PAPEL_CARTA)a=[612,792],e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_VACIA?u(e,a,!0,!1,!1,r):e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_COMPLETA?u(e,a,!1,!0,!1,r):e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_SEMICOMPLETA&&u(e,a,!1,!1,!0,r);else if(e.configuracion.tamanoPapelNotaVenta.nombre_corto==s.FACT_PAPEL_MEDIOOFICIO)a=[612,468],e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_VACIA?u(e,a,!0,!1,!1,r):e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_COMPLETA?u(e,a,!1,!0,!1,r):e.configuracion.impresionFactura.nombre_corto==s.FACT_IMPRESION_SEMICOMPLETA&&u(e,a,!1,!1,!0,r);else if(e.configuracion.tamanoPapelNotaVenta.nombre_corto==s.FACT_PAPEL_ROLLO){if(a=[227,e.detallesVenta.length<=2?400:400+20*(e.detallesVenta.length-2)],t&&!e.configuracion.imprimir_al_guardar){if(r.empresa.usar_pedidos){var c=230+20*e.detallesVenta.length;i=new PDFDocument({compress:!1,size:[227,c],margins:{top:10,bottom:10,left:20,right:20}}),n=i.pipe(blobStream()),d(e,t,i,n,c,r,o)}}else i=new PDFDocument({compress:!1,size:a,margins:{top:0,bottom:0,left:20,right:20}}),n=i.pipe(blobStream()),l(e,a,i,n,r),r.empresa.usar_pedidos&&(c=230+20*e.detallesVenta.length,i.addPage({size:[227,c],margins:{top:10,bottom:10,left:20,right:20}}),d(e,t,i,n,c,r,o));i&&n&&(i.end(),n.on("finish",function(){var e=n.toBlobURL("application/pdf"),t=window.open(e,"_blank","location=no");f(function(){t.print()},500)}))}}}]).factory("ImprimirProformaCartaOficio",["Diccionario","$timeout","blockUI","VerificarDescuentos","DibujarCabeceraProformaNVmedioOficio",function(g,h,x,P,C){return function(e,t,r,o,a,i){var n=new PDFDocument({compress:!1,size:t,margin:10}),c=n.pipe(blobStream()),s=P(e.detallesVenta);n.font("Helvetica",8);var u=0;e.configuracion.tamanoPapelNotaVenta.nombre_corto==g.FACT_PAPEL_OFICIO?u=19:e.configuracion.tamanoPapelNotaVenta.nombre_corto==g.FACT_PAPEL_CARTA?u=16:e.configuracion.tamanoPapelNotaVenta.nombre_corto==g.FACT_PAPEL_MEDIOOFICIO&&(u=3);var d=240,l=0,f=1,m=Math.ceil(e.detallesVenta.length/u);C(n,r,o,e,t,f,m,i),n.font("Helvetica",7);for(var p=0;p<e.detallesVenta.length&&l<=u;p++)e.detallesVenta[p].fecha_vencimiento=new Date(e.detallesVenta[p].fecha_vencimiento),s?(n.text(e.detallesVenta[p].producto.codigo,55,d,{width:50}),n.text(e.detallesVenta[p].cantidad,105,d),n.text(e.detallesVenta[p].producto.unidad_medida,120,d,{width:40}),n.text(e.detallesVenta[p].producto.nombre,160,d-9,{width:80}),i.empresa.usar_vencimientos&&e.con_vencimiento&&(n.text(e.detallesVenta[p].fecha_vencimiento.getDate()+"/"+(e.detallesVenta[p].fecha_vencimiento.getMonth()+1)+"/"+e.detallesVenta[p].fecha_vencimiento.getFullYear(),245,d),n.text(e.detallesVenta[p].lote,285,d)),n.text(e.detallesVenta[p].precio_unitario.toFixed(2),310,d),n.text(e.detallesVenta[p].importe.toFixed(2),345,d),n.text(e.detallesVenta[p].descuento?e.detallesVenta[p].descuento.toFixed(2):0,395,d),n.text(e.detallesVenta[p].recargo.toFixed(2),430,d),n.text(e.detallesVenta[p].ice.toFixed(2),465,d),n.text(e.detallesVenta[p].excento.toFixed(2),500,d),n.text(e.detallesVenta[p].total.toFixed(2),530,d)):(n.text(e.detallesVenta[p].producto.codigo,55,d),n.text(e.detallesVenta[p].cantidad,130,d),n.text(e.detallesVenta[p].producto.unidad_medida,160,d),n.text(e.detallesVenta[p].producto.nombre,200,d-9,{width:150}),i.empresa.usar_vencimientos&&e.con_vencimiento&&(n.text(e.detallesVenta[p].fecha_vencimiento.getDate()+"/"+(e.detallesVenta[p].fecha_vencimiento.getMonth()+1)+"/"+e.detallesVenta[p].fecha_vencimiento.getFullYear(),360,d),n.text(e.detallesVenta[p].lote,415,d)),n.text(e.detallesVenta[p].precio_unitario.toFixed(2),460,d),n.text(e.detallesVenta[p].total.toFixed(2),520,d)),(o||r)&&n.rect(50,d-15,520,30).stroke(),d+=30,++l==u&&(n.addPage({size:t,margin:10}),d=240,l=0,C(n,r,o,e,t,f+=1,m,i));(o||r)&&(n.font("Helvetica-Bold",7),n.text("TOTAL",455,d-5)),n.font("Helvetica",7),n.text(e.total.toFixed(2),520,d-5),n.text("SON : "+e.numero_literal,55,d-5),(o||r)&&n.rect(50,d-15,520,20).stroke(),n.moveDown(2);var v=new Date,_=v.getMinutes();_<10&&(_="0"+_),n.text("  Usuario : "+i.nombre_usuario+" -- Fecha : "+v.getDate()+"/"+(v.getMonth()+1)+"/"+v.getFullYear()+"  "+v.getHours()+":"+_+"  ",{align:"center"}),n.end(),c.on("finish",function(){var e=c.toBlobURL("application/pdf"),t=window.open(e,"_blank","location=no");h(function(){t.print()},500)}),x.stop()}}]).factory("DibujarCabeceraProformaNVmedioOficio",["VerificarDescuentos",function(u){return function(e,t,r,o,a,i,n,c){if(t){100<c.empresa.imagen.length&&e.image(c.empresa.imagen,60,50,{fit:[75,75]}),e.font("Helvetica-Bold",8),e.text(c.empresa.razon_social.toUpperCase(),150,60),e.font("Helvetica",7),e.text(o.sucursal.nombre.toUpperCase(),150,70),e.text(o.sucursal.direccion.toUpperCase(),150,80);var s=(null!=o.sucursal.telefono1?o.sucursal.telefono1:"")+(null!=o.sucursal.telefono2?"-"+o.sucursal.telefono2:"")+(null!=o.sucursal.telefono3?"-"+o.sucursal.telefono3:"");e.text("TELF.: "+s,150,90),e.text("COCHABAMBA - BOLIVIA",150,100)}e.font("Helvetica-Bold",16),e.text("PROFORMA Nº "+o.factura,200,125),e.font("Helvetica-Bold",8),(r||t)&&(e.rect(50,150,520,50).stroke(),e.text("FECHA : ",60,165),e.text("SEÑOR(ES) : ",60,175),e.text("NIT : ",360,165)),e.font("Helvetica",8),e.text(o.fecha_factura?o.fecha_factura:o.fechaTexto,120,165),e.text(o.cliente.razon_social,120,175),e.text(o.cliente.nit,400,165),e.font("Helvetica-Bold",7),(r||t)&&(e.rect(50,200,520,25).stroke(),u(o.detallesVenta)?(e.text("CODIGO",55,210),e.text("CANT.",100,210),e.text("UNID.",130,210),e.text("DETALLE",160,210),c.empresa.usar_vencimientos&&o.con_vencimiento&&(e.text("VENC.",245,210),e.text("LOTE.",280,210)),e.text("P. UNIT.",310,210),e.text("IMPORTE",345,210),e.text("DESC.",395,210),e.text("REC.",430,210),e.text("ICE",465,210),e.text("EXC.",500,210),e.text("TOTAL",530,210)):(e.text("CODIGO",55,210),e.text("CANTIDAD",120,210),e.text("UNIDAD",165,210),e.text("DETALLE",200,210),c.empresa.usar_vencimientos&&o.con_vencimiento&&(e.text("VENC.",360,210),e.text("LOTE.",415,210)),e.text("P.UNIT.",460,210),e.text("TOTAL",520,210)))}}]).factory("ImprimirProformaRollo",["blockUI",function(p){return function(e,t,r,o,a){r.moveDown(2),r.font("Helvetica-Bold",8),r.text(a.empresa.razon_social.toUpperCase(),{align:"center"}),r.moveDown(.4),r.font("Helvetica",7),r.text(e.sucursal.nombre.toUpperCase(),{align:"center"}),r.moveDown(.4),r.text(e.sucursal.direccion.toUpperCase(),{align:"center"}),r.moveDown(.4);var i=(null!=e.sucursal.telefono1?e.sucursal.telefono1:"")+(null!=e.sucursal.telefono2?"-"+e.sucursal.telefono2:"")+(null!=e.sucursal.telefono3?"-"+e.sucursal.telefono3:"");r.text("TELF.: "+i,{align:"center"}),r.moveDown(.4),r.text("COCHABAMBA - BOLIVIA",{align:"center"}),r.moveDown(.5),r.font("Helvetica-Bold",8),r.text("PROFORMA Nº "+e.factura,{align:"center"}),r.font("Helvetica",7),r.moveDown(.4),r.text("------------------------------------",{align:"center"}),r.moveDown(.4),r.moveDown(.4),r.moveDown(.4),r.moveDown(.4),r.text("------------------------------------",{align:"center"}),r.moveDown(.4),r.moveDown(.6),r.text("FECHA : "+e.fechaTexto,{align:"left"}),r.moveDown(.4),r.text("SEÑOR(ES) : "+e.cliente.razon_social,{align:"left"}),r.moveDown(.4),r.text("NIT/CI : "+e.cliente.nit,{align:"left"}),r.moveDown(.4),r.text("---------------------------------------------------------------------------------",{align:"center"}),r.moveDown(.2),r.text("CANT   CONCEPTO                                   P. UNIT.    SUBTOTAL",{align:"left"}),r.moveDown(.2),r.text("---------------------------------------------------------------------------------",{align:"center"}),r.moveDown(.4);for(var n=r.y,c=0,s=0,u=0,d=0,l=0;l<e.detallesVenta.length;l++)r.text(e.detallesVenta[l].cantidad,15,n),40<e.detallesVenta[l].producto.nombre.length&&r.fontSize(6),r.text(e.detallesVenta[l].producto.nombre,35,n,{width:100}),r.fontSize(7),r.text(e.detallesVenta[l].precio_unitario.toFixed(2),145,n),r.text(e.detallesVenta[l].importe.toFixed(2),180,n),c+=e.detallesVenta[l].tipo_descuento?e.detallesVenta[l].importe*(e.detallesVenta[l].descuento/100):e.detallesVenta[l].descuento,s+=e.detallesVenta[l].tipo_recargo?e.detallesVenta[l].importe*(e.detallesVenta[l].recargo/100):e.detallesVenta[l].recargo,u+=e.detallesVenta[l].ice,d+=e.detallesVenta[l].excento,n+=20;r.text("--------------",10,n,{align:"right"}),r.moveDown(.4),r.text("IMPORTE TOTAL Bs.              "+e.importe.toFixed(2),{align:"right"}),r.moveDown(.3),0<c&&r.text("DESCUENTO Bs.              "+c.toFixed(2),{align:"right"}),r.moveDown(.3),0<s&&r.text("RECARGO Bs.              "+s.toFixed(2),{align:"right"}),r.moveDown(.3),0<u&&r.text("ICE Bs.              "+u.toFixed(2),{align:"right"}),r.moveDown(.3),0<d&&r.text("EXCENTO Bs.              "+d.toFixed(2),{align:"right"}),r.moveDown(.3),r.text("TOTAL Bs.              "+e.total.toFixed(2),{align:"right"}),r.moveDown(.4),r.moveDown(.4),r.text("SON: "+e.numero_literal,{align:"left"}),r.moveDown(.6),r.moveDown(.4),r.moveDown(.4),r.moveDown(.4),r.moveDown(.4);var f=new Date,m=f.getMinutes();m<10&&(m="0"+m),r.text("  Usuario : "+a.nombre_usuario+" -- Fecha : "+f.getDate()+"/"+(f.getMonth()+1)+"/"+f.getFullYear()+"  "+f.getHours()+":"+m+"  ",{align:"center"}),p.stop()}}]).factory("ImprimirNotaBaja",["blockUI","Diccionario","ImprimirNotaBajaCartaOficio","ImprimirNotaBajaRollo",function(i,n,c,s){return function(e,t){var r;if(i.start(),e.configuracion.tamanoPapelNotaBaja.nombre_corto==n.FACT_PAPEL_OFICIO)papel=[612,936],r=23,c(e,papel,r,t);else if(e.configuracion.tamanoPapelNotaBaja.nombre_corto==n.FACT_PAPEL_CARTA)papel=[612,792],r=20,c(e,papel,r,t);else if(e.configuracion.tamanoPapelNotaBaja.nombre_corto==n.FACT_PAPEL_MEDIOOFICIO)papel=[612,468],r=10,c(e,papel,r,t);else if(e.configuracion.tamanoPapelNotaBaja.nombre_corto==n.FACT_PAPEL_ROLLO){var o,a=e.detallesVenta.length;o=a<=2?440:440+30*(a-2),papel=[227,o],s(e,papel,t)}}}]).factory("ImprimirNotaBajaCartaOficio",["blockUI","VerificarDescuentos","DibujarCabeceraPDFBaja",function(g,h,x){return function(e,t,r,o){var a=new PDFDocument({compress:!1,size:t,margin:0}),i=a.pipe(blobStream()),n=h(e.detallesVenta);a.font("Helvetica",7);var c=0,s=140,u=0,d=1,l=Math.ceil(e.detallesVenta.length/r);x(a,1,l,e,n,o);for(var f=0;f<e.detallesVenta.length&&u<=r;f++){if(n)a.text(e.detallesVenta[f].producto.codigo,55,s),a.text(e.detallesVenta[f].cantidad,110),a.text(e.detallesVenta[f].producto.unidad_medida,135,s),a.text(e.detallesVenta[f].producto.nombre,170,s-6,{width:120}),a.text(e.detallesVenta[f].producto.precio_unitario.toFixed(2),300,s),a.text(e.detallesVenta[f].importe.toFixed(2),335,s),a.text(e.detallesVenta[f].descuento.toFixed(2),385,s),a.text(e.detallesVenta[f].recargo.toFixed(2),420,s),a.text(e.detallesVenta[f].ice.toFixed(2),455,s),a.text(e.detallesVenta[f].excento.toFixed(2),490,s),a.text(e.detallesVenta[f].total.toFixed(2),520,s);else{a.text(e.detallesVenta[f].producto.codigo,55,s,{width:60}),a.text(e.detallesVenta[f].cantidad,130,s,{width:70}),a.text(e.detallesVenta[f].producto.unidad_medida,153,s);var m=e.detallesVenta[f].producto.nombre.length,p=m<=30?s:40<m&&m<=75?s:s-7;if(o.empresa.usar_vencimientos){a.font("Helvetica",6),a.text(e.detallesVenta[f].producto.nombre,205,p,{width:160});var v=new Date(e.detallesVenta[f].inventario.fecha_vencimiento);a.font("Helvetica",7),a.text(v.getDate()+"/"+(v.getMonth()+1)+"/"+v.getFullYear(),375,s),a.text(e.detallesVenta[f].inventario.lote,435,s)}else a.text(e.detallesVenta[f].producto.nombre,210,p,{width:250});a.text(e.detallesVenta[f].producto.precio_unitario.toFixed(2),470,s),a.text(e.detallesVenta[f].total.toFixed(2),520,s)}if(a.rect(50,s-15,520,30).stroke(),s+=30,++u==r&&(c+=u)!=e.detallesVenta.length){var _=new Date;e.fecha=new Date(e.fecha),a.font("Helvetica",5),a.text("EMISIÓN: "+e.fecha.getDate()+"/"+(e.fecha.getMonth()+1)+"/"+e.fecha.getFullYear(),200,s),a.text("IMPRESIÓN: "+_.getDate()+"/"+(_.getMonth()+1)+"/"+_.getFullYear(),260,s),a.text("USUARIO: "+o.persona.nombre_completo,55,s),a.text(d+" de "+l,540,s-10),a.addPage({margin:0,bufferPages:!0}),s=140,u=0,d+=1,x(a,1,l,e,n,o)}}a.font("Helvetica-Bold",7),a.text("TOTAL",465,s-5),a.font("Helvetica",7),a.text(e.total.toFixed(2),520,s-5),a.rect(50,s-15,520,20).stroke();_=new Date;e.fecha=new Date(e.fecha),a.font("Helvetica",5),a.text("EMISIÓN: "+e.fecha.getDate()+"/"+(e.fecha.getMonth()+1)+"/"+e.fecha.getFullYear(),200,s+10),a.text("IMPRESIÓN: "+_.getDate()+"/"+(_.getMonth()+1)+"/"+_.getFullYear(),260,s+10),a.text("USUARIO: "+o.persona.nombre_completo,55,s+10),l<d||a.text(d+" de "+l,540,s+10),a.end(),i.on("finish",function(){var e=i.toBlobURL("application/pdf");window.open(e,"_blank","location=no")}),g.stop()}}]).factory("DibujarCabeceraPDFBaja",[function(){return function(e,t,r,o,a,i){e.font("Helvetica-Bold",7),e.text(i.empresa.razon_social,55,55),e.text("SUCURSAL: ",55,65),e.text("DIRECCIÓN: ",55,75);var n=(null!=o.sucursal.telefono1?o.sucursal.telefono1:"")+(null!=o.sucursal.telefono2?"-"+o.sucursal.telefono2:"")+(null!=o.sucursal.telefono3?"-"+o.sucursal.telefono3:"");e.text("TELF.: ",55,85),e.font("Helvetica",7),e.text(o.sucursal.nombre,105,65),e.text(o.sucursal.direccion,105,75),e.text(n,85,85),e.font("Helvetica-Bold",15),e.text("NOTA DE BAJA",0,65,{align:"center"}),e.font("Helvetica-Bold",7),o.fecha=new Date(o.fecha),e.font("Helvetica",11),e.text("Fecha: "+o.fecha.getDate()+"/"+(o.fecha.getMonth()+1)+"/"+o.fecha.getFullYear(),0,85,{align:"center"}),e.font("Helvetica-Bold",7),e.text("NRO. : "+o.factura,450,75),e.rect(50,40,520,60).stroke(),e.rect(50,100,520,25).stroke(),a?(e.text("CODIGO",55,110),e.text("CANT.",105,110),e.text("UNID.",135,110),e.text("DETALLE",170,110),e.text("P. UNIT.",300,110),e.text("IMPORTE",335,110),e.text("DESC.",385,110),e.text("REC.",420,110),e.text("ICE",455,110),e.text("EXC.",490,110)):(e.text("CODIGO",55,110),e.text("CANTIDAD",115,110),e.text("UNIDAD",160,110),i.empresa.usar_vencimientos?(e.text("DETALLE",210,110),e.text("FECHA VENC.",370,110),e.text("LOTE",430,110)):e.text("DETALLE",210,110),e.text("P.UNIT.",470,110)),e.text("TOTAL",520,110)}}]).factory("ImprimirNotaBajaRollo",["blockUI","VerificarDescuentos",function(d,l){return function(e,t,r){var o=new PDFDocument({compress:!1,size:t,margins:{top:10,bottom:10,left:10,right:20}}),a=o.pipe(blobStream());l(e.detallesVenta);o.moveDown(2),o.font("Helvetica-Bold",8),o.text(r.empresa.razon_social.toUpperCase(),{align:"center"}),o.moveDown(.4),o.font("Helvetica",7),o.text(e.sucursal.nombre.toUpperCase(),{align:"center"}),o.moveDown(.4),o.text(e.sucursal.direccion.toUpperCase(),{align:"center"});var i=(null!=e.sucursal.telefono1?e.sucursal.telefono1:"")+(null!=e.sucursal.telefono2?"-"+e.sucursal.telefono2:"")+(null!=e.sucursal.telefono3?"-"+e.sucursal.telefono3:"");o.moveDown(.4),o.text("TELF.: "+i,{align:"center"}),o.moveDown(.4),o.text("COCHABAMBA - BOLIVIA",{align:"center"}),o.moveDown(.5),o.font("Helvetica-Bold",8),o.text("NOTA DE BAJA",{align:"center"}),e.fecha=new Date(e.fecha),o.font("Helvetica",8),o.text("Fecha: "+e.fecha.getDate()+"/"+(e.fecha.getMonth()+1)+"/"+e.fecha.getFullYear(),{align:"center"}),o.font("Helvetica-Bold",8),o.moveDown(.4),o.text("------------------------------------",{align:"center"}),o.moveDown(.4),o.font("Helvetica-Bold",7);var n=165;o.moveDown(.4),o.text("COD.",10,145),o.text("CANT.",35,145),o.text("DETALL.",60,145),o.text("F. VENC.",128,145),o.text("LOTE",162,145),o.text("TOTAL",183,145),o.moveDown(.4);for(var c=0;c<e.detallesVenta.length;c++){o.font("Helvetica",7),o.moveDown(.4),o.text(e.detallesVenta[c].producto.codigo,10,n,{width:25}),o.text(e.detallesVenta[c].cantidad,38,n),o.text(e.detallesVenta[c].producto.nombre,57,n,{width:70});var s=new Date(e.detallesVenta[c].inventario.fecha_vencimiento);console.log((new Date).getFullYear().toString().substr(-2)),o.text(s.getDate()+"/"+(s.getMonth()+1)+"/"+s.getFullYear().toString().substr(-2),128,n),o.text(e.detallesVenta[c].inventario.lote,164,n),o.text(e.detallesVenta[c].total.toFixed(2),187,n,{width:100}),n+=30}var u=new Date;e.fecha=new Date(e.fecha),o.moveDown(.4),o.font("Helvetica",6),o.text("EMISIÓN: "+e.fecha.getDate()+"/"+(e.fecha.getMonth()+1)+"/"+e.fecha.getFullYear(),150,n+190),o.text("IMPRESIÓN: "+u.getDate()+"/"+(u.getMonth()+1)+"/"+u.getFullYear(),15,n+200),o.text("USUARIO: "+r.persona.nombre_completo,15,n+190),o.end(),a.on("finish",function(){var e=a.toBlobURL("application/pdf");window.open(e,"_blank","location=no")}),d.stop()}}]).factory("ImprimirNotaTraspaso",["Diccionario","blockUI","ImprimirNotaTraspasoCartaOficio","ImprimirNotaTraspasoRollo",function(a,i,n,c){return function(e,t){if(i.start(),e.configuracion.tamanoPapelNotaTraspaso.nombre_corto==a.FACT_PAPEL_OFICIO)papel=[612,936],itemsPorPagina=19,n(e,papel,itemsPorPagina,t);else if(e.configuracion.tamanoPapelNotaTraspaso.nombre_corto==a.FACT_PAPEL_CARTA)papel=[612,792],itemsPorPagina=16,n(e,papel,itemsPorPagina,t);else if(e.configuracion.tamanoPapelNotaTraspaso.nombre_corto==a.FACT_PAPEL_MEDIOOFICIO)papel=[612,468],itemsPorPagina=9,n(e,papel,itemsPorPagina,t);else if(e.configuracion.tamanoPapelNotaTraspaso.nombre_corto==a.FACT_PAPEL_ROLLO){var r,o=e.detallesVenta.length;r=o<=2?440:440+30*(o-2),papel=[227,r],c(e,papel,t)}}}]).factory("ImprimirNotaTraspasoCartaOficio",["blockUI","VerificarDescuentos","DibujarCabeceraPDFTraspaso",function(g,h,x){return function(e,t,r,o){var a=new PDFDocument({compress:!1,size:t,margin:0}),i=a.pipe(blobStream()),n=h(e.detallesVenta);a.font("Helvetica",8);var c,s,u=150,d=0,l=1,f=Math.ceil(e.detallesVenta.length/r),m=0;x(a,1,f,e,n,o);for(var p=0;p<e.detallesVenta.length&&d<=r;p++){if(n)a.font("Helvetica",7),s=(c=e.detallesVenta[p].producto.codigo.length)<=15?u:15<c&&c<=15?u-4:u-11,a.text(e.detallesVenta[p].producto.codigo,55,s,{width:40}),a.text(e.detallesVenta[p].cantidad,110,u),a.text(e.detallesVenta[p].producto.unidad_medida,135,u),a.text(e.detallesVenta[p].producto.nombre,170,u-6,{width:130}),a.text(e.detallesVenta[p].producto.precio_unitario.toFixed(2),300,u),a.text(e.detallesVenta[p].importe.toFixed(2),335,u),a.text(e.detallesVenta[p].descuento.toFixed(2),385,u),a.text(e.detallesVenta[p].recargo.toFixed(2),420,u),a.text(e.detallesVenta[p].ice.toFixed(2),455,u),a.text(e.detallesVenta[p].excento.toFixed(2),490,u),a.text(e.detallesVenta[p].total.toFixed(2),520,u);else{if(a.font("Helvetica",7),s=(c=e.detallesVenta[p].producto.codigo.length)<=15?u:15<c&&c<=15?u-4:u-11,a.font("Helvetica",6),a.text(e.detallesVenta[p].producto.codigo,55,s,{width:70}),a.font("Helvetica",7),a.text(e.detallesVenta[p].cantidad,135,u),a.text(e.detallesVenta[p].producto.unidad_medida,160,u),s=(c=e.detallesVenta[p].producto.nombre.length)<=25?u:25<c&&c<=40?u-4:u-11,o.empresa.usar_vencimientos){if(a.font("Helvetica",6),a.text(e.detallesVenta[p].producto.nombre,210,s,{width:175}),a.font("Helvetica",7),e.detallesVenta[p].inventario){var v=new Date(e.detallesVenta[p].inventario.fecha_vencimiento);a.text(v.getDate()+"/"+(v.getMonth()+1)+"/"+v.getFullYear(),390,u),a.text(e.detallesVenta[p].inventario.lote,455,u)}}else a.text(e.detallesVenta[p].producto.nombre,210,s,{width:250});a.text(e.detallesVenta[p].producto.precio_unitario.toFixed(2),490,u),a.text(e.detallesVenta[p].total.toFixed(2),530,u)}if(a.rect(50,u-15,520,30).stroke(),u+=30,++d==r&&(m+=d)!=e.detallesVenta.length){var _=new Date;e.fecha=new Date(e.fecha),a.font("Helvetica",6),a.text("EMISIÓN: "+e.fecha.getDate()+"/"+(e.fecha.getMonth()+1)+"/"+e.fecha.getFullYear(),200,u-10),a.text("IMPRESIÓN: "+_.getDate()+"/"+(_.getMonth()+1)+"/"+_.getFullYear(),260,u-10),a.text("USUARIO: "+o.persona.nombre_completo,55,u-10),a.text(l+" de "+f,540,u-10),a.addPage({margin:0,bufferPages:!0}),u=140,d=0,x(a,l+=1,f,e,n,o),a.font("Helvetica",8)}}a.font("Helvetica-Bold",8),a.text("TOTAL",465,u-5),a.font("Helvetica",8),a.text(e.total.toFixed(2),520,u-5),a.rect(50,u-15,520,20).stroke(),a.text("------------------------------------------",180,u+80),a.text("------------------------------------------",340,u+80),a.text("ENTREGA CONFORME",190,u+90),a.text("RECIBO CONFORME",350,u+90);_=new Date;e.fecha=new Date(e.fecha),a.font("Helvetica",6),a.text("EMISIÓN: "+e.fecha.getDate()+"/"+(e.fecha.getMonth()+1)+"/"+e.fecha.getFullYear(),200,u+10),a.text("IMPRESIÓN: "+_.getDate()+"/"+(_.getMonth()+1)+"/"+_.getFullYear(),260,u+10),a.text("USUARIO: "+o.persona.nombre_completo,55,u+10),f<l||a.text(l+" de "+f,540,u+10),a.end(),i.on("finish",function(){var e=i.toBlobURL("application/pdf");window.open(e,"_blank","location=no")}),g.stop()}}]).factory("DibujarCabeceraPDFTraspaso",[function(){return function(e,t,r,o,a,i){e.rect(50,40,520,70).stroke(),e.rect(50,110,520,25).stroke(),e.font("Helvetica-Bold",7),e.text(i.empresa.razon_social,55,55),e.text("SUCURSAL: ",55,65),e.text("DIRECCIÓN: ",55,75);var n=(null!=o.sucursal.telefono1?o.sucursal.telefono1:"")+(null!=o.sucursal.telefono2?"-"+o.sucursal.telefono2:"")+(null!=o.sucursal.telefono3?"-"+o.sucursal.telefono3:"");e.text("TELF.: ",55,95),e.font("Helvetica",8),e.text(o.sucursal.nombre,105,65),e.text(o.sucursal.direccion,105,75,{width:120}),e.text(n,85,95),e.font("Helvetica-Bold",15),e.text("NOTA DE TRASPASO",0,60,{align:"center"}),e.font("Helvetica-Bold",7),e.text("DE SUCURSAL: "+o.sucursal.nombre+" A "+o.sucursalDestino.nombre,0,78,{align:"center"}),e.text("NRO. : "+o.factura,450,75),a?(e.text("CODIGO",55,120),e.text("CANT.",105,120),e.text("UNID.",135,120),e.text("DETALLE",170,120),e.text("P. UNIT.",300,120),e.text("IMPORTE",335,120),e.text("DESC.",385,120),e.text("REC.",420,120),e.text("ICE",455,120),e.text("EXC.",490,120),e.text("TOTAL",520,120)):(e.text("CODIGO",55,120),e.text("CANT.",128,120),e.text("UNID.",165,120),i.empresa.usar_vencimientos?(e.text("DETALLE",210,120,{width:110}),e.text("FECHA VENC.",380,120),e.text("LOTE",450,120)):e.text("DETALLE",190,120,{width:250}),e.text("P.UNIT.",490,120),e.text("TOTAL",530,120))}}]).factory("ImprimirNotaTraspasoRollo",["blockUI","VerificarDescuentos",function(f,m){return function(e,t,r){var o=new PDFDocument({compress:!1,size:t,margins:{top:10,bottom:10,left:10,right:20}}),a=o.pipe(blobStream());m(e.detallesVenta);o.moveDown(2),o.font("Helvetica-Bold",8),o.text(r.empresa.razon_social.toUpperCase(),{align:"center"}),o.moveDown(.4),o.font("Helvetica",7),o.text(e.sucursal.nombre.toUpperCase(),{align:"center"}),o.moveDown(.4),o.text(e.sucursal.direccion.toUpperCase(),{align:"center"});var i=(null!=e.sucursal.telefono1?e.sucursal.telefono1:"")+(null!=e.sucursal.telefono2?"-"+e.sucursal.telefono2:"")+(null!=e.sucursal.telefono3?"-"+e.sucursal.telefono3:"");o.moveDown(.4),o.text("TELF.: "+i,{align:"center"}),o.moveDown(.4),o.text("COCHABAMBA - BOLIVIA",{align:"center"}),o.moveDown(.5),o.font("Helvetica-Bold",8),o.text("NOTA DE TRASPASO ",{align:"center"}),o.text("DE SUCURSAL: "+e.sucursal.nombre+" A "+e.sucursalDestino.nombre,{align:"center"}),o.font("Helvetica-Bold",8),o.moveDown(.4),o.text("------------------------------------",{align:"center"}),o.moveDown(.4),o.font("Helvetica-Bold",7);var n,c,s=160;o.moveDown(.4),o.text("COD.",10,145),o.text("CANT.",35,145),o.text("DETALL.",60,145),o.text("F. VENC.",128,145),o.text("LOTE",162,145),o.text("TOTAL",183,145),o.moveDown(.4);for(var u=0;u<e.detallesVenta.length;u++){if(o.font("Helvetica",7),c=(n=e.detallesVenta[u].producto.codigo.length)<=15?s:15<n&&n<=15?s-4:s-11,o.moveDown(.4),o.text(e.detallesVenta[u].producto.codigo,10,c,{width:25}),o.text(e.detallesVenta[u].cantidad,38,s),o.text(e.detallesVenta[u].producto.nombre,57,s,{width:70}),e.detallesVenta[u].inventario){var d=new Date(e.detallesVenta[u].inventario.fecha_vencimiento);console.log((new Date).getFullYear().toString().substr(-2)),o.text(d.getDate()+"/"+(d.getMonth()+1)+"/"+d.getFullYear().toString().substr(-2),128,s),o.text(e.detallesVenta[u].inventario.lote,164,s)}o.text(e.detallesVenta[u].total.toFixed(2),187,s,{width:100}),s+=30}var l=new Date;e.fecha=new Date(e.fecha),o.font("Helvetica-Bold",8),o.x=10,o.text("   -----------------------------                 --------------------------",0,s+130,{align:"center"}),o.text("   ENTREGUE CONFORME          RECIBI CONFORME",{align:"center"}),o.moveDown(.4),o.font("Helvetica",6),o.text("EMISIÓN: "+e.fecha.getDate()+"/"+(e.fecha.getMonth()+1)+"/"+e.fecha.getFullYear(),150,s+190),o.text("IMPRESIÓN: "+l.getDate()+"/"+(l.getMonth()+1)+"/"+l.getFullYear(),15,s+200),o.text("USUARIO: "+r.persona.nombre_completo,15,s+190),o.end(),a.on("finish",function(){var e=a.toBlobURL("application/pdf");window.open(e,"_blank","location=no")}),f.stop()}}]).factory("ImprimirPdfAlertaDespacho",["blockUI","DibujarCabeceraPDFAlertaDespacho",function(f,m){return function(e,t,r,o){f.start();var a=new PDFDocument({compress:!1,size:"letter",margin:10}),i=a.pipe(blobStream()),n=130,c=0,s=1,u=Math.ceil(e.length/24);m(a,1,u,e,t,r,o),a.font("Helvetica",8);for(var d=0;d<e.length&&c<=24;d++){var l=e[d];a.text(d+1,45,n),a.text(l.despacho.usuario.persona.nombre_completo,70,n,{width:100}),a.text(l.despacho.cliente.razon_social,190,n,{width:100}),a.text(l.producto.nombre,300,n,{width:110}),a.text(l.cantidad,420,n,{width:50}),a.text(l.cantidad_despacho,460,n,{width:50}),a.text(l.cantidad-l.cantidad_despacho,500,n,{width:50}),a.text("Bs. "+l.servicio_transporte+".-",545,n,{width:80}),n+=25,24==++c&&(a.addPage({margin:0,bufferPages:!0}),n=130,c=0,m(a,s+=1,u,e,t,r,o),a.font("Helvetica",8))}a.end(),i.on("finish",function(){var e=i.toBlobURL("application/pdf");window.open(e,"_blank","location=no")}),f.stop()}}]).factory("ImprimirPdfDespachos",["blockUI","DibujarCabeceraPDFDespacho",function(m,p){return function(e,t,r){m.start();var o=new PDFDocument({compress:!1,size:"letter",margin:10}),a=o.pipe(blobStream()),i=0,n=0,c=130,s=0,u=1,d=Math.ceil(e.length/24);p(o,1,d,e,t,r),o.font("Helvetica",8);for(var l=0;l<e.length&&s<=24;l++){var f=e[l];o.text(l+1,45,c),o.text(f.despacho.usuario.persona.nombre_completo,70,c,{width:100}),o.text(f.despacho.cliente.razon_social,190,c,{width:100}),o.text(f.producto.nombre,320,c,{width:110}),o.text(f.cantidad,440,c,{width:50}),o.text("Bs. "+f.servicio_transporte+".-",500,c,{width:80}),c+=25,24==++s&&(o.addPage({margin:0,bufferPages:!0}),c=130,s=0,p(o,u+=1,d,e,t,r),o.font("Helvetica",8)),i+=f.cantidad,n+=f.servicio_transporte}o.font("Helvetica-Bold",8),o.text("TOTALES:",350,c,{width:80}),o.text(i,440,c,{width:80}),o.text("Bs. "+n+".-",500,c,{width:80}),o.end(),a.on("finish",function(){var e=a.toBlobURL("application/pdf");window.open(e,"_blank","location=no")}),m.stop()}}]).factory("ExportarExelAlarmasDespachos",["blockUI",function(g){return res=function(e,t,r){var o="Todos",a="Todos";""!=t.empleado&&(o=e[0].despacho.usuario.persona.nombre_completo),""!=t.razon_social&&(a=e[0].despacho.cliente.razon_social);for(var i=[["","","REPORTE DE PEDIDOS "],["Vendedor :"+o],["Cliente :"+a],["Nro","Vendedor","Cliente","Direccion","Razón social","Fecha","Producto","Cant.","Desp.","Saldo","S. Transp."]],n=0;n<e.length;n++){var c=e[n];c.despacho.usuario.persona.nombre_completo;var s=[];s.push(n+1),s.push(c.despacho.usuario.persona.nombre_completo),s.push(c.despacho.cliente.razon_social),s.push(c.despacho.destino.direccion),s.push(c.despacho.cliente_razon.razon_social);var u=new Date(c.despacho.fecha),d=10<=u.getDate()?u.getDate():"0"+u.getDate(),l=10<=u.getMonth()?u.getMonth()+1:"0"+(u.getMonth()+1);s.push(d+"/"+l+"/"+u.getFullYear()),s.push(c.producto.nombre),s.push(c.cantidad),s.push(c.cantidad_despacho);var f=c.cantidad-c.cantidad_despacho;s.push(f),s.push(c.servicio_transporte),i.push(s)}var m="SheetJS",p=new Workbook,v=sheet_from_array_of_arrays(i);p.SheetNames.push(m),p.Sheets[m]=v;var _=XLSX.write(p,{bookType:"xlsx",bookSST:!0,type:"binary"});saveAs(new Blob([s2ab(_)],{type:"application/octet-stream"}),"REPORTE-PEDIDOS.xlsx"),g.stop()},res}]).factory("ExportarExelDespachos",["blockUI",function(g){return res=function(e,t,r){for(var o=[["","","REPORTE DE DESPACHOS "],["cod. dest","Destino","Direccion","Cod Cliente","Cliente","cod dest.factura","Razón social","NIT","Vendedor","Nro. pedido","F. Pedido","Factura SAP","fecha fact.","No. Despacho","fecha desp.","Transportista","doc. Cobranza","Fecha Pago","Cod. prodcuto","Producto","cant. pedido","cant. Despacho","P/U","Total","Costo Transportista","Grupo de Estibaje","Tipo de Estibaje","Costo Estibaje","Precio Transporte","Total Pedido"]],a=0;a<e.length;a++){var i=e[a],n=[];n.push(null!=i.despacho.destino?i.despacho.destino.codigo:""),n.push(null!=i.despacho.destino?i.despacho.destino.destino:"Sin destino"),n.push(null!=i.despacho.destino?i.despacho.destino.direccion:"Sin direccion"),n.push(i.despacho.cliente.codigo),n.push(i.despacho.cliente.razon_social),n.push(null!=i.despacho.cliente_razon?i.despacho.cliente_razon.codigo_sap:""),n.push(null!=i.despacho.cliente_razon?i.despacho.cliente_razon.razon_social:""),n.push(null!=i.despacho.cliente_razon?i.despacho.cliente_razon.nit:""),n.push(i.despacho.usuario.persona.nombre_completo);var c=new Date(i.despacho.fecha);10<=c.getDate()?c.getDate():c.getDate(),10<=c.getMonth()?c.getMonth():c.getMonth();n.push(i.despacho.id),n.push(new Date(i.despacho.fecha)),n.push(i.factura),n.push(new Date(i.fecha_factura)),n.push(i.numero_correlativo);var s=new Date(i.fecha);10<=s.getDate()?s.getDate():s.getDate(),10<=s.getMonth()+1?s.getMonth():s.getMonth();n.push(new Date(i.fecha)),n.push(i.transportista.persona.nombre_completo),n.push(""),n.push(""),n.push(i.producto.codigo),n.push(i.producto.nombre),n.push(i.cantidad),n.push(i.cantidad_despacho),n.push(i.precio_unitario);var u=i.precio_unitario*i.cantidad_despacho;n.push(u);var d=i.transportista.costo_transporte*i.cantidad_despacho;n.push(d),n.push(i.grupo_estibaje.nombre),n.push(i.estibaje.nombre);var l=i.estibaje.costo*i.cantidad_despacho;n.push(l),n.push(i.servicio_transporte);var f=i.servicio_transporte+u;n.push(f),n.push(null!=i.despacho.cliente_razon?i.despacho.cliente_razon.codigo_sap:""),o.push(n)}var m="SheetJS",p=new Workbook,v=sheet_from_array_of_arrays(o);p.SheetNames.push(m),p.Sheets[m]=v;var _=XLSX.write(p,{bookType:"xlsx",bookSST:!0,type:"binary"});saveAs(new Blob([s2ab(_)],{type:"application/octet-stream"}),"REPORTE-DESPACHOS.xlsx"),g.stop()},res}]).factory("DibujarCabeceraPDFAlertaDespacho",[function(){return res=function(e,t,r,o,a,i,n){var c={inicio:a.inicio,fin:a.fin};if(e.font("Helvetica-Bold",12),e.text("REPORTE DE PEDIDOS",0,25,{align:"center"}),e.font("Helvetica",12),c.inicio&&c.fin){c.inicio=new Date(n(c.inicio)),c.fin=new Date(n(c.fin));var s=c.inicio.getMonth()+1<10?"0"+(c.inicio.getMonth()+1):c.inicio.getMonth()+1,u=c.inicio.getDate()<10?"0"+c.inicio.getDate():c.inicio.getDate(),d=c.fin.getMonth()+1<10?"0"+(c.fin.getMonth()+1):c.fin.getMonth()+1,l=c.fin.getDate()<10?"0"+c.fin.getDate():c.fin.getDate();e.text(u+"/"+s+"/"+c.inicio.getFullYear()+" AL "+l+"/"+d+"/"+c.fin.getFullYear(),0,45,{align:"center"})}e.font("Helvetica-Bold",8),e.text("PÁGINA "+t+" DE "+r,0,740,{align:"center"});var f="Todos",m="Todos";""!=c.empleado&&(f=o[0].despacho.usuario.persona.nombre_completo),""!=c.razon_social&&(m=o[0].despacho.cliente.razon_social),e.font("Helvetica-Bold",8),e.text("Vendedor : "+f,45,80),e.text("Cliente : "+m,245,80),e.font("Helvetica",8),e.font("Helvetica-Bold",8),e.text("Nro.",45,110),e.text("Vendedor",80,110,{width:50}),e.text("Cliente",200,110,{width:60}),e.text("Producto",300,110,{width:50}),e.text("Cant.",420,110,{width:50}),e.text("desp.",460,110,{width:50}),e.text("saldo",500,110,{width:50}),e.text("S. Transp.",545,110,{width:80}),e.font("Helvetica",8);var p=new Date;e.text("USUARIO: "+i.persona.nombre_completo+" fecha "+p.getDate()+"/"+(p.getMonth()+1)+"/"+p.getFullYear()+"Hrs."+p.getHours()+":"+p.getMinutes(),15,765)},res}]).factory("DibujarCabeceraPDFDespacho",[function(){return res=function(e,t,r,o,a,i){if(e.font("Helvetica-Bold",12),e.text("REPORTE DE PEDIDOS",0,25,{align:"center"}),e.font("Helvetica",12),a.inicio&&a.fin){var n=a.inicio.getMonth()+1<10?"0"+(a.inicio.getMonth()+1):a.inicio.getMonth()+1,c=a.inicio.getDate()<10?"0"+a.inicio.getDate():a.inicio.getDate(),s=a.fin.getMonth()+1<10?"0"+(a.fin.getMonth()+1):a.fin.getMonth()+1,u=a.fin.getDate()<10?"0"+a.fin.getDate():a.fin.getDate();e.text(c+"/"+n+"/"+a.inicio.getFullYear()+" AL "+u+"/"+s+"/"+a.fin.getFullYear(),0,45,{align:"center"})}e.font("Helvetica-Bold",8),e.text("PÁGINA "+t+" DE "+r,0,740,{align:"center"});e.font("Helvetica-Bold",8),e.text("Vendedor : Todos",45,80),e.text("Cliente : Todos",245,80),e.font("Helvetica",8),e.font("Helvetica-Bold",8),e.text("Nro.",45,110),e.text("Vendedor",80,110,{width:50}),e.text("Cliente",200,110,{width:60}),e.text("Producto",320,110,{width:50}),e.text("Cant.",440,110,{width:50}),e.text("S. Transp.",500,110,{width:80}),e.font("Helvetica",8);var d=new Date;e.text("USUARIO: "+i.persona.nombre_completo+" fecha "+d.getDate()+"/"+(d.getMonth()+1)+"/"+d.getFullYear()+"Hrs."+d.getHours()+":"+d.getMinutes(),15,765)},res}]),angular.module("agil.servicios").factory("Compra",["$resource",function(e){return e(restServer+"compras/:id",null,{update:{method:"PUT"}})}]).factory("ActualizarDetalleMovimiento",["$resource",function(e){return e(restServer+"actualizar-movimiento-detalle/:id",null,{update:{method:"PUT"}})}]).factory("CompraDatos",["Compra","$q",function(r,o){return function(e){var t=o.defer();return r.get({id:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("SaveCompra",["Compra","$q",function(r,o){return function(e){var t=o.defer();return r.save({},e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("Venta",["$resource",function(e){return e(restServer+"ventas/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("EliminarVentaServicio",["Venta","$q",function(r,o){return function(e){var t=o.defer();return r.save({id:e.id},e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ModificarVenta",["Venta","$q",function(r,o){return function(e){var t=o.defer();return r.update({id:e.id},e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CompraEmpresaDatos",["$resource",function(e){return e(restServer+"compras/:id/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("DatosCompra",["CompraEmpresaDatos","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id:e,id_empresa:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("CompraFiltro",["$resource",function(e){return e(restServer+"compras/:idsSucursales/inicio/:inicio/fin/:fin/razon-social/:razon_social/nit/:nit/monto/:monto/tipo-compra/:tipo_compra/sucursal/:sucursal/usuario/:usuario/user/:id_usuario/tipo/:tipo",null,{update:{method:"PUT"}})}]).factory("Compras",["CompraFiltro","$q",function(f,m){return function(e,t,r,o,a,i,n,c,s,u,d){var l=m.defer();return f.query({idsSucursales:e,inicio:t,fin:r,razon_social:o,nit:a,monto:i,tipo_compra:n,sucursal:c,usuario:s,id_usuario:u,tipo:d},function(e){l.resolve(e)},function(e){l.reject(e)}),l.promise}}]).factory("InventarioEmpresaPaginador",["$resource",function(e){return e(restServer+"inventarios/empresa/:id_empresa/almacen/:id_almacen/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion/cantidad/:cantidad/grupo/:id_grupo/user/:id_usuario")}]).factory("InventarioPaginador",["InventarioEmpresaPaginador","$q",function(l,f){return function(e,t,r,o,a,i,n,c,s,u){var d=f.defer();return l.get({id_empresa:e,id_almacen:t,pagina:r,items_pagina:o,texto_busqueda:a,columna:i,direccion:n,cantidad:c,id_grupo:null!=s&&""!==s?s:0,id_usuario:u},function(e){d.resolve(e)},function(e){d.reject(e)}),d.promise}}]).factory("Inventario",["$resource",function(e){return e(restServer+"inventarios/:id_empresa",null,{update:{method:"PUT"}})}]).factory("InventariosIncial",["$resource",function(e){return e(restServer+"inventarios",null,{update:{method:"PUT"}})}]).factory("Inventarios",["Inventario","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("InventarioInicial",["InventariosIncial","$q",function(r,o){return function(e){var t=o.defer();return r.save(e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("Venta",["$resource",function(e){return e(restServer+"ventas/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("VentaEmpresaDatos",["$resource",function(e){return e(restServer+"ventas/:id/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("DatosVenta",["VentaEmpresaDatos","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id:e,id_empresa:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("VentaFiltro",["$resource",function(e){return e(restServer+"ventas/:idsSucursales/inicio/:inicio/fin/:fin/razon-social/:razon_social/nit/:nit/monto/:monto/tipo-venta/:tipo_venta/sucursal/:sucursal/transaccion/:transaccion/usuario/:usuario/estado/:estado",null,{update:{method:"PUT"}})}]).factory("Ventas",["VentaFiltro","$q",function(f,m){return function(e,t,r,o,a,i,n,c,s,u,d){var l=m.defer();return f.query({idsSucursales:e,inicio:t,fin:r,razon_social:o,nit:a,monto:i,tipo_venta:n,sucursal:c,transaccion:s,usuario:u,estado:d},function(e){l.resolve(e)},function(e){l.reject(e)}),l.promise}}]).factory("VentaFiltroProducto",["$resource",function(e){return e(restServer+"ventasProductos/:idsSucursales/inicio/:inicio/fin/:fin/sucursal/:sucursal/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion",null,{update:{method:"PUT"}})}]).factory("VentasProductos",["VentaFiltroProducto","$q",function(r,o){return function(e){var t=o.defer();return r.get({idsSucursales:e.filter.sucursalUsuario,inicio:e.filter.inicio,fin:e.filter.fin,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction,sucursal:e.filter.sucursal},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("detalleVentaEmpresa",["$resource",function(e){return e(restServer+"ventasDetalleEmpresa/:idsSucursales/inicio/:inicio/fin/:fin/sucursal/:sucursal/idEmpresa/:idEmpresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion",null,{update:{method:"PUT"}})}]).factory("ventasDetalleEmpresa",["detalleVentaEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.get({idsSucursales:e.filter.idsSucursales,inicio:e.filter.inicio,fin:e.filter.fin,sucursal:e.filter.sucursal,idEmpresa:e.filter.idEmpresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("detalleProductos",["$resource",function(e){return e(restServer+"detalle/:inicio/:fin/:idEmpresa/:id",null,{update:{method:"PUT"}})}]).factory("detalle",["detalleProductos","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.query({inicio:e,fin:t,idEmpresa:r,id:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("detalleEmpresas",["$resource",function(e){return e(restServer+"detalleEmpresa/:inicio/:fin/:idEmpresa/:id",null,{update:{method:"PUT"}})}]).factory("detalleEmpresa",["detalleEmpresas","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.query({inicio:e,fin:t,idEmpresa:r,id:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("VentaContado",["$resource",function(e){return e(restServer+"ventas-contado/:idsSucursales/inicio/:inicio/fin/:fin/usuario/:id_usuario/cierre-caja/:id_cierre_caja",null,{update:{method:"PUT"}})}]).factory("VentasContado",["VentaContado","$q",function(n,c){return function(e,t,r,o,a){var i=c.defer();return n.query({idsSucursales:e,inicio:t,fin:r,id_usuario:o,id_cierre_caja:a},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}]).factory("VentaCredito",["$resource",function(e){return e(restServer+"ventas-credito/:idsSucursales/inicio/:inicio/fin/:fin/usuario/:id_usuario/cierre-caja/:id_cierre_caja",null,{update:{method:"PUT"}})}]).factory("VentasCredito",["VentaCredito","$q",function(n,c){return function(e,t,r,o,a){var i=c.defer();return n.query({idsSucursales:e,inicio:t,fin:r,id_usuario:o,id_cierre_caja:a},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}]).factory("PagoVenta",["$resource",function(e){return e(restServer+"pagos-venta/:idsSucursales/inicio/:inicio/fin/:fin/usuario/:id_usuario/cierre-caja/:id_cierre_caja",null,{update:{method:"PUT"}})}]).factory("PagosVenta",["PagoVenta","$q",function(n,c){return function(e,t,r,o,a){var i=c.defer();return n.query({idsSucursales:e,inicio:t,fin:r,id_usuario:o,id_cierre_caja:a},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}]).factory("PagoCompra",["$resource",function(e){return e(restServer+"pagos-compra/:idsSucursales/inicio/:inicio/fin/:fin/usuario/:id_usuario/cierre-caja/:id_cierre_caja",null,{update:{method:"PUT"}})}]).factory("PagosCompra",["PagoCompra","$q",function(n,c){return function(e,t,r,o,a){var i=c.defer();return n.query({idsSucursales:e,inicio:t,fin:r,id_usuario:o,id_cierre_caja:a},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}]).factory("VentaEmpresa",["$resource",function(e){return e(restServer+"ventas/:id_empresa/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("VentasEmpresa",["VentaEmpresa","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.query({id_empresa:e,inicio:t,fin:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("GastosVarios",["$resource",function(e){return e(restServer+"detalles_compra/:id_empresa/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("GastosVariosLista",["GastosVarios","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.query({id_empresa:e,inicio:t,fin:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("IngresosPorInventario",["$resource",function(e){return e(restServer+"ingreso-por-inventario/:id_empresa",{id_empresa:"@idEmpresa"},{get:{method:"GET",isArray:!0}})}]).factory("IngPorInventario",["IngresosPorInventario","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ActualizacionInventario",["$resource",function(e){return e(restServer+"inventario/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("CompraContado",["$resource",function(e){return e(restServer+"compras-contado/:idsSucursales/inicio/:inicio/fin/:fin/usuario/:id_usuario/cierre-caja/:id_cierre_caja",null,{update:{method:"PUT"}})}]).factory("ComprasContado",["CompraContado","$q",function(n,c){return function(e,t,r,o,a){var i=c.defer();return n.query({idsSucursales:e,inicio:t,fin:r,id_usuario:o,id_cierre_caja:a},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}]).factory("CompraCredito",["$resource",function(e){return e(restServer+"compras-credito/:idsSucursales/inicio/:inicio/fin/:fin/usuario/:id_usuario/cierre-caja/:id_cierre_caja",null,{update:{method:"PUT"}})}]).factory("ComprasCredito",["CompraCredito","$q",function(n,c){return function(e,t,r,o,a){var i=c.defer();return n.query({idsSucursales:e,inicio:t,fin:r,id_usuario:o,id_cierre_caja:a},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}]).factory("VerificarExesoCredito",["$resource",function(e){return e(restServer+"cliente/verificar-credito/:id_cliente/tipo/:id_tipo",null,{update:{method:"PUT"}})}]).factory("VerificarLimiteCredito",["VerificarExesoCredito","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_cliente:e.cliente.id,id_tipo:e.tipoPago.id},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CompraPedidosEmpresa",["$resource",function(e){return e(restServer+"compra/pedido/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ListaCompraPedidosEmpresa",["CompraPedidosEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ServiciosVentas",["$resource",function(e){return e(restServer+"servicios-venta/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ListaServiciosVentas",["ServiciosVentas","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("GuardarListaServiciosVentas",["ServiciosVentas","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("VentasServicioImportados",["$resource",function(e){return e(restServer+"importacion-ventas-servicio",{id:"@id"},{update:{method:"PUT"}})}]).factory("GuardarVentasImportados",["VentasServicioImportados","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save(null,{ventas:e,arregloServicios:t,arregloClientes:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("EliminarDetalleVentaEdicionVenta",["$resource",function(e){return e(restServer+"eliminar-detalle-venta/movimiento/:id_movimiento",{id:"@id"},{update:{method:"PUT"}})}]).factory("EliminarDetalleVentaEdicion",["EliminarDetalleVentaEdicionVenta","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.update({id_movimiento:t},{detalleVenta:e,venta:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]),angular.module("agil.servicios").factory("Sala",["$resource",function(e){return e(restServer+"sala/sucursal/:id_sucursal",null)}]).factory("ListaSalas",["Sala","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_sucursal:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("Mesa",["$resource",function(e){return e(restServer+"mesa/sala/:id_sala",null)}]).factory("MesaActualizacion",["$resource",function(e){return e(restServer+"mesa/:id_mesa",null,{update:{method:"PUT"}})}]).factory("PedidoRestaurante",["$resource",function(e){return e(restServer+"pedido-restaurante/mesa/:id_mesa/almacen/:id_almacen",null)}]).factory("PedidoRestauranteActualizacion",["$resource",function(e){return e(restServer+"pedido-restaurante/:id_pedido_restaurante",null,{update:{method:"PUT"}})}]).factory("MesaPedidoRestaurante",["PedidoRestaurante","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_mesa:e,id_almacen:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("InactivarPedido",["$resource",function(e){return e(restServer+"inactivacion-pedido-restaurante/:id",null,{update:{method:"PUT"}})}]).factory("CrearGarzon",["$resource",function(e){return e(restServer+"sala/garzon",null,{update:{method:"PUT"}})}]).factory("Garzon",["$resource",function(e){return e(restServer+"garzon/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ActualizarGarzon",["$resource",function(e){return e(restServer+"garzon/:id_garzon",{id_garzon:"@id"},{update:{method:"PUT"}})}]).factory("ListaGarzones",["Garzon","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("EliminacionMesaPedidoRestaurante",["$resource",function(e){return e(restServer+"mesa-pedido-restaurante/:id",{id:"@id"},{update:{method:"PUT"}})}]),angular.module("agil.servicios").factory("SolicitudReposicion",["$resource",function(e){return e(restServer+"operaciones/empresa/:id_empresa/vintage/:id_usuario/capo/:rol/desde/:desde/hasta/:hasta/suc/:sucursal/alm/:almacen/mov/:movimiento/est/:estado/val/:valuado/pagina/:pagina/items-pagina/:items_pagina/busqueda/:busqueda",{},{update:{method:"PUT"}})}]).factory("SolicitudesReposicion",["SolicitudReposicion","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,id_usuario:e.filter.id,rol:e.filter.rol,desde:e.filter.desde,hasta:e.filter.hasta,sucursal:e.filter.sucursal,almacen:void 0!==e.filter.almacen&&void 0!==e.filter.almacen.id&&0<=e.filter.almacen.id?e.filter.almacen.id:0,movimiento:e.filter.movimiento,estado:e.filter.estado,valuado:e.filter.valuado,pagina:e.currentPage,items_pagina:e.itemsPerPage,busqueda:e.search},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("BusquedaProductosOperaciones",["$resource",function(e){return e(restServer+"productos-operaciones/empresa/:id_empresa/almacen/:id_almacen/user/:id_usuario")}]).factory("ProductosOperaciones",["BusquedaProductosOperaciones","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.query({id_empresa:e,id_almacen:t,id_usuario:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("Ingrediente",["$resource",function(e){return e(restServer+"operaciones/producto/:id_producto",null,{update:{method:"PUT"}})}]).factory("SolicitudesFormulacionProducto",["Ingrediente","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_producto:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("EliminarSolicitud",["$resource",function(e){return e(restServer+"operaciones/eliminar/:id_solicitud",null,{update:{method:"PUT"}})}]).factory("EliminarSolicitudReposicion",["EliminarSolicitud","$q",function(r,o){return function(e){var t=o.defer();return r.save({id_solicitud:e.id},e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("DatosImpresion",["$resource",function(e){return e(restServer+"operaciones/impresion/:id_solicitud",null,{update:{method:"PUT"}})}]).factory("ImpresionSolicitudDatos",["DatosImpresion","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_producto:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CerrarSolicitudViveres",["$resource",function(e){return e(restServer+"productos-operaciones/empresa/:id_empresa/cerrar",null,{update:{method:"PUT"}})}]).factory("CerrarSolicitud",["CerrarSolicitudViveres","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:t},e,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("SolicitudReposicionEmpresa",["$resource",function(e){return e(restServer+"solicitud/empresa/:id_empresa",{},{update:{method:"PUT"}})}]).factory("Solicitud",["SolicitudReposicionEmpresa","$q",function(a,i){return function(e,t,r){var o=i.defer();return r?a.update({id_empresa:t},e,function(e){o.resolve(e)},function(e){o.reject(e)}):a.save({id_empresa:t},e,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]),angular.module("agil.servicios").factory("PacienteActivo",["$resource",function(e){return e(restServer+"pacientes/:id_paciente/activo/:activo",{id_paciente:"@id_paciente",activo:"@activo"},{update:{method:"PUT"}})}]).factory("Paciente",["$resource",function(e){return e(restServer+"pacientes/:id_paciente",{id_paciente:"@id_paciente"},{update:{method:"PUT"}})}]).factory("Comentario",["$resource",function(e){return e(restServer+"pacientes/:id_paciente/comentario",{id_paciente:"@id_paciente"},{update:{method:"PUT"}})}]).factory("DatosPacientes",["Paciente","$q",function(e,r){return function(){var t=r.defer();return e.get(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("PacientesEmpresaPaginador",["$resource",function(e){return e(restServer+"pacientes/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion/codigo/:codigo/nombres/:nombres/ci/:ci/campo/:campo/cargo/:cargo/busquedaEmpresa/:busquedaEmpresa/grupo/:grupo_sanguineo/estado/:estado/apellido/:apellido")}]).factory("PacientesPaginador",["PacientesEmpresaPaginador","$q",function(r,o){return function(e){var t=o.defer();return e.filter.cargo=e.filter.cargo?e.filter.cargo:0,e.filter.campo=e.filter.campo?e.filter.campo:0,r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction,codigo:e.filter.codigo,nombres:e.filter.nombres,ci:e.filter.ci,campo:e.filter.campo,cargo:e.filter.cargo,busquedaEmpresa:e.filter.busquedaEmpresa,estado:e.filter.estado,grupo_sanguineo:e.filter.grupo_sanguineo,apellido:0},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("aplicacionVacunasPacientes",["$resource",function(e){return e(restServer+"pacientes/Vacunas/excel/upload")}]).factory("SOAPlistaPacientes",["$resource",function(e){return e(restServer+"pacientes/SOAP/excel/upload")}]).factory("SignosVitalesPacientes",["$resource",function(e){return e(restServer+"pacientes/signos_vitales/excel/upload")}]).factory("FichasTecnicasPacientes",["$resource",function(e){return e(restServer+"pacientes/ficha_tecnica/excel/upload")}]).factory("PacientesEmpresa",["$resource",function(e){return e(restServer+"pacientes/empresa/excel/upload")}]).factory("ListaPrerequisitos",["$resource",function(e){return e(restServer+"prerequisitos",{update:{method:"PUT"}})}]).factory("obtenerPaciente",["Paciente","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_paciente:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ListaDatosPrerequisito",["ListaPrerequisitos","$q",function(e,r){return function(){var t=r.defer();return e.get(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ListaGeneros",["$resource",function(e){return e(restServer+"generos",{update:{method:"PUT"}})}]).factory("ListaDatosGenero",["ListaGeneros","$q",function(e,r){return function(){var t=r.defer();return e.query(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ListaTiposControl",["$resource",function(e){return e(restServer+"tipo-control",{update:{method:"PUT"}})}]).factory("ListaDatosTiposControl",["ListaTiposControl","$q",function(e,r){return function(){var t=r.defer();return e.query(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("Prerequisito",["$resource",function(e){return e(restServer+"prerequisitos",{update:{method:"PUT"}})}]).factory("Prerequisitos",["Prerequisito","$q",function(e,r){return function(){var t=r.defer();return e.get(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("PrerequisitosSave",["Prerequisito","$q",function(r,o){return function(e){var t=o.defer();return r.save(e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("PrerequisitoHistorial",["$resource",function(e){return e(restServer+"prerequisito/:id_pre/historial/:id_pac/inicio/:inicio/fin/:fin",{})}]).factory("PrerequisitosHistorial",["PrerequisitoHistorial","$q",function(r,o){return function(e){var t=o.defer();return r.get(e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("PrerequisitoPaciente",["$resource",function(e){return e(restServer+"prerequisito/paciente")}]).factory("CrearPrerequisito",["Prerequisito","$q",function(r,o){return function(e){var t=o.defer();return r.save({id_paciente:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ActualizarPrerequisito",["Prerequisito","$q",function(r,o){return function(e){var t=o.defer();return r.update({id_paciente:0},e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("listaPrarequisitos",["$resource",function(e){return e(restServer+"medico-paciente-pre-requisito/empresa/:id_empresa/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("ListaPrerequisitosEmpresa",["listaPrarequisitos","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,inicio:t.inicio,fin:t.fin},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("listaAlertasPrarequisitosPaciente",["$resource",function(e){return e(restServer+"medico-paciente-pre-requisito-alertas/empresa/:id_empresa/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("ListaAlertasPrerequisitosPaciente",["listaAlertasPrarequisitosPaciente","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,inicio:t.inicio,fin:t.fin},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("listaAlertasVacunas",["$resource",function(e){return e(restServer+"medico-paciente-vacunas-alertas/empresa/:id_empresa/inicio/:inicio/fin/:fin/opcion/:opcion",null,{update:{method:"PUT"}})}]).factory("ListaAlertasVacunasEmpresa",["listaAlertasVacunas","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,inicio:t.inicio,fin:t.fin,opcion:t.vacuna},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("listaVacunas",["$resource",function(e){return e(restServer+"medico-paciente-vacunas/empresa/:id_empresa/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("ListaVacunasEmpresa",["listaVacunas","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,inicio:t.inicio,fin:t.fin},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("listaPrarequisitosPaciente",["$resource",function(e){return e(restServer+"medico-paciente-pre-requisito/paciente/:id_paciente/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("ListaPrerequisitosPaciente",["listaPrarequisitosPaciente","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_paciente:e,inicio:t.inicio,fin:t.fin},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("MedicoPacientepatologia",["$resource",function(e){return e(restServer+"medico-paciente-patologia/paciente/:id_paciente",{id_paciente:"@id_paciente"},{update:{method:"PUT"}})}]).factory("ActualizarPatologiaPaciente",["MedicoPacientepatologia","$q",function(o,a){return function(e,t){var r=a.defer();return o.update({id_paciente:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("MedicoPacienteFicha",["$resource",function(e){return e(restServer+"medico-paciente-ficha/paciente/:id_paciente",null,{update:{method:"PUT"}})}]).factory("CrearMedicoPacienteFicha",["MedicoPacienteFicha","$q",function(r,o){return function(e){var t=o.defer();return r.save({id_paciente:0},e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("BuscarFichaPaciente",["MedicoPacienteFicha","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_paciente:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("FichasMedicoPaciente",["$resource",function(e){return e(restServer+"historial-ficha-medico-paciente/paciente/:id_paciente/inicio/:inicio/fin/:fin/tipo-control/:tipo_control",null,{update:{method:"PUT"}})}]).factory("HistorialFichaMedicoPaciente",["FichasMedicoPaciente","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_paciente:e,inicio:t.inicio,fin:t.fin,tipo_control:t.tipo_control},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("MedicoPacienteConsulta",["$resource",function(e){return e(restServer+"medico-paciente-consulta",{},{update:{method:"PUT"}})}]).factory("CrearMedicoPacienteConsulta",["MedicoPacienteConsulta","$q",function(r,o){return function(e){var t=o.defer();return r.save(e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("DatosPrerequisitoPaciente",["Prerequisito","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_paciente:e,pagina:t.currentPage,items_pagina:t.itemsPerPage,busqueda:t.search,inicio:t.filter.fecha_inicio,fin:t.filter.fecha_fin,columna:t.column,direccion:t.direction},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ListaConsultaPaciente",["$resource",function(e){return e(restServer+"medico-paciente-consulta/paciente/:id_paciente/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("ListaConsultasMedicoPaciente",["ListaConsultaPaciente","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_paciente:e,inicio:t.inicio,fin:t.fin},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("prerequisitoFiltro",["$resource",function(e){return e(restServer+"cotizacion/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/importe/:importe/busqueda/:busqueda/fecha-inicio/:inicio/fecha-fin/:fin/columna/:columna/direccion/:direccion",null,{update:{method:"PUT"}})}]).factory("filtroPrerequisitos",["prerequisitoFiltro","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,busqueda:e.search,inicio:e.filter.fecha_inicio,fin:e.filter.fecha_fin,columna:e.column,direccion:e.direction},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("asignacionPacienteVacuna",["$resource",function(e){return e(restServer+"paciente/vacuna/asignacion/:id/:asignar",{id:"@id",asignar:"@asignar"},{update:{method:"PUT"}})}]).factory("aplicacionPacienteVacuna",["$resource",function(e){return e(restServer+"paciente/aplicacion/vacuna/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("VacunasPacientedosis",["aplicacionPacienteVacuna","$q",function(r,o){return function(e){var t=o.defer();return prom=r.query({id:e.id},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("PacienteVacuna",["$resource",function(e){return e(restServer+"paciente/vacuna/:id_paciente",{id_paciente:"@id_paciente"},{update:{method:"PUT"}})}]).factory("VacunasPaciente",["PacienteVacuna","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_paciente:e.id},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("Vacunas",["$resource",function(e){return e(restServer+"vacunas/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Vacuna",["$resource",function(e){return e(restServer+"vacunas",{},{update:{method:"PUT"}})}]).factory("ltsVacunas",["Vacunas","$q",function(e,r){return function(){var t=r.defer();return e.query(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("MedicoLaboratorio",["$resource",function(e){return e(restServer+"nuevo-laboratorio/empresa/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("CrearLaboratorio",["MedicoLaboratorio","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ActualizarLaboratorio",["MedicoLaboratorio","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("EliminarLaboratorio",["MedicoLaboratorio","$q",function(o,a){return function(e,t){var r=a.defer();return o.update({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ListaLaboratorios",["MedicoLaboratorio","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("MedicoLaboratorioExamen",["$resource",function(e){return e(restServer+"nuevo-laboratorio-examen/laboratorio/:id_laboratorio",{id_laboratorio:"@id_laboratorio"},{update:{method:"PUT"}})}]).factory("CrearLaboratorioExamen",["MedicoLaboratorioExamen","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_laboratorio:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ActualizarLaboratorioExamen",["MedicoLaboratorioExamen","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_laboratorio:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("EliminarLaboratorioExamen",["MedicoLaboratorioExamen","$q",function(o,a){return function(e,t){var r=a.defer();return o.update({id_laboratorio:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ListaLaboratorioExamenes",["MedicoLaboratorioExamen","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_laboratorio:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("MedicoLaboratorioExamenResultado",["$resource",function(e){return e(restServer+"nuevo-laboratorio-resultado/laboratorio/:id_laboratorio/paciente/:id_paciente",{id_laboratorio:"@id_laboratorio",id_paciente:"@id_paciente"},{update:{method:"PUT"}})}]).factory("CrearLaboratorioExamenResultado",["MedicoLaboratorioExamenResultado","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_laboratorio:e,id_paciente:t},r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("LaboratorioExamenHistorial",["$resource",function(e){return e(restServer+"laboratorio-resultado/laboratorio/:id_laboratorio/paciente/:id_paciente/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("LaboratorioExamenListaHistorial",["LaboratorioExamenHistorial","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.query({id_laboratorio:e,id_paciente:t,inicio:r.inicio,fin:r.fin},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("MedicoDiagnostico",["$resource",function(e){return e(restServer+"nuevo-diagnostico/empresa/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("CrearDiagnostico",["MedicoDiagnostico","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ActualizarDiagnostico",["MedicoDiagnostico","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("EliminarDiagnostico",["MedicoDiagnostico","$q",function(o,a){return function(e,t){var r=a.defer();return o.update({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ListaDiagnosticos",["MedicoDiagnostico","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("MedicoDiagnosticoExamen",["$resource",function(e){return e(restServer+"nuevo-diagnostico-examen/diagnostico/:id_diagnostico",{id_diagnostico:"@id_diagnostico"},{update:{method:"PUT"}})}]).factory("CrearDiagnosticoExamen",["MedicoDiagnosticoExamen","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_diagnostico:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ActualizarDiagnosticoExamen",["MedicoDiagnosticoExamen","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_diagnostico:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("EliminarDiagnosticoExamen",["MedicoDiagnosticoExamen","$q",function(o,a){return function(e,t){var r=a.defer();return o.update({id_diagnostico:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ListaDiagnosticoExamenes",["MedicoDiagnosticoExamen","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_diagnostico:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("MedicoDiagnosticoExamenResultado",["$resource",function(e){return e(restServer+"nuevo-diagnostico-resultado/diagnostico/:id_diagnostico/paciente/:id_paciente",{id_diagnostico:"@id_diagnostico",id_paciente:"@id_paciente"},{update:{method:"PUT"}})}]).factory("CrearDiagnosticoExamenResultado",["MedicoDiagnosticoExamenResultado","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_diagnostico:e,id_paciente:t},r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("DiagnosticoExamenHistorial",["$resource",function(e){return e(restServer+"diagnostico-resultado/diagnostico/:id_diagnostico/paciente/:id_paciente/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("DiagnosticoExamenListaHistorial",["DiagnosticoExamenHistorial","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.query({id_diagnostico:e,id_paciente:t,inicio:r.inicio,fin:r.fin},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]),angular.module("agil.servicios").factory("VentasNoDespachadas",["$resource",function(e){return e(restServer+"ventas-no-despachadas/sucursal/:id_sucursal")}]).factory("VentasNoDespachadasLista",["VentasNoDespachadas","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_sucursal:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("DespachoVenta",["$resource",function(e){return e(restServer+"venta/:id_venta/despachar",null,{update:{method:"PUT"}})}]),angular.module("agil.servicios").factory("PedidosEmpresa",["$resource",function(e){return e(restServer+"pedidos/empresa/:id_empresa/desde/:desde/hasta/:hasta/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/tipo_pedido/:id_tipo/proveedor/:id_proveedor/nit/:nit/sucursal/:id_sucursal/estado/:estado/usuario/:usuario")}]).factory("PedidosFiltro",["PedidosEmpresa","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({desde:t.filter.desde,hasta:t.filter.hasta,id_empresa:e,pagina:t.currentPage,items_pagina:t.itemsPerPage,texto_busqueda:t.search,id_tipo:t.filter.tipo,id_proveedor:t.filter.proveedor,nit:t.filter.nit,id_sucursal:t.filter.sucursal,estado:t.filter.estado,usuario:t.filter.usuario},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("Pedido",["$resource",function(e){return e(restServer+"pedidos/:id_empresa/:id_usuario")}]).factory("GuardarPedido",["Pedido","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_empresa:e,id_usuario:r},t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ProveedoresOperaciones",["$resource",function(e){return e(restServer+"proveedores/:id_empresa")}]).factory("ListaProveedores",["ProveedoresOperaciones","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("EliminarPedido",["$resource",function(e){return e(restServer+"pedido/:id_pedido")}]).factory("EliminarPedidoEmpresa",["EliminarPedido","$q",function(r,o){return function(e){var t=o.defer();return r.delete({id_pedido:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("EliminarDetallePedido",["$resource",function(e){return e(restServer+"pedido/detalle/:id_detalle")}]).factory("EliminarDetallePedidoEmpresa",["EliminarDetallePedido","$q",function(r,o){return function(e){var t=o.defer();return r.delete({id_detalle:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]),angular.module("agil.servicios").factory("Parametro",["$resource",function(e){return e(restServer+"rrhh-parametros/:idEmpresa",{idEmpresa:"@id"},{update:{method:"PUT"}})}]).factory("Parametros",["Parametro","$q",function(r,o){return function(e){var t=o.defer();return r.get({idEmpresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("RecursosHumanosFichasEmpleados",["$resource",function(e){return e(restServer+"recursos-humanos-fichas/empleados/:idEmpresa",{idEmpresa:"@id"})}]).factory("RecursosHumanosEmpleados",["RecursosHumanosFichasEmpleados","$q",function(r,o){return function(e){var t=o.defer();return r.get({idEmpresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("RecursosHumanosHorasEmpleados",["$resource",function(e){return e(restServer+"recursos-humanos/horas-extra/empleado-sueldo/:id_ficha/gestion/:gestion/mes/:mes/empleado/:id_empleado")}]).factory("RecursosHumanosEmpleadosHorasExtras",["RecursosHumanosHorasEmpleados","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_ficha:e,gestion:t,mes:r,id_empleado:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("RecursosHumanosPlanillaSueldos",["$resource",function(e){return e(restServer+"rrhh-planilla-sueldos/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("RRHHPlanillaSueldos",["$resource",function(e){return e(restServer+"rrhh-planilla-sueldos/:id_empresa/gestion/:gestion/mes/:mes")}]).factory("RRHHlistaPlanillaSueldos",["RRHHPlanillaSueldos","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_empresa:e,gestion:t,mes:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("RecursosHumanosPlanillaRCIVA",["$resource",function(e){return e(restServer+"rrhh-planilla-rc-iva/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("RRHHPlanillaRCIVARuta",["$resource",function(e){return e(restServer+"rrhh-planilla-rc-iva/valid/:id_empresa/gestion/:gestion/mes/:mes")}]).factory("RRHHlistaPlanillaRCIVA",["RRHHPlanillaRCIVARuta","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_empresa:e,gestion:t,mes:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("RutaRRHHPlanillaRCIVA",["$resource",function(e){return e(restServer+"rrhh-planilla-rc-iva/:id_empresa/gestion/:gestion/mes/:mes")}]).factory("ListaRRHHPlanillaRCIVA",["RutaRRHHPlanillaRCIVA","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_empresa:e,gestion:t,mes:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]),angular.module("agil.servicios").factory("obtenerPersonal",["$resource",function(e){return e(restServer+"todo/personal/:id_empresa",{},{update:{method:"PUT"}})}]).factory("ObtenerTodoPersonal",["obtenerPersonal","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("filtroEvaluaciones",["$resource",function(e){return e(restServer+"personal/filtro/:id_empresa/:mes/:anio/:desempenio/:mas_campo/:campo/:cargo/:estado/:codigo/:nombre/:apellido/:pagina/:items_pagina/:columna/:direccion/fiu",{},{update:{method:"PUT"}})}]).factory("ObtenerEvaluaciones",["filtroEvaluaciones","$q",function(o,a){return function(e){var t=a.defer(),r={id_empresa:e.filter.id_empresa,mes:void 0!==e.filter.mes.id?e.filter.mes.id:""!=e.filter.mes?e.filter.mes:0,anio:void 0!==e.filter.anio.id?e.filter.anio.id:""!=e.filter.anio?e.filter.anio:0,desempenio:e.filter.desempenio&&void 0!==e.filter.desempenio.id?e.filter.desempenio.id:0,mas_campo:""!=e.filter.mas_campo?e.filter.mas_campo:0,campo:void 0!==e.filter.campo.id?e.filter.campo.id:0,cargo:void 0!==e.filter.cargo.id?e.filter.cargo.id:0,estado:void 0!==e.filter.estado.id?e.filter.estado.id:0,codigo:""==e.filter.codigo?0:e.filter.codigo,nombre:""==e.filter.nombre?0:e.filter.nombre,apellido:""==e.filter.apellido?0:e.filter.apellido,pagina:e.currentPage,items_pagina:e.itemsPerPage,columna:e.column,direccion:e.direction};return o.get(r,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("EvaluacionPersonal",["$resource",function(e){return e(restServer+"evaluacion/personal/:id_empresa",{},{update:{method:"PUT"}})}]).factory("GuardarEvaluacionPersonal",["EvaluacionPersonal","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ActualizarEvaluacionPersonal",["EvaluacionPersonal","$q",function(o,a){return function(e,t){var r=a.defer();return o.update({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ReporteMeses",["$resource",function(e){return e(restServer+"reportes/:desde_mes/:desde_anio/:hasta_mes/:hasta_anio/:id_empresa",{},{update:{method:"PUT"}})}]).factory("ObtenerReportePorMeses",["ReporteMeses","$q",function(n,c){return function(e,t,r,o,a){var i=c.defer();return n.get({id_empresa:a,desde_mes:e.id,desde_anio:t.id,hasta_mes:r.id,hasta_anio:o.id},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}]).factory("ReporteAnual",["$resource",function(e){return e(restServer+"reportes/anual/:anio/campos/:id_empresa",{},{update:{method:"PUT"}})}]).factory("ObtenerReportePorAnio",["ReporteAnual","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({anio:e,id_empresa:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ReporteAnualCampo",["$resource",function(e){return e(restServer+"reportes/anual/:anio/:campo/:id_empresa",{},{update:{method:"PUT"}})}]).factory("ObtenerReporteGeneralPorAnio",["ReporteAnualCampo","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({anio:e,campo:t.id,id_empresa:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("configuracionCalificacion",["$resource",function(e){return e(restServer+"evaluacion/configuracion/:id_empresa",{},{update:{method:"PUT"}})}]).factory("GuardarConfiguracionCalificacion",["configuracionCalificacion","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ObtenerConfiguracionCalificacion",["configuracionCalificacion","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("configuracionDesempenio",["$resource",function(e){return e(restServer+"desempenio/configuracion/:id_empresa/sufra",{},{update:{method:"PUT"}})}]).factory("GuardarConfiguracionDesempenio",["configuracionDesempenio","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ObtenerConfiguracionDesempenio",["configuracionDesempenio","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]),angular.module("agil.servicios").factory("Producto",["$resource",function(e){return e(restServer+"productos/:idProducto",{idProducto:"@id"},{update:{method:"PUT"}})}]).factory("DatosProducto",["Producto","$q",function(r,o){return function(e){var t=o.defer();return r.get({idProducto:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ListaProductosKardex",["$resource",function(e){return e(restServer+"productos/kardex/empresa/:id_empresa/almacen/:id_almacen/grupo/:grupo")}]).factory("ReporteProductosKardex",["ListaProductosKardex","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empresa:e,id_almacen:t.almacen,grupo:t.grupo},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ProductosKardex",["$resource",function(e){return e(restServer+"productos/kardex/:id_producto/almacen/:id_almacen/fecha-inicial/:fecha_inicio/fecha-final/:fecha_fin/lote/:lote/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion",null,{update:{method:"PUT"}})}]).factory("ProductoKardex",["ProductosKardex","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_producto:e.filter.id_producto,id_almacen:e.filter.id_almacen,fecha_inicio:e.filter.fecha_inicio,fecha_fin:e.filter.fecha_fin,lote:e.filter.lote,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ProductosEmpresaCreacion",["$resource",function(e){return e(restServer+"productos/empresa")}]).factory("ProductosEmpresaCreacionFormulacion",["$resource",function(e){return e(restServer+"productos/formulacion/empresa/:id_empresa")}]).factory("GuardarProductosFormulacion",["ProductosEmpresaCreacionFormulacion","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ProductosEmpresa",["$resource",function(e){return e(restServer+"productos/empresa/:idEmpresa")}]).factory("ProductosEmpresaUsuario",["$resource",function(e){return e(restServer+"productos/empresa/:idEmpresa/user/:id_usuario")}]).factory("Productos",["ProductosEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({idEmpresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ProductosUsuario",["ProductosEmpresaUsuario","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({idEmpresa:e,id_usuario:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ProductosEmpresaPaginador",["$resource",function(e){return e(restServer+"productos/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion/grupo/:id_grupo/user/:id_usuario")}]).factory("ProductosPaginador",["ProductosEmpresaPaginador","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_empresa:e,pagina:t.currentPage,items_pagina:t.itemsPerPage,texto_busqueda:t.search,columna:t.column,direccion:t.direction,id_grupo:t.filter.id,id_usuario:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("BusquedaProductos",["$resource",function(e){return e(restServer+"productos/empresa/:idEmpresa/almacen/:idAlmacen/texto/:texto")}]).factory("ProductosNombre",["BusquedaProductos","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.query({idEmpresa:e,idAlmacen:t,texto:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("BusquedaProductosPanel",["$resource",function(e){return e(restServer+"productos-panel/empresa/:idEmpresa/almacen/:idAlmacen/user/:id_usuario")}]).factory("ProductosPanel",["BusquedaProductosPanel","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.query({idEmpresa:e,idAlmacen:t,id_usuario:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("VencimientoProductoEmpresa",["$resource",function(e){return e(restServer+"vencimientos-productos/:id_empresa")}]).factory("VencimientosProductosEmpresa",["VencimientoProductoEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CodigoSiguienteProductoEmpresa",["$resource",function(e){return e(restServer+"producto/empresa/:id_empresa/siguiente-codigo")}]).factory("DatoCodigoSiguienteProductoEmpresa",["CodigoSiguienteProductoEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CatalogoProductosEmpresa",["$resource",function(e){return e(restServer+"catalogo-productos/empresa/:id_empresa/grupo/:id_grupo/user/:id_usuario")}]).factory("CatalogoProductos",["CatalogoProductosEmpresa","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_empresa:e,id_grupo:t.id,id_usuario:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ProductosEmpresaPaginadorSubgrupos",["$resource",function(e){return e(restServer+"productos/asignacion/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion/subgrupo/:id_subgrupo/user/:id_usuario")}]).factory("ProductosPaginadorSubgrupos",["ProductosEmpresaPaginadorSubgrupos","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_empresa:e,pagina:t.currentPage,items_pagina:t.itemsPerPage,texto_busqueda:t.search,columna:t.column,direccion:t.direction,id_subgrupo:t.filter.id,id_usuario:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ProductosAsignadosPaginadorProveedor",["$resource",function(e){return e(restServer+"productos/asignados/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion/subgrupo/:id_subgrupo/user/:id_usuario/:ids")}]).factory("ProductosPaginadorAsignados",["ProductosAsignadosPaginadorProveedor","$q",function(n,c){return function(e,t,r,o,a){var i=c.defer();return n.get({id_empresa:e,pagina:t.currentPage,items_pagina:a?0:t.itemsPerPage,texto_busqueda:t.search,columna:t.column,direccion:t.direction,id_subgrupo:t.filter.id,id_usuario:r,ids:o},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}]),angular.module("agil.servicios").factory("Proformas",["$resource",function(e){return e(restServer+"proformas/empresa/:id_empresa/mes/:mes/anio/:anio/suc/:sucursal/act/:actividad/ser/:servicio/monto/:monto/razon/:razon/usuario/:usuario/pagina/:pagina/items-pagina/:items_pagina/busqueda/:busqueda/num/:numero/facturas/:id_opcion",{},{update:{method:"PUT"}})}]).factory("GenerarProformas",["$resource",function(e){return e(restServer+"guardar/proforma/:id_empresa/:usuario",{update:{method:"PUT"}})}]).factory("FiltroProformas",["Proformas","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,usuario:e.filter.usuario,mes:0!==e.filter.mes&&void 0!==e.filter.mes?void 0!==e.filter.mes.id?e.filter.mes.id:e.filter.mes:0,anio:0!==e.filter.anio&&void 0!==e.filter.anio?void 0!==e.filter.anio.id?e.filter.anio.id:e.filter.anio:0,sucursal:void 0!==e.filter.sucursal.id?e.filter.sucursal.id:0,actividad:void 0!==e.filter.actividadEconomica&&void 0!==e.filter.actividadEconomica.id_actividad?e.filter.actividadEconomica.id_actividad:0,monto:e.filter.monto,razon:e.filter.razon,servicio:void 0!==e.filter.servicio.id?e.filter.servicio.id:0,pagina:e.currentPage,items_pagina:e.itemsPerPage,busqueda:e.search,numero:void 0!==e.filter.numero?e.filter.numero:0,id_opcion:void 0!==e.filter.proformaFacturadas&&e.filter.proformaFacturadas.id?e.filter.proformaFacturadas.id:0},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("GuardarProformas",["GenerarProformas","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_empresa:e,usuario:t},r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ActividadEmpresa",["$resource",function(e){return e(restServer+"actividades/empresa/:id_empresa",{},{update:{method:"PUT"}})}]).factory("ActividadesEmpresa",["ActividadEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("GuardarActividadesEmpresa",["ActividadEmpresa","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ActividadServicio",["$resource",function(e){return e(restServer+"actividades/servicios/empresa/:id_empresa/:id_actividad",{},{update:{method:"PUT"}})}]).factory("ServiciosEmpresa",["ActividadServicio","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,id_actividad:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("GuardarActividadServicio",["ActividadServicio","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e,id_actividad:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("Proforma",["$resource",function(e){return e(restServer+"proforma/:id",{},{update:{method:"PUT"}})}]).factory("ProformasDetail",["$resource",function(e){return e(restServer+"proformas/:ids",{},{update:{method:"PUT"}})}]).factory("ActualizarProforma",["Proforma","$q",function(o,a){return function(e,t){var r=a.defer();return o.update({id:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ProformasInfo",["ProformasDetail","$q",function(r,o){return function(e){var t=o.defer();return r.get({ids:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ProformaInfo",["Proforma","$q",function(r,o){return function(e){var t=o.defer();return r.get({id:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("fechasProforma",["$resource",function(e){return e(restServer+"fechas/proforma/:id",{},{update:{method:"PUT"}})}]).factory("eliminarProforma",["$resource",function(e){return e(restServer+"eliminar/proforma/:id",{},{update:{method:"PUT"}})}]).factory("ProformaEliminar",["eliminarProforma","$q",function(r,o){return function(e){var t=o.defer();return r.save({id:e.id},e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("alertasProformasLista",["alertas","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:null!=e&&""!==e?e:0},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("alertas",["$resource",function(e){return e(restServer+"alertas/proformas/:id_empresa",{},{update:{method:"PUT"}})}]).factory("alertasProformasLista",["alertas","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:null!=e&&""!==e?e:0},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("FacturarProformas",["$resource",function(e){return e(restServer+"proforma/facturar/:id_empresa",{},{update:{method:"PUT"}})}]).factory("FacturaProforma",["FacturarProformas","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("DetallesProformasAFacturar",["$resource",function(e){return e(restServer+"detalles/proforma/facturar/:id_empresa",{},{update:{method:"PUT"}})}]).factory("ListaDetallesProformasAFacturar",["DetallesProformasAFacturar","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("listaProformasFacturadas",["$resource",function(e){return e(restServer+"factura/:id_factura/proforma/facturada/:id_empresa",{},{update:{method:"PUT"}})}]).factory("ProformasFacturadas",["listaProformasFacturadas","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,id_factura:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("configuracionFacturaEmpresa",["$resource",function(e){return e(restServer+"configuracion/proforma/facturar/:id_empresa",{},{update:{method:"PUT"}})}]).factory("ConfiguracionesFacturasProformas",["configuracionFacturaEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("sucursalesEmpresa",["$resource",function(e){return e(restServer+"sucursales/empresa/:id_empresa",{},{update:{method:"PUT"}})}]).factory("ListaSucursalesEmpresa",["sucursalesEmpresa","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ActividadesServiciosEmpresa",["$resource",function(e){return e(restServer+"actividades/servicios/:id_empresa",{},{update:{method:"PUT"}})}]).factory("ListaSucursalesActividadesDosificacionEmpresa",["ActividadesServiciosEmpresa","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("proformaSucursalesUsuario",["$resource",function(e){return e(restServer+"proforma-sucursales/:id_usuario",{},{update:{method:"PUT"}})}]).factory("ListaSucursalesUsuario",["proformaSucursalesUsuario","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_usuario:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("actividadesHistorial",["$resource",function(e){return e(restServer+"actividades/historial/:id/:id_sucursal",{},{update:{method:"PUT"}})}]).factory("ListaHistorialActividad",["actividadesHistorial","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id:e,id_sucursal:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("asignacionCentroCostosCliente",["$resource",function(e){return e(restServer+"clientes/centroCostos/:id_cliente",{update:{method:"PUT"}})}]).factory("obtenerAsignacionCentroCosto",["asignacionCentroCostosCliente","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_cliente:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("GuardarAsignacionCentroCosto",["asignacionCentroCostosCliente","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_cliente:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]),angular.module("agil.servicios").factory("ProveedorVencimientoCredito",["$resource",function(e){return e(restServer+"proveedor-vencimiento-Deudas/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Proveedor",["$resource",function(e){return e(restServer+"proveedores/:idProveedor",{idProveedor:"@id"},{update:{method:"PUT"}})}]).factory("EliminarProveedor",["Proveedor","$q",function(r,o){return function(e){var t=o.defer();return r.delete({idProveedor:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ProveedoresEmpresaPaginador",["$resource",function(e){return e(restServer+"proveedor/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda")}]).factory("ProveedoresPaginador",["ProveedoresEmpresaPaginador","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,pagina:t,items_pagina:r,texto_busqueda:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("ProveedoresEmpresa",["$resource",function(e){return e(restServer+"proveedores/empresa/:idEmpresa")}]).factory("Proveedores",["ProveedoresEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({idEmpresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("BusquedaProveedoresNit",["$resource",function(e){return e(restServer+"proveedores/empresa/:idEmpresa/texto/:texto")}]).factory("ProveedoresNit",["BusquedaProveedoresNit","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({idEmpresa:e,texto:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ObtenerProductosProveedor",["$resource",function(e){return e(restServer+"proveedores/productos/empresa/:id_empresa/:id_proveedor",null)}]).factory("ListaProductosProveedores",["ObtenerProductosProveedor","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,id_proveedor:t.id},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("AsignarProductosProveedor",["$resource",function(e){return e(restServer+"proveedores/productos/empresa/:id_empresa",null)}]).factory("ActualizarProductosProveedor",["AsignarProductosProveedor","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_empresa:e},{id_proveedor:r.id,productos:t},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]),angular.module("agil.servicios").factory("UsuarioRhOtroSeguro",["$resource",function(e){return e(restServer+"recursos-humanos-seguro/:id_seguro",{id_seguro:"@id_seguro"},{update:{method:"PUT"}})}]).factory("EliminarOtroSeguroRh",["UsuarioRhOtroSeguro","$q",function(r,o){return function(e){var t=o.defer();return r.update({id_seguro:e.id},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("UsuarioRhfamiliar",["$resource",function(e){return e(restServer+"recursos-humanos-familiar/:id_persona/familiar-relacion/:id_familiar",{id_persona:"@id_persona",id_familiar:"@id_familiar"},{update:{method:"PUT"}})}]).factory("EliminarFamiliarRh",["UsuarioRhfamiliar","$q",function(r,o){return function(e){var t=o.defer();return r.update({id_persona:e.persona.id,id_familiar:e.id},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("RecursosHumanosEmpresaPaginador",["$resource",function(e){return e(restServer+"recursos-humanos/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion/codigo/:codigo/nombres/:nombres/ci/:ci/campo/:campo/cargo/:cargo/busquedaEmpresa/:busquedaEmpresa/grupo/:grupo_sanguineo/estado/:estado/apellido/:apellido")}]).factory("RecursosHumanosPaginador",["RecursosHumanosEmpresaPaginador","$q",function(n,c){return function(e){var t=null==e.filter.grupo_sanguineo?e.filter.grupo_sanguineo=0:e.filter.grupo_sanguineo,r=null==e.filter.cargo?e.filter.cargo=0:e.filter.cargo,o=null==e.filter.estado?e.filter.estado=0:e.filter.estado,a=null==e.filter.apellido?e.filter.apellido=0:e.filter.apellido,i=c.defer();return n.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction,codigo:e.filter.codigo,nombres:e.filter.nombres,ci:e.filter.ci,campo:e.filter.campo,cargo:r,busquedaEmpresa:e.filter.busquedaEmpresa,estado:o,grupo_sanguineo:t,apellido:a},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}]).factory("NuevoRecursoHumano",["$resource",function(e){return e(restServer+"recursos-humanos/:id_usuario",{id_usuario:"@id_usuario"},{update:{method:"PUT"}})}]).factory("UsuarioRhActivo",["$resource",function(e){return e(restServer+"usuario-recurso-humano/:id_empleado",null,{update:{method:"PUT"}})}]).factory("UsuarioRecursosHUmanosActivo",["UsuarioRhActivo","$q",function(r,o){return function(e){var t=o.defer();return r.update({id_empleado:e.id},e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("obtenerEmpleadoRh",["NuevoRecursoHumano","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_usuario:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("UsuarioRhFicha",["$resource",function(e){return e(restServer+"usuario-recurso-humano-ficha/empleado/:id_empleado",null,{update:{method:"PUT"}})}]).factory("UsuarioRecursosHumanosFicha",["UsuarioRhFicha","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empleado:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("bitacoraFicha",["$resource",function(e){return e(restServer+"recursos-humanos/bitacora-ficha/usuario/:id",null,{update:{method:"PUT"}})}]).factory("GuardarBitacoraFicha",["bitacoraFicha","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("VerBitacoraFicha",["bitacoraFicha","$q",function(r,o){return function(e){var t=o.defer();return r.query({id:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CrearEmpleadoFicha",["UsuarioRhFicha","$q",function(r,o){return function(e){var t=o.defer();return r.save({id_empleado:0},e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("HistorialFicha",["$resource",function(e){return e(restServer+"usuario-ficha/:id_empleado",{id_empleado:"@id_empleado"},{update:{method:"PUT"}})}]).factory("UsuarioRhHistorialFicha",["HistorialFicha","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empleado:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("UsuarioHojaVida",["$resource",function(e){return e(restServer+"usuario-hoja-vida/:id_empleado",{id_empleado:"@id_empleado"},{update:{method:"PUT"}})}]).factory("ObtenerEmpleadoHojaVida",["UsuarioHojaVida","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empleado:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("GuardarEmpleadoHojaVida",["UsuarioHojaVida","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empleado:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("Prestamo",["$resource",function(e){return e(restServer+"recursos-humanos/prestamo/empleado/:id_empleado",{id_empleado:"@id_empleado"},{update:{method:"PUT"}})}]).factory("CrearPrestamo",["Prestamo","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empleado:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("HistorialPrestamos",["$resource",function(e){return e(restServer+"recursos-humanos/prestamos/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion/plazo/:plazo/inicio/:inicio/fin/:fin/nombre/:nombre/cuenta-liquida/:cuentas_liquidas",{update:{method:"PUT"}})}]).factory("ObtenerListaPrestamo",["HistorialPrestamos","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction,plazo:e.filter.plazo,inicio:e.filter.inicio,fin:e.filter.fin,nombre:e.filter.nombre,cuentas_liquidas:e.filter.cuentas_liquidas},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("RolTurno",["$resource",function(e){return e(restServer+"recursos-humanos/rolTurno/empleado/:id_empleado",{id_empleado:"@id_empleado"},{update:{method:"PUT"}})}]).factory("CrearRolTurno",["RolTurno","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empleado:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("PagoPrestamo",["$resource",function(e){return e(restServer+"recursos-humanos/pago-prestamo/:id_prestamo/usuario/:id_usuario",{id_prestamo:"@id_prestamo",id_usuario:"@id_usuario"},{update:{method:"PUT"}})}]).factory("CrearPagoPrestamo",["PagoPrestamo","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_prestamo:t,id_usuario:e},r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("EditPrestamo",["$resource",function(e){return e(restServer+"recursos-humanos/prestamo/:id_prestamo",{id_prestamo:"@id_prestamo"},{update:{method:"PUT"}})}]).factory("EditarPrestamo",["EditPrestamo","$q",function(r,o){return function(e){var t=o.defer();return r.update({id_prestamo:e.id},e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ListEmpleados",["$resource",function(e){return e(restServer+"recursos-humanos/empleados/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("ListaEmpleadosRrhh",["ListEmpleados","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("EmpleadoEmpresa",["$resource",function(e){return e(restServer+"empleados/empresa/excel/upload")}]).factory("FichasEmpleadoEmpresa",["$resource",function(e){return e(restServer+"fichas/empleados/empresa/excel/upload")}]).factory("FamiliaresEmpleadoEmpresa",["$resource",function(e){return e(restServer+"familiares/empleados/empresa/excel/upload")}]).factory("HorasExtra",["$resource",function(e){return e(restServer+"recursos-humanos/horas-extra/empleado/:id_empleado",{id_empleado:"@id_empleado"},{update:{method:"PUT"}})}]).factory("CrearHorasExtra",["HorasExtra","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empleado:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("EmpleadoHorasExtra",["$resource",function(e){return e(restServer+"recursos-humanos/horas-extra/empleado/:id_empleado/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("HistorialHorasExtra",["EmpleadoHorasExtra","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empleado:e,inicio:t.inicio,fin:t.fin},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ListRolTurnoEmpleados",["$resource",function(e){return e(restServer+"recursos-humanos/empresa/:id_empresa/rolTurno/empleado/:id_empleado",null,{update:{method:"PUT"}})}]).factory("ListaRolTurnos",["ListRolTurnoEmpleados","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,id_empleado:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ListRolTurnoEmpleadosCalendario",["$resource",function(e){return e(restServer+"recursos-humanos/empresa/:id_empresa/rolTurnoCalendario/inicio/:inicio/fin/:fin/pagina/:pagina/items_pagina/:items_pagina/texto_busqueda/:texto_busqueda/columna/:columna/direccion/:direccion/grupo/:grupo/nombre/:nombre/campo/:campo",null,{update:{method:"PUT"}})}]).factory("ListaRolTurnosCalendario",["ListRolTurnoEmpleadosCalendario","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,inicio:e.filter.inicio,fin:e.filter.fin,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction,grupo:e.filter.grupo,nombre:e.filter.nombre,campo:e.filter.campo},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ValidarCodigoCuentaEmpleado",["$resource",function(e){return e(restServer+"validar-codigo-empleado/empresa/:id_empresa",{update:{method:"PUT"}})}]).factory("CapacidadesEmpleado",["$resource",function(e){return e(restServer+"recurso-humanos/capacidades/hoja-vida/:id_hoja_vida/inicio/:inicio/fin/:fin/tipo/:tipo",null,{update:{method:"PUT"}})}]).factory("DatosCapacidadesImpresion",["CapacidadesEmpleado","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_hoja_vida:t,inicio:e.inicio,fin:e.fin,tipo:e.tipo},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ConfiguracionVacaciones",["$resource",function(e){return e(restServer+"recursos-humanos/configuracion/vacacion",null,{update:{method:"PUT"}})}]).factory("ConfiguracionesVacacion",["ConfiguracionVacaciones","$q",function(e,r){return function(){var t=r.defer();return e.query(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("HistorialGestionVacacion",["$resource",function(e){return e(restServer+"recursos-humanos/historial/gestion/vacacion/empleado/:id",null,{update:{method:"PUT"}})}]).factory("HistorialGestionesVacacion",["HistorialGestionVacacion","$q",function(r,o){return function(e){var t=o.defer();return r.query({id:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("GuardarHistorialVacacion",["HistorialGestionVacacion","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("EmpleadoAnticipo",["$resource",function(e){return e(restServer+"recursos-humanos/anticipos/empleado/:id_empleado",null,{update:{method:"PUT"}})}]).factory("NuevoAnticipoEmpleado",["EmpleadoAnticipo","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empleado:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ActualizarAnticipoEmpleado",["EmpleadoAnticipo","$q",function(o,a){return function(e,t){var r=a.defer();return o.update({id_empleado:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("CrearEmpleadosAnticipos",["$resource",function(e){return e(restServer+"recursos-humanoss/anticipos/empleados",null,{update:{method:"PUT"}})}]).factory("CrearNuevosAnticiposEmpleados",["CrearEmpleadosAnticipos","$q",function(r,o){return function(e){var t=o.defer();return r.save(null,e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("EmpleadosAnticipos",["$resource",function(e){return e(restServer+"recursos-humanos/anticipos/empleado/:id_empleado/inicio/:inicio/fin/:fin/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ListaAnticiposEmpleado",["EmpleadosAnticipos","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empleado:t,inicio:e.inicio,fin:e.fin,id_empresa:e.id_empresa},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("EmpleadoAusencia",["$resource",function(e){return e(restServer+"recursos-humanos/ausencia/empleado/:id_empleado",null,{update:{method:"PUT"}})}]).factory("NuevaAusenciaEmpleado",["EmpleadoAusencia","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empleado:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("EmpleadoListaAusencias",["$resource",function(e){return e(restServer+"recursos-humanos/ausencias/empleado/:id_empleado/inicio/:inicio/fin/:fin/tipo-ausencia/:tipo_ausencia/tipo/:tipo",null,{update:{method:"PUT"}})}]).factory("HistorialEmpleadoAusencias",["EmpleadoListaAusencias","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.query({id_empleado:e,inicio:t.inicio,fin:t.fin,tipo_ausencia:t.tipo_ausencia,tipo:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("EmpresaListaAusencias",["$resource",function(e){return e(restServer+"recursos-humanos/ausencias/empresa/:id_empresa/inicio/:inicio/fin/:fin/tipo-ausencia/:tipo_ausencia/tipo/:tipo",null,{update:{method:"PUT"}})}]).factory("HistorialEmpresaEmpleadosAusencias",["EmpresaListaAusencias","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.query({id_empresa:e,inicio:t.inicio,fin:t.fin,tipo_ausencia:t.tipo_ausencia,tipo:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("EmpleadoVacacion",["$resource",function(e){return e(restServer+"recursos-humanos/vacacion/empleado/:id_empleado",null,{update:{method:"PUT"}})}]).factory("NuevaVacacionEmpleado",["EmpleadoVacacion","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empleado:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("EmpleadoListaVacaciones",["$resource",function(e){return e(restServer+"recursos-humanos/vacacion/empleado/:id_empleado/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("HistorialEmpleadoVacaciones",["EmpleadoListaVacaciones","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empleado:e,inicio:t.inicio,fin:t.fin},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("EmpresaListaVacaciones",["$resource",function(e){return e(restServer+"recursos-humanos/vacacion/empresa/:id_empresa/inicio/:inicio/fin/:fin/estado/:estado",null,{update:{method:"PUT"}})}]).factory("HistorialEmpresaVacaciones",["EmpresaListaVacaciones","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empresa:e,inicio:t.inicio,fin:t.fin,estado:t.estado},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("EmpresaFeriados",["$resource",function(e){return e(restServer+"recursos-humanos/vacacion/feriados/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("NuevoFeriado",["EmpresaFeriados","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_empresa:e},{feriados:t,feriadosEliminados:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ListaFeriados",["EmpresaFeriados","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ClasesAusencias",["$resource",function(e){return e(restServer+"recursos-humanos/ausencia/clases/tipo/:tipo",null,{update:{method:"PUT"}})}]).factory("GuardarClasesAusencias",["ClasesAusencias","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({tipo:t},e,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("Tr3",["$resource",function(e){return e(restServer+"recursos-humanos/tr3/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("GuardarTr3",["Tr3","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:t},e,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ListaTr3",["$resource",function(e){return e(restServer+"recursos-humanos/tr3/empresa/:id_empresa/banco/:nombre",null,{update:{method:"PUT"}})}]).factory("ListaTr3Empresa",["ListaTr3","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empresa:e,nombre:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("NuevoBeneficioSocial",["$resource",function(e){return e(restServer+"recursos-humanos/beneficios/ficha/:id",null,{update:{method:"PUT"}})}]).factory("FiniquitoEmpleado",["$resource",function(e){return e(restServer+"recursos-humanos/beneficio/ficha/:id",null,{update:{method:"PUT"}})}]).factory("CrearBeneficioSocial",["NuevoBeneficioSocial","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id:t},e,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ListaBeneficiosEmpleado",["NuevoBeneficioSocial","$q",function(r,o){return function(e){var t=o.defer();return r.query({id:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ObtenerFiniquitoEmpleado",["FiniquitoEmpleado","$q",function(r,o){return function(e){var t=o.defer();return r.get({id:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ConfiguracionRopa",["$resource",function(e){return e(restServer+"recursos-humanos/configuracion-ropa-trabajo/cargo/:id_cargo",null,{update:{method:"PUT"}})}]).factory("GuardarConfiguracionRopaCargo",["ConfiguracionRopa","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_cargo:t},e,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ListaConfiguracionRopaCargo",["ConfiguracionRopa","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_cargo:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ReporteConfiguracionRopa",["$resource",function(e){return e(restServer+"reporte/configuracion/ropa-trabajo/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("DatosReporteConfiguracionRopa",["ReporteConfiguracionRopa","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CargosEmpleado",["$resource",function(e){return e(restServer+"recursos-humanos/cargos/empleado/:id_ficha",null,{update:{method:"PUT"}})}]).factory("ListaCargosEmpleado",["CargosEmpleado","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_ficha:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("RopaTrabajoProductos",["$resource",function(e){return e(restServer+"recursos-humanos/ropa-trabajo/productos/subgrupos/:subgrupos",null,{update:{method:"PUT"}})}]).factory("ListaRopaTrabajoProductos",["RopaTrabajoProductos","$q",function(r,o){return function(e){var t=o.defer();return r.query({subgrupos:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CrearDotacionRopa",["$resource",function(e){return e(restServer+"recursos-humanos/ropa-trabajo/empleado/:id_empleado",null,{update:{method:"PUT"}})}]).factory("GuardarDotacionRopa",["CrearDotacionRopa","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empleado:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("DotacionRopaActualizar",["$resource",function(e){return e(restServer+"recursos-humanos/ropa-trabajo/actualizar/empleado/:id_empleado",null,{update:{method:"PUT"}})}]).factory("ActualizarDotacionRopa",["DotacionRopaActualizar","$q",function(o,a){return function(e,t){var r=a.defer();return o.update({id_empleado:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("BuscarRopasTrabajoEmpleado",["$resource",function(e){return e(restServer+"recursos-humanos/ropa-trabajo/empleado/:id_empleado/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("ListaDotacionRopa",["BuscarRopasTrabajoEmpleado","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empleado:e,inicio:t.inicio,fin:t.fin},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("EliminarDotacionRopa",["CrearDotacionRopa","$q",function(r,o){return function(e){var t=o.defer();return r.update({id_empleado:0},e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("BuscarRopasTrabajoEmpresa",["$resource",function(e){return e(restServer+"recursos-humanos/ropa-trabajo/empresa/:id_empresa/inicio/:inicio/fin/:fin/campamento/:campamento",null,{update:{method:"PUT"}})}]).factory("ListaDotacionRopaEmpresa",["BuscarRopasTrabajoEmpresa","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empresa:e,inicio:t.inicio,fin:t.fin,campamento:t.campo},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("FiltroRolTurno",["$resource",function(e){return e(restServer+"recursos-humanos/empresa/:id_empresa/rolTurno/inicio/:inicio/fin/:fin/grupo/:grupo/pagina/:pagina/items/:items_pagina/campo/:campo/texto_busqueda/:texto_busqueda/direccion/:direccion/columna/:columna",{id_empleado:"@id_empleado"},{update:{method:"PUT"}})}]).factory("ListaRolTurnosEmpresa",["FiltroRolTurno","$q",function(r,o){return function(e){var t=o.defer();return r.get({grupo:e.filter.grupo,campo:e.filter.campo,id_empresa:e.filter.empresa,inicio:e.filter.inicio,fin:e.filter.fin,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ChoferesViaje",["$resource",function(e){return e(restServer+"recursos-humanos/choferes/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ListaChoferesViaje",["ChoferesViaje","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ViajeRrhh",["$resource",function(e){return e(restServer+"recursos-humanos/viaje/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("GuardarViajeRrhh",["ViajeRrhh","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:t},e,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ViajesRrhh",["$resource",function(e){return e(restServer+"recursos-humanos/viaje/empresa/:id_empresa/inicio/:inicio/fin/:fin/tipoPasajero/:tipoPasajero/destino/:destino/vehiculo/:vehiculo/conductor/:conductor/tipoViaje/:tipoViaje/pagina/:pagina/items_pagina/:items_pagina/texto_busqueda/:texto_busqueda/columna/:columna/direccion/:direccion",null,{update:{method:"PUT"}})}]).factory("ListaViajeRrhh",["ViajesRrhh","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,inicio:e.filter.inicio,fin:e.filter.fin,tipoPasajero:e.filter.tipoPasajero,destino:e.filter.destino,vehiculo:e.filter.vehiculo,conductor:e.filter.conductor,tipoViaje:e.filter.tipoViaje,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ListaViajesRrhh",["$resource",function(e){return e(restServer+"recursos-humanos/viaje/empresa/:id_empresa/inicio/:inicio/fin/:fin/destino/:destino/vehiculo/:vehiculo/conductor/:conductor/relevo/:relevo/pagina/:pagina/items_pagina/:items_pagina/texto_busqueda/:texto_busqueda/columna/:columna/direccion/:direccion",null,{update:{method:"PUT"}})}]).factory("ViajeRrhhLista",["ListaViajesRrhh","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,inicio:e.filter.inicio,fin:e.filter.fin,destino:e.filter.destino,vehiculo:e.filter.vehiculo,conductor:e.filter.conductor,relevo:e.filter.relevo,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ListaBeneficioEmpresa",["$resource",function(e){return e(restServer+"recursos-humanos/beneficio/empresa/:id_empresa/tipo/:tipo/inicio/:inicio/fin/:fin/motivo/:motivo/pagina/:pagina/items_pagina/:items_pagina/texto_busqueda/:texto_busqueda/columna/:columna/direccion/:direccion",null,{update:{method:"PUT"}})}]).factory("BeneficioEmpresa",["ListaBeneficioEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,inicio:e.filter.inicio,fin:e.filter.fin,motivo:e.filter.motivo,tipo:e.filter.tipo,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("SaveConductoresEmpresa",["$resource",function(e){return e(restServer+"recursos-humanos/conductor/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("GuardarConductoresEmpresa",["SaveConductoresEmpresa","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ListaHijosEmpresa",["$resource",function(e){return e(restServer+"recursos-humanos-familiar/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ListaHijosEmpleadosEmpresa",["ListaHijosEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ImportacionFichaEmpleados",["$resource",function(e){return e(restServer+"empleados/empresa/:id_empresa/fichas/excel/upload",null,{update:{method:"PUT"}})}]).factory("GuardarImportacionFichaEmpleados",["ImportacionFichaEmpleados","$q",function(m,p){return function(e,t,r,o,a,i,n,c,s,u,d,l){var f=p.defer();return m.save({id_empresa:t},{fichas:e,arregloAporteAfp:r,arregloLugarAfp:o,arregloLugarSeguroSalud:a,arregloTipoPersona:i,arregloCargaHorario:n,arregloArega:c,arregloUbicacion:s,arregloEstadoCivil:u,arregloOtrosSeguros1:d,arregloOtrosSeguros2:l},function(e){f.resolve(e)},function(e){f.reject(e)}),f.promise}}]).factory("ImportacionRolTurnoEmpleados",["$resource",function(e){return e(restServer+"empleados/empresa/:id_empresa/rolTurnos/tipo/:tipo/excel/upload",null,{update:{method:"PUT"}})}]).factory("GuardarImportacionRolTurnoEmpleados",["ImportacionRolTurnoEmpleados","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.save({id_empresa:t,tipo:r},e,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]),angular.module("agil.servicios").factory("ReportEstadoCuentasProveedoresDatos",["$resource",function(e){return e(restServer+"reportes/estado-cuentas-proveedores/:id_empresa",{},{show:{method:"GET",isArray:!0}})}]).factory("ReportEstadoCuentasClientesDatos",["$resource",function(e){return e(restServer+"reportes/estado-cuentas-clientes/:id_empresa",{},{show:{method:"GET",isArray:!0}})}]).factory("ReportEstadoCuentasClientesPaginador",["$resource",function(e){return e(restServer+"reportes/estado-cuentas-clientes/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/cuentas-liquidadas/:cuentas_liquidadas")}]).factory("ReporteClientesPaginador",["ReportEstadoCuentasClientesPaginador","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,cuentas_liquidadas:e.filter.cuentas_liquidadas},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ReporteLibroCompras",["$resource",function(e){return e(restServer+"reportes/libro-compras/:id_empresa/gestion/:gestion/mes/:mes")}]).factory("ReporteLibroComprasDatos",["ReporteLibroCompras","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.get({id_empresa:e,gestion:t,mes:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("ReporteLibroVentas",["$resource",function(e){return e(restServer+"reportes/libro-ventas/:id_empresa/gestion/:gestion/mes/:mes/movimiento/:id_movimiento")}]).factory("ReporteLibroVentasDatos",["ReporteLibroVentas","$q",function(i,n){return function(e,t,r,o){o||(o=0);var a=n.defer();return i.get({id_empresa:e,gestion:t,mes:r,id_movimiento:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("InventarioCosto",["$resource",function(e){return e(restServer+"reportes/inventario/empresa/:id_empresa/sucursal/:id_sucursal/almacen/:id_almacen",null,{update:{method:"PUT"}})}]).factory("InventariosCosto",["InventarioCosto","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.query({id_empresa:e,id_sucursal:t,id_almacen:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]).factory("InventarioAlmacenPaginador",["$resource",function(e){return e(restServer+"reportes/empresa/:id_empresa/sucursal/:id_sucursal/almacen/:id_almacen/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion/user/:id_usuario")}]).factory("InventarioPaginadorAlmacen",["InventarioAlmacenPaginador","$q",function(d,l){return function(e,t,r,o,a,i,n,c,s){var u=l.defer();return d.get({id_empresa:e,id_sucursal:t,id_almacen:r,pagina:o,items_pagina:a,texto_busqueda:i,columna:n,direccion:c,id_usuario:s},function(e){u.resolve(e)},function(e){u.reject(e)}),u.promise}}]).factory("InventarioAlmacenReporte",["$resource",function(e){return e(restServer+"reportes/empresa/:id_empresa/sucursal/:id_sucursal/almacen/:id_almacen/user/:id_usuario")}]).factory("InventarioReporteAlmacen",["InventarioAlmacenReporte","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,id_sucursal:t,id_almacen:r,id_usuario:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("ReporteVentasMensuales",["$resource",function(e){return e(restServer+"reportes/ventas-mensuales/:id_empresa/sucursal/:id_sucursal/inicio/:inicio/fin/:fin")}]).factory("ReporteVentasMensualesDatos",["ReporteVentasMensuales","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,id_sucursal:t,inicio:r,fin:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("ReporteComprasMensuales",["$resource",function(e){return e(restServer+"reportes/compras-mensuales/:id_empresa/sucursal/:id_sucursal/inicio/:inicio/fin/:fin")}]).factory("ReporteComprasMensualesDatos",["ReporteComprasMensuales","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,id_sucursal:t,inicio:r,fin:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("ReporteEstadoResultadosNoContable",["$resource",function(e){return e(restServer+"ventas/:id_empresa/inicio/:inicio/fin/:fin",null,{update:{method:"PUT"}})}]).factory("ReporteEstadoResultadosNoContableDatos",["ReporteEstadoResultadosNoContable","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.query({id_empresa:e,inicio:t,fin:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]),angular.module("agil.servicios").factory("Ruta",["$resource",function(e){return e(restServer+"rutas/:idRuta",{idRuta:"@id"},{update:{method:"PUT"}})}]).factory("RutasEmpresa",["$resource",function(e){return e(restServer+"rutas/empresa/:idEmpresa")}]).factory("Rutas",["RutasEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({idEmpresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]),angular.module("agil.servicios").factory("BusquedaProductosEmpresa",["$resource",function(e){return e(restServer+"productos/empresa/:idEmpresa/texto/:texto")}]).factory("ListaProductosEmpresa",["BusquedaProductosEmpresa","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({idEmpresa:e,texto:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("BusquedaProductosEmpresaUsuario",["$resource",function(e){return e(restServer+"productos/empresa/:idEmpresa/texto/:texto/user/:id_usuario/almacen/:id_almacen")}]).factory("ListaProductosEmpresaUsuario",["BusquedaProductosEmpresaUsuario","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.query({idEmpresa:e,texto:t,id_usuario:r,id_almacen:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("InventariosProducto",["$resource",function(e){return e(restServer+"inventarios/producto/:id_producto/almacen/:id_almacen")}]).factory("ListaInventariosProducto",["InventariosProducto","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_producto:e,id_almacen:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ConfiguracionVentaVista",["$resource",function(e){return e(restServer+"empresas/:id_empresa/configuracion-venta-vista",null,{update:{method:"PUT"}})}]).factory("ConfiguracionVentaVistaDatos",["ConfiguracionVentaVista","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ConfiguracionCompraVista",["$resource",function(e){return e(restServer+"empresas/:id_empresa/configuracion-compra-vista",null,{update:{method:"PUT"}})}]).factory("ConfiguracionCompraVistaDatos",["ConfiguracionCompraVista","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("GruposProductoEmpresa",["$resource",function(e){return e(restServer+"grupos/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ListaGruposProductoEmpresa",["GruposProductoEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("GruposProductoUsuario",["$resource",function(e){return e(restServer+"grupos/empresa/:id_empresa/user/:id_usuario",null,{update:{method:"PUT"}})}]).factory("ListaGruposProductoUsuario",["GruposProductoUsuario","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empresa:e,id_usuario:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("VendedorVenta",["$resource",function(e){return e(restServer+"vendedor-venta/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ListaVendedorVenta",["VendedorVenta","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("VendedorVentaActualizacion",["$resource",function(e){return e(restServer+"vendedor-venta/:id_vendedor",{id_vendedor:"@id"},{update:{method:"PUT"}})}]).factory("SubGruposProductoEmpresa",["$resource",function(e){return e(restServer+"subgrupos/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("ListaSubGruposProductoEmpresa",["SubGruposProductoEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("InventariosProductosVentaEdicion",["$resource",function(e){return e(restServer+"inventarios-venta-edicion/producto/:id_producto/almacen/:id_almacen/fecha/:fecha")}]).factory("ListaInventariosProductoVentaEdicion",["InventariosProductosVentaEdicion","$q",function(a,i){return function(e,t,r){var o=i.defer();return a.query({id_producto:e,id_almacen:t,fecha:r},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}]),angular.module("agil.servicios").factory("UsuariosRutas",["$resource",function(e){return e(restServer+"usuarios-rutas/empresa/:id_empresa/inicio/:inicio/fin/:fin/usuario/:usuario/ruta/:ruta")}]).factory("UsuariosRutasLista",["UsuariosRutas","$q",function(n,c){return function(e,t,r,o,a){var i=c.defer();return n.query({id_empresa:e,inicio:t,fin:r,usuario:o,ruta:a},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}]),angular.module("agil.servicios").factory("SolicitudCajaChica",["$resource",function(e){return e(restServer+"solicitud-caja-chica",null,{update:{method:"PUT"}})}]).factory("GuardarSolicitudCajaChica",["SolicitudCajaChica","$q",function(r,o){return function(e){var t=o.defer();return r.save(e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ConceptoMovimientoCajaChica",["$resource",function(e){return e(restServer+"solicitud-conceptos-caja-chica/empresa/:id_empresa",null,{update:{method:"PUT"}})}]).factory("GuardarConceptoMovimientoCajaChica",["ConceptoMovimientoCajaChica","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:e},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("ObtenerConceptoMovimientoCajaChica",["ConceptoMovimientoCajaChica","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empresa:e},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("SolicitudCajaChicaPaginador",["$resource",function(e){return e(restServer+"solocitudes-caja-chica/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion/solicitante/:solicitante/usuario/:usuario/estado/:estado/concepto/:concepto/movimiento/:movimiento/usuario-no-autorizado/:id_usuario_no_autorizado")}]).factory("SolicitudesCajaPaginador",["SolicitudCajaChicaPaginador","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction,solicitante:e.filter.solicitante,usuario:e.filter.usuario,estado:e.filter.estado,concepto:e.filter.concepto,movimiento:e.filter.movimiento,id_usuario_no_autorizado:e.filter.id_usuario_no_autorizado},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("CajaChicaPaginador",["$resource",function(e){return e(restServer+"caja-chica/sucursal/:id_sucursal/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion/solicitante/:solicitante/usuario/:usuario/estado/:estado/concepto/:concepto/movimiento/:movimiento/usuario-no-autorizado/:id_usuario_no_autorizado/rendiciones/:rendiciones")}]).factory("SolicitudesCajaChicaPaginador",["CajaChicaPaginador","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction,solicitante:e.filter.solicitante,usuario:e.filter.usuario,estado:e.filter.estado,concepto:e.filter.concepto,movimiento:e.filter.movimiento,id_usuario_no_autorizado:e.filter.id_usuario_no_autorizado,id_sucursal:e.filter.id_sucursal,rendiciones:e.filter.rendiciones},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("IngresosCajaChicaPaginador",["$resource",function(e){return e(restServer+"caja-chica/sucursal/:id_sucursal/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion")}]).factory("IngresosCajaPaginador",["IngresosCajaChicaPaginador","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction,id_sucursal:e.filter.id_sucursal},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("DatosGuardarCajaChica",["$resource",function(e){return e(restServer+"caja-chica/:id_empresa",null,{update:{method:"PUT"}})}]).factory("GuardarCajaChica",["DatosGuardarCajaChica","$q",function(o,a){return function(e,t){var r=a.defer();return o.save({id_empresa:t},e,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("DatosCierreCaja",["$resource",function(e){return e(restServer+"caja-chica/sucursal/:id_sucursal/empresa/:id_empresa/fecha/:fecha/saldoInicial/:saldo",null,{update:{method:"PUT"}})}]).factory("ObtenerDatosCierreCaja",["DatosCierreCaja","$q",function(i,n){return function(e,t,r,o){var a=n.defer();return i.get({id_empresa:e,fecha:t,saldo:r,id_sucursal:o},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}]).factory("CierreCajaChicaPaginador",["$resource",function(e){return e(restServer+"cierre-caja-chica/sucursal/:id_sucursal/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion")}]).factory("CierreCajaCPaginador",["CierreCajaChicaPaginador","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction,id_sucursal:e.filter.id_sucursal},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("AlertasCajaChica",["$resource",function(e){return e(restServer+"alertas-solicitud-caja-chica/empresa/:id_empresa/historico/:historico/mes/:mes/anio/:anio/verificador/:id_verificador",null,{update:{method:"PUT"}})}]).factory("ObtenerAlertasCajaChica",["AlertasCajaChica","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empresa:e.id_empresa,historico:e.historico?1:0,mes:""==e.mes?0:e.mes,anio:""==e.anio?0:e.anio,id_verificador:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("VerificacionCajaChica",["$resource",function(e){return e(restServer+"verificar-solicitudes-caja-chica",null,{update:{method:"PUT"}})}]).factory("GuardarVerificadorSolicitud",["VerificacionCajaChica","$q",function(o,a){return function(e,t){var r=a.defer();return o.update({},t,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]),angular.module("agil.servicios").factory("Sucursal",["$resource",function(e){return e(restServer+"sucursales/:idSucursal",{idSucursal:"@id"},{update:{method:"PUT"}})}]).factory("Sucursalupdate",["$resource",function(e){return e(restServer+"configuracion/factura/sucursal/:idSucursal",{idSucursal:"@id"},{update:{method:"PUT"}})}]).factory("ConfiguracionFacturaSucursal",["$resource",function(e){return e(restServer+"sucursal/:idSucursal",{idSucursal:"@id"},{update:{method:"PUT"}})}]).factory("SucursalesEmpresa",["$resource",function(e){return e(restServer+"sucursales/empresa/:idEmpresa")}]).factory("Sucursales",["SucursalesEmpresa","$q",function(r,o){return function(e){var t=o.defer();return r.query({idEmpresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("Sucursalesupdate",["$resource",function(e){return e(restServer+"configuracion/factura/sucursales/empresa/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("VerificarCorrelativosSucursale",["Sucursalesupdate","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ReiniciarCorrelativo",["$resource",function(e){return e(restServer+"reiniciar-correlativo/sucursales",null,{update:{method:"PUT"}})}]).factory("ReiniciarCorrelativoSucursales",["ReiniciarCorrelativo","$q",function(r,o){return function(e){var t=o.defer();return r.update(e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]),angular.module("agil.servicios").factory("datosVehiculo",["$resource",function(e){return e(restServer+"mantenimiento-vehiculo/empresa/:id_empresa/Mantenimiento/:id_mantenimiento",null,{update:{method:"PUT"}})}]).factory("ObtenerDatosVehiculo",["datosVehiculo","$q",function(o,a){return function(e,t){var r=a.defer();return o.get({id_empresa:e,id_mantenimiento:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("NuevaOrdenDeTrabajo",["$resource",function(e){return e(restServer+"orden-de-trabajo/empresa",null,{update:{method:"PUT"}})}]).factory("GuardarNuevaOrdendeTrabajo",["NuevaOrdenDeTrabajo","$q",function(r,o){return function(e){var t=o.defer();return r.save(e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("ActualizarOrdendeTrabajo",["NuevaOrdenDeTrabajo","$q",function(r,o){return function(e){var t=o.defer();return r.update(e,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("Vehiculos",["$resource",function(e){return e(restServer+"vehiculos/empresa/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("ListaFechasVehiculos",["$resource",function(e){return e(restServer+"orden-de-trabajo/empresa/:id_empresa/correctivo/:correctivo/preventivo/:preventivo/rutina/:rutina/entrega/:entrega",null,{update:{method:"PUT"}})}]).factory("DatosFechasVehiculos",["ListaFechasVehiculos","$q",function(r,o){return function(e){var t=o.defer();return r.query({id_empresa:e.id_empresa,correctivo:e.correctivo,preventivo:e.preventivo,rutina:e.rutina,entrega:e.entrega},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("VehiculosEmpresaPaginador",["$resource",function(e){return e(restServer+"mantenimiento/vehiculo/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion/inicio/:inicio/fin/:fin/tipo_activo/:tipo_activo/placa/:placa/marca/:marca/modelo/:modelo/anio/:anio/tipo_mantenimiento/:tipo_mantenimiento/numero_ot/:numero_ot/estado_ot/:estado_ot/campamento/:campamento",null,{update:{method:"PUT"}})}]).factory("VehiculosPaginador",["VehiculosEmpresaPaginador","$q",function(r,o){return function(e){var t=o.defer();return r.get({id_empresa:e.filter.empresa,pagina:e.currentPage,items_pagina:e.itemsPerPage,texto_busqueda:e.search,columna:e.column,direccion:e.direction,inicio:e.filter.inicio,fin:e.filter.fin,tipo_activo:e.filter.tipo_activo,placa:e.filter.placa,marca:e.filter.marca,modelo:e.filter.modelo,anio:e.filter.anio,tipo_mantenimiento:e.filter.tipo_mantenimiento,numero_ot:e.filter.numero_ot,estado_ot:e.filter.estado_ot,campamento:e.filter.campamento},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]).factory("MantenimientoVehiculo",["$resource",function(e){return e(restServer+"mantenimiento-vehiculo/empresa/:id_empresa/busqueda/:buscar",{id_empresa:"@id_empresa",buscar:"@buscar"},{update:{method:"PUT"}})}]).factory("ListaMantenimientoVehiculo",["MantenimientoVehiculo","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empresa:e,buscar:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]).factory("MantenimientoEncargado",["$resource",function(e){return e(restServer+"mantenimiento-encargado/empresa/:id_empresa/busqueda/:buscar",{id_empresa:"@id_empresa",buscar:"@buscar"},{update:{method:"PUT"}})}]).factory("ListaMantenimientoEncargado",["MantenimientoEncargado","$q",function(o,a){return function(e,t){var r=a.defer();return o.query({id_empresa:e,buscar:t},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}]);