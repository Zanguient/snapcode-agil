angular.module("agil.servicios").factory("Sesion",["$http","$window","$localStorage",function(r,e,i){var u=restServer;function o(r){if(r){var e=r.replace("-","+").replace("_","/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}return window.atob(e)}}var a=function(){var r=i.token,e={};if(void 0!==r){var u=r.split(".")[1];e=o(u)?JSON.parse(o(u)):""}return e}();return{save:function(e,i,o){r.post(u+"register",e).success(i).error(o)},iniciarSesion:function(e,i,o){r.post(u+"autenticar",e).success(i).error(o)},me:function(e,i){r.get(u+"me").success(e).error(i)},cerrarSesion:function(r){var i;i={},angular.extend(a,i),e.localStorage.clear(),r()}}}]).factory("Usuario",["$resource",function(r){return r(restServer+"usuarios/:id_usuario",{id_usuario:"@id"},{update:{method:"PUT"}})}]).factory("validarUsuario",["$resource",function(r){return r(restServer+"/validar",{update:{method:"PUT"}})}]).factory("Usuarios",["Usuario","$q",function(r,e){return function(){var i=e.defer();return r.query(function(r){i.resolve(r)},function(r){i.reject(r)}),i.promise}}]).factory("UsuarioEmpresaPaginador",["$resource",function(r){return r(restServer+"usuario/empresa/:id_empresa/pagina/:pagina/items-pagina/:items_pagina/busqueda/:texto_busqueda/columna/:columna/direccion/:direccion")}]).factory("UsuariosEmpresaPaginador",["UsuarioEmpresaPaginador","$q",function(r,e){return function(i){var u=0;null!=i.filter.empresa&&(u=i.filter.empresa);var o=e.defer();return r.get({id_empresa:u,pagina:i.currentPage,items_pagina:i.itemsPerPage,texto_busqueda:i.search,columna:i.column,direccion:i.direction},function(r){o.resolve(r)},function(r){o.reject(r)}),o.promise}}]).factory("UsuarioEmpresa",["$resource",function(r){return r(restServer+"usuarios/empresa/:id_empresa")}]).factory("UsuariosEmpresa",["UsuarioEmpresa","$q",function(r,e){return function(i){null==i&&(i=0);var u=e.defer();return r.query({id_empresa:i},function(r){u.resolve(r)},function(r){u.reject(r)}),u.promise}}]).factory("UsuarioRutas",["$resource",function(r){return r(restServer+"usuarios-rutas/:id_usuario",{id_usuario:"@id"},{update:{method:"PUT"}})}]).factory("UsuarioComision",["$resource",function(r){return r(restServer+"comision-productos-vendedor/empresa/:id_empresa/usuario/:id_usuario",{id_usuario:"@id_usuario",id_usuario:"@id_empresa"},{update:{method:"PUT"}})}]).factory("UsuarioComisiones",["UsuarioComision","$q",function(r,e){return function(i,u){null==u&&(u=0);var o=e.defer();return r.query({id_empresa:u,id_usuario:i},function(r){o.resolve(r)},function(r){o.reject(r)}),o.promise}}]).factory("UsuarioSucursalAutenticacion",["$resource",function(r){return r(restServer+"autenticar-sucursales/:id_usuario")}]).factory("UsuarioSucursalesAutenticacion",["UsuarioSucursalAutenticacion","$q",function(r,e){return function(i){var u=e.defer();return r.query({id_usuario:i},function(r){u.resolve(r)},function(r){u.reject(r)}),u.promise}}]).factory("UsuarioRutaSeguimiento",["$resource",function(r){return r(restServer+"rutas/seguimiento/usuario/:id_usuario/dia/:dia")}]).factory("UsuarioRutasSeguimiento",["UsuarioRutaSeguimiento","$q",function(r,e){return function(i,u){var o=e.defer();return r.query({id_usuario:i,dia:u},function(r){o.resolve(r)},function(r){o.reject(r)}),o.promise}}]).factory("UsuarioRutaReporte",["$resource",function(r){return r(restServer+"rutas/reporte/usuario/:id_usuario/ruta/:id_ruta/inicio/:inicio/fin/:fin/detalles-venta/:tipo")}]).factory("UsuarioRutaReporteDatos",["UsuarioRutaReporte","$q",function(r,e){return function(i,u,o,a,t){var n=e.defer();return r.query({id_usuario:i,inicio:u,fin:o,tipo:a,id_ruta:t},function(r){n.resolve(r)},function(r){n.reject(r)}),n.promise}}]).factory("UsuarioRutaGrafico",["$resource",function(r){return r(restServer+"rutas/grafico/usuario/:id_usuario/ruta/:id_ruta/inicio/:inicio/fin/:fin")}]).factory("UsuarioRutaGraficoDatos",["UsuarioRutaGrafico","$q",function(r,e){return function(i,u,o,a){var t=e.defer();return r.query({id_usuario:i,inicio:u,fin:o,id_ruta:a},function(r){t.resolve(r)},function(r){t.reject(r)}),t.promise}}]).factory("UsuarioComisionReporte",["$resource",function(r){return r(restServer+"usuarios-comisiones-reporte/empresa/:id_empresa/inicio/:inicio/fin/:fin")}]).factory("UsuariosComisionesReporte",["UsuarioComisionReporte","$q",function(r,e){return function(i,u,o){var a=e.defer();return r.query({id_empresa:i,inicio:u,fin:o},function(r){a.resolve(r)},function(r){a.reject(r)}),a.promise}}]).factory("CierreCajaRutaUsuario",["$resource",function(r){return r(restServer+"cierre-usuario-ruta/usuario/:id_usuario/dia/:dia")}]).factory("CierreCajaRutaUsuarioDatos",["CierreCajaRutaUsuario","$q",function(r,e){return function(i,u){var o=e.defer();return r.query({id_usuario:i,dia:u},function(r){o.resolve(r)},function(r){o.reject(r)}),o.promise}}]).factory("VistaColumnasAplicacion",["$resource",function(r){return r(restServer+"columnnas-aplicacion/aplicacion/:id_aplicacion",{id_aplicacion:"@id"},{update:{method:"PUT"}})}]).factory("VerificarUsuarioEmpresa",["$resource",function(r){return r(restServer+"verificar/usuarios/empresa/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("VerificarAutorizacionUsuarioEmpresa",["$resource",function(r){return r(restServer+"verificar-autorizacion/usuarios/empresa/:id_empresa",{id_empresa:"@id_empresa"},{update:{method:"PUT"}})}]).factory("VerificarUsuarioEmpresaCaja",["VerificarAutorizacionUsuarioEmpresa","$q",function(r,e){return function(i,u){null==i&&(i=0);var o=e.defer();return r.save({id_empresa:i},u,function(r){o.resolve(r)},function(r){o.reject(r)}),o.promise}}]).factory("UsarLectorDeBarra",["$resource",function(r){return r(restServer+"usar-lector-de-barra/usuario",null,{update:{method:"PUT"}})}]).factory("GuardarUsuarLectorDeBarra",["UsarLectorDeBarra","$q",function(r,e){return function(i){var u=e.defer();return r.update(i,function(r){u.resolve(r)},function(r){u.reject(r)}),u.promise}}]).factory("UsuarioSeleccionado",["$resource",function(r){return r(restServer+"usuario/:id_usuario",{id_usuario:"@id"},{update:{method:"PUT"}})}]).factory("ObtenerUsuario",["UsuarioSeleccionado","$q",function(r,e){return function(i){var u=e.defer();return r.get({id_usuario:i},function(r){u.resolve(r)},function(r){u.reject(r)}),u.promise}}]).factory("EliminarUsuario",["Usuario","$q",function(r,e){return function(i){var u=e.defer();return r.delete({id_usuario:i},function(r){u.resolve(r)},function(r){u.reject(r)}),u.promise}}]);