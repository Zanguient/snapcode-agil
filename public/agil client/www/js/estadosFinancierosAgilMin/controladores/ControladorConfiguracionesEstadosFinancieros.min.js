angular.module("agil.controladores").controller("ControladorConfiguracionesEstadosFinancieros",function(e,i,o,n,a,t,s,r,u,c,l,d){e.usuario=JSON.parse(i.usuario),e.idModalConfiguracionGestion="dialog-configuracion-gestiones",e.idModalDetalleImpresion="dialog-detalles-impesion",e.inicio=function(){e.obtenerTipoNumeracion(),e.obtenerGestionesEEFF()},e.$on("$viewContentLoaded",function(){resaltarPesta√±a(o.path().substring(1)),ejecutarScriptsConfiguracionEstadosFinacioneros(e.idModalConfiguracionGestion,e.idModalDetalleImpresion),e.buscarAplicacion(e.usuario.aplicacionesUsuario,o.path().substring(1)),t.stop()}),e.abrirModalConfiguracionGestion=function(){t.start(),e.gestionesEF=[],u(e.usuario.id_empresa).then(function(i){0<i.length?e.gestionesEF=i:e.ClasesGestionesEF.forEach(function(i,o,n){i={index:o,tipoGestion:i,inicio:"",fin:"",habilitado:!1};e.gestionesEF.push(i),o==n.length-1&&setTimeout(function(){aplicarDatePickers()},300)}),t.stop()}),e.abrirPopup(e.idModalConfiguracionGestion)},e.habilitarGestion=function(o){e.gestionesEF.forEach(function(i){i.id?i.id!=o.id&&(i.habilitado=!1):i.index!=o.index&&(i.habilitado=!1)})},e.cerrarModalConfiguracionGestion=function(){e.cerrarPopup(e.idModalConfiguracionGestion)},e.abrirModalDetalleImpresion=function(){e.configuracionImpresion={},d(e.usuario.id_empresa).then(function(i){i&&(i.fecha_emision=e.fechaATexto(i.fecha_emision),e.configuracionImpresion=i),t.stop()}),e.abrirPopup(e.idModalDetalleImpresion)},e.cerrarModalDetalleImpresion=function(){e.cerrarPopup(e.idModalDetalleImpresion)},e.obtenerTipoPeriodos=function(){t.start(),r("EEFF_TP").then(function(i){e.TiposPeriodos=i,t.stop()})},e.obtenerTipoNumeracion=function(){t.start(),r("NEEFF").then(function(i){e.TiposNumeraciones=i,t.stop()})},e.obtenerGestionesEEFF=function(){t.start(),s("GESTION_EEFF",e.usuario.id_empresa).then(function(i){e.ClasesGestionesEF=i.clases,t.stop()})},e.guardarConfiguracionImpresion=function(i){t.start(),i.fecha_emision=new Date(e.convertirFecha(i.fecha_emision)),l(e.usuario.id_empresa,i).then(function(i){e.mostrarMensaje(i.mensaje),t.stop()})},e.guardarGestionesEEFF=function(i){t.start(),c(e.usuario.id_empresa,i).then(function(i){e.mostrarMensaje(i.mensaje),t.stop()})},e.$on("$routeChangeStart",function(i,o){e.eliminarPopup(e.idModalConfiguracionGestion),e.eliminarPopup(e.idModalDetalleImpresion)}),e.inicio()});