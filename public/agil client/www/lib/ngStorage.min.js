!function(e,t){"use strict";if("function"!=typeof define||!define.amd)return t(e);define("ngStorage",["angular"],function(e){return t(e)})}("undefined"==typeof angular?null:angular,function(g){"use strict";function e(s){return["$rootScope","$window","$log","$timeout",function(t,o,n,e){var r,a,i=function(e){var t=o[e];if(t&&"localStorage"===e){var n="__"+Math.round(1e7*Math.random());try{localStorage.setItem(n,n),localStorage.removeItem(n)}catch(e){t=!1}}return t}(s)||(n.warn("This browser does not support Web Storage!"),{setItem:function(){},getItem:function(){}}),c={$default:function(e){for(var t in e)g.isDefined(c[t])||(c[t]=e[t]);return c},$reset:function(e){for(var t in c)"$"===t[0]||delete c[t];return c.$default(e)}};try{(i=o[s]).length}catch(e){n.warn("This browser does not support Web Storage!"),i={}}for(var u,f=0,l=i.length;f<l;f++)(u=i.key(f))&&"ngStorage-"===u.slice(0,10)&&(c[u.slice(10)]=g.fromJson(i.getItem(u)));return r=g.copy(c),t.$watch(function(){var n;a||(a=e(function(){if(a=null,!g.equals(c,r)){for(var e in n=g.copy(r),g.forEach(c,function(e,t){g.isDefined(e)&&"$"!==t[0]&&i.setItem("ngStorage-"+t,g.toJson(e)),delete n[t]}),n)i.removeItem("ngStorage-"+e);r=g.copy(c)}},100,!1))}),"localStorage"===s&&o.addEventListener&&o.addEventListener("storage",function(e){"ngStorage-"===e.key.slice(0,10)&&(e.newValue?c[e.key.slice(10)]=g.fromJson(e.newValue):delete c[e.key.slice(10)],r=g.copy(c),t.$apply())}),c}]}g.module("ngStorage",[]).factory("$localStorage",e("localStorage")).factory("$sessionStorage",e("sessionStorage"))});