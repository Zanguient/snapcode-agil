!function(t){"use strict";if("object"==typeof exports)module.exports=t("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js"));else if("function"==typeof define&&define.amd)define(["angular","chart"],t);else{if("undefined"==typeof angular||"undefined"==typeof Chart)throw new Error("Chart.js library needs to included, see http://jtblin.github.io/angular-chart.js/");t(angular,Chart)}}(function(t,r){"use strict";r.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",r.defaults.global.tooltips.mode="label",r.defaults.global.elements.line.borderWidth=2,r.defaults.global.elements.rectangle.borderWidth=2,r.defaults.global.legend.display=!1,r.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var a="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return a&&(r.defaults.global.animation=!1),t.module("chart.js",[]).provider("ChartJs",function(){var a={responsive:!0},e={Chart:r,getOptions:function(r){var e=r&&a[r]||{};return t.extend({},a,e)}};this.setOptions=function(r,e){if(!e)return e=r,void(a=t.extend(a,e));a[r]=t.extend(a[r]||{},e)},this.$get=function(){return e}}).factory("ChartJsFactory",["ChartJs","$timeout",function(e,n){return function(r){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?"},link:function(e,n){function i(a,c){if(!d(a)&&!t.equals(a,c)){var i=r||e.chartType;i&&o(i,e,n)}}a&&window.G_vmlCanvasManager.initElement(n[0]),e.$watch("chartData",function(t,a){if(!t||!t.length||Array.isArray(t[0])&&!t[0].length)return void g(e);var i=r||e.chartType;if(!i)return;if(e.chart&&function(t,r){if(t&&r&&t.length&&r.length)return Array.isArray(t[0])?t.length===r.length&&t.every(function(t,a){return t.length===r[a].length}):r.reduce(c,0)>0&&t.length===r.length;return!1}(t,a))return function(t,r){Array.isArray(r.chartData[0])?r.chart.data.datasets.forEach(function(r,a){r.data=t[a]}):r.chart.data.datasets[0].data=t;r.chart.update(),r.$emit("chart-update",r.chart)}(t,e);o(i,e,n)},!0),e.$watch("chartSeries",i,!0),e.$watch("chartLabels",i,!0),e.$watch("chartOptions",i,!0),e.$watch("chartColors",i,!0),e.$watch("chartDatasetOverride",i,!0),e.$watch("chartType",function(r,a){if(d(r))return;if(t.equals(r,a))return;o(r,e,n)},!1),e.$on("$destroy",function(){g(e)}),e.$on("$resize",function(){e.chart&&e.chart.resize()})}}};function o(a,c,l){var s,f,d=(s=a,f=c,t.extend({},e.getOptions(s),f.chartOptions));if((p=c).chartData&&p.chartData.length&&function(t,r,a,e){if(e.responsive&&0===a[0].clientHeight)return n(function(){o(t,r,a)},50,!1),!1;return!0}(a,c,l,d)){var p,C,v=l[0],y=v.getContext("2d");c.chartGetColor="function"==typeof(C=c).chartGetColor?C.chartGetColor:h;var b,m,w,D,B,A,$,F,k,j,J,O,G,x,E=($=function(a,n){var o=t.copy(n.chartColors||e.getOptions(a).chartColors||r.defaults.global.colors),c=o.length<n.chartData.length;for(;o.length<n.chartData.length;)o.push(n.chartGetColor());c&&(n.chartColors=o);return o.map(u)}(a,A=c),Array.isArray(A.chartData[0])?(F=A.chartLabels,k=A.chartData,j=A.chartSeries||[],J=$,O=A.chartDatasetOverride,{labels:F,datasets:k.map(function(r,a){var e=t.extend({},J[a],{label:j[a],data:r});return O&&O.length>=a&&t.merge(e,O[a]),e})}):(b=A.chartLabels,m=A.chartData,w=$,D=A.chartDatasetOverride,B={labels:b,datasets:[{data:m,backgroundColor:w.map(function(t){return t.pointBackgroundColor}),hoverBackgroundColor:w.map(function(t){return t.backgroundColor})}]},D&&t.merge(B.datasets[0],D),B));g(c),c.chart=new e.Chart(y,{type:a,data:E,options:d}),c.$emit("chart-create",c.chart),x=c,(G=v).onclick=x.chartClick?i(x,"chartClick",!1):t.noop,G.onmousemove=x.chartHover?i(x,"chartHover",!0):t.noop}}function c(t,r){return t+r}function i(r,a,e){var n=null;return function(o){var c=r.chart.getElementsAtEvent||r.chart.getPointsAtEvent;if(c){var i=c.call(r.chart,o);!1!==e&&!1!==t.equals(n,i)||(n=i,r[a](i,o))}}}function u(t){return"object"==typeof t&&null!==t?t:"string"==typeof t&&"#"===t[0]?l((r=t.substr(1),[(a=parseInt(r,16))>>16&255,a>>8&255,255&a])):h();var r,a}function h(){var t=[s(0,255),s(0,255),s(0,255)];return l(t)}function l(t){return{backgroundColor:f(t,.2),pointBackgroundColor:f(t,1),pointHoverBackgroundColor:f(t,.8),borderColor:f(t,1),pointBorderColor:"#fff",pointHoverBorderColor:f(t,1)}}function s(t,r){return Math.floor(Math.random()*(r-t+1))+t}function f(t,r){return a?"rgb("+t.join(",")+")":"rgba("+t.concat(r).join(",")+")"}function d(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}function g(t){t.chart&&(t.chart.destroy(),t.$emit("chart-destroy",t.chart))}}]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(t){return new t("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("polarArea")}]).directive("chartBubble",["ChartJsFactory",function(t){return new t("bubble")}]).name});