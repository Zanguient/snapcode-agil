<div class="container container-fluid">
	<div class='device-check visible-xs' data-device='xs'></div>
	<div class='device-check visible-sm' data-device='sm'></div>
	<div class='device-check visible-md' data-device='md'></div>
	<div class='device-check visible-lg' data-device='lg'></div>
	<div class="row ">
		<div class="col-xs-12">
			<h3 class="header smaller lighter blue">COTIZACIONES</h3>
			<!-- incluir ng-disabled="!aplicacion.puede_crear" en la sgte. linea-->
			<div><button id="nuevo" class="btn btn-primary" ng-click="crearNuevaCotizacion()">
							<i class="ace-icon fa fa-plus align-top bigger-125"></i>
							Nuevo
						</button></div><br>
			<form name="formularioFiltroCotizaciones" novalidate ng-submit="paginator.getSearch(filtro.busqueda,filtro,null)">
				<fieldset>
					<legend>Filtro Cotizaciones</legend>
					<!-- visible xs sm  -->
					<div class="hidden-lg hidden-md visible-xs-block">
						<div class="row form-group">
							<div class="row col-lg-2">
								<button type="submit" ng-disabled="formularioFiltroCotizaciones.$invalid" class="btn-primary btn btn-app btn-xs">
								<i class="ace-icon fa fa-search align-top bigger-125"></i>
								BUSCAR
							</button>
								<button id="pdf" ng-disabled="!Cotizaciones" class="btn btn-app btn-danger btn-xs" ng-click="imprimirFiltroCajaCartaOficio(Cotizaciones)">
								<i class="ace-icon fa fa-print bigger-160"></i>
								PDF
							</button>
								<button id="pdfa" ng-disabled="!Cotizaciones" class="btn btn-app btn-success btn-xs" ng-click="imprimirFiltroExcelCajaCartaOficio(Cotizaciones)">
								<i class="ace-icon fa fa-print bigger-160"></i>
								Excel
							</button>
							</div>
						</div>
						<div class="row form-group">
							<div class="row col-lg-2">
								<label for="filtro.inicio">Desde</label>&nbsp
							</div>
							<div class="row col-lg-2">
								<input ng-update-hidden class="form-control date-picker" type="text" data-date-format="dd/mm/yyyy" id="fechainicio" ng-change="establecerFechas(filtro.inicio,filtro.fin)"
								 ng-model="filtro.inicio" placeholder="Ingrese la fecha inicial" />
							</div>
							<div class="row col-lg-2">
								<label for="filtro.inicio">Hasta</label>&nbsp
							</div>
							<div class="row col-lg-2">
								<input ng-update-hidden class="form-control date-picker" type="text" data-date-format="dd/mm/yyyy" id="fechafin" ng-change="establecerFechas(filtro.inicio,filtro.fin)"
								 ng-model="filtro.fin" placeholder="Ingrese la fecha final" />
							</div>
						</div>
						<div class="row form-group">
							<div class="row col-lg-2">
								<label for="filtro.busqueda">Busqueda</label>&nbsp
							</div>
							<div class="row col-lg-2">
								<input class="form-control" type="text" ng-model="filtro.busqueda">
							</div>
							<div class="row col-lg-2">
								<label for="filtro.importe">Importe</label>&nbsp
							</div>
							<div class="row col-lg-2">
								<input class="form-control" type="number" ng-model="filtro.importe">
							</div>
						</div>
					</div>
				<!-- visible md lg	 -->
					<table class="table table-striped table-bordered table-hover hidden-xs hidden-sm visible-md-block visible-lg-block">
						<tbody>
							<tr>
								<td>

								</td>
								<td>
									<label>Desde</label>&nbsp
								</td>
								<td>
									<label>Hasta</label>&nbsp
								</td>
								<td>
								</td>
							</tr>
							<tr>
								<td>
									<label>PERIODO</label>&nbsp
								</td>
								<td>
									<input ng-update-hidden class="form-control date-picker" type="text" data-date-format="dd/mm/yyyy" id="fechainicioTab" ng-change="establecerFechas(filtro.inicio,filtro.fin)"
									 ng-model="filtro.inicio" placeholder="Ingrese la fecha inicial" />
								</td>
								<td>
									<input ng-update-hidden class="form-control date-picker" type="text" data-date-format="dd/mm/yyyy" id="fechafinTab" ng-change="establecerFechas(filtro.inicio,filtro.fin)"
									 ng-model="filtro.fin" placeholder="Ingrese la fecha final" /> &nbsp
								</td>
								<td>
									<button type="submit" ng-disabled="formularioFiltroCotizaciones.$invalid" class="btn-primary btn btn-app btn-xs">
														<i class="ace-icon fa fa-search align-top bigger-125"></i>
														BUSCAR
													</button>
									<button id="pdfb" ng-disabled="!Cotizaciones" class="btn btn-app btn-danger btn-xs" ng-click="imprimirFiltroCajaCartaOficio(Cotizaciones)">
														<i class="ace-icon fa fa-print bigger-160"></i>
														PDF
													</button>
									<button id="pdfc" ng-disabled="!Cotizaciones" class="btn btn-app btn-success btn-xs" ng-click="imprimirFiltroExcelCajaCartaOficio(Cotizaciones)">
														<i class="ace-icon fa fa-print bigger-160"></i>
														Excel
													</button>
								</td>
							</tr>
							<tr>
								<td>
									&nbsp
								</td>
								<!-- <td>
									<label>Busqueda</label>&nbsp
								</td> -->

								<td>
									<label>Importe</label>&nbsp
								</td>
							</tr>
							<tr>
								<td>
									FILTRO
								</td>
								<!-- <td>
									<input type="text" ng-model="filtro.busqueda">
								</td> -->
								<td>
									<input type="number" ng-model="filtro.importe">
								</td>
							</tr>
						</tbody>
					</table>
				</fieldset>
			</form>

			<!-- Vista principal de cotizaciones -->
			<div class="table-header">
				Cotizaciones
			</div>
			<!-- <div class="row form-group hidden-lg hidden-md visible-xs-block">
					<div class="row col-lg-2">
						<label for="filtro.busqueda">Ordenar por:</label>&nbsp
					</div>
					<div class="row col-lg-2">
						<select id="ordenarPor" ng-model="paginator.colum" ng-options="columna for columna in cotizacionModel" ng-change="paginator.sortColumn(paginator.colum,obtenerLista)"
						 value='cotizacionModel[0]' class="col-xs-10 col-sm-8">
									  </select>
					</div>
				</div> -->
			<!-- visible xs sm -->
			<div class="container visible-xs-block visible-sm-block hidden-lg hidden-md">
				<div class="row div-table" ng-repeat="cotizacion in cotizaciones">
					<div class="col col- col-sm-2 col-md-2 col-lg-2">
						<label class="blue"><a href="javascript:void(0)" ng-click="paginator.sortColumn('nombre',obtenerLista)">Nombre <span id="nombre" class="sort fa fa-sort icon-only"></span></a> </label>
						<p>{{cotizacion.nombre}}</p>
					</div>
					<div class="col col- col-sm-2 col-md-2 col-lg-2">
						<label class="blue"><a href="javascript:void(0)" ng-click="paginator.sortColumn('descripcion',obtenerLista)">Descripción <span id="descripcion" class="sort fa fa-sort icon-only"></span></a></label>
						<p>{{cotizacion.descripcion}}</p>
					</div>
					<div class="col col- col-sm-2 col-md-2 col-lg-2">
						<label class="blue"><a href="javascript:void(0)" ng-click="paginator.sortColumn('fecha',obtenerLista)">Fecha <span id="fecha" class="sort fa fa-sort icon-only"></span></a></label>
						<p>{{cotizacion.fecha | date:"dd/MM/yyyy"}}</p>
					</div>
					<div class="col col- col-sm-2 col-md-2 col-lg-2">
						<label class="blue"><a href="javascript:void(0)" ng-click="paginator.sortColumn('numero_documento',obtenerLista)">Número de documento <span id="numero_documento" class="sort fa fa-sort icon-only"></span></a></label>
						<p>{{cotizacion.numero_documento}}</p>
					</div>
					<div class="col col- col-sm-2 col-md-2 col-lg-2">
						<label class="blue"><a href="javascript:void(0)" ng-click="paginator.sortColumn('importe',obtenerLista)">Importe <span id="importe" class="sort fa fa-sort icon-only"></span></a></label>
						<p>{{cotizacion.importe}}</p>
					</div>
					<div class="col col- col-sm-2 col-md-2 col-lg-2">
						<label class="blue"><a href="javascript:void(0)" ng-click="paginator.sortColumn('id_usuario',obtenerLista)">Usuario <span id="usuario" class="sort fa fa-sort icon-only"></span></a> </label>
						<p>{{cotizacion.usuario.nombre_usuario}}</p>
					</div>
					<div class="col col- col-md-auto col-lg-2"><label>Acciones:</label>
						<a class="red" href="javascript:void(0)" ng-click="ModificarCotizacion(cotizacion)">
										<i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
									</a>
						<a class="green" href="javascript:void(0)" ng-click="imprimirCotizacion(cotizacion)">
												<i class="ace-icon fa fa-print bigger-130"></i>
										</a>
					</div>
				</div>
			</div>
		<!-- visible md lg xl -->
			<div id="tabla-productos_wrapper" class="dataTables_wrapper form-inline no-footer hidden-xs hidden-sm visible-md-block visible-lg-block" ng-if="cotizaciones.length > 0">
				<div class="row" ng-include src="'/templates/GRAL/paginator-header-1.html'">
				</div>
				<table id="tabla-cotizacion" class="table table-striped table-bordered table-hover">

					<thead>
						<tr>
							<th class="center"><a href="javascript:void(0)" ng-click="paginator.sortColumn('nombre',obtenerLista)">Nombre <span id="nombreTab" class="sort fa fa-sort icon-only"></span></a></th>
							<th class="center"><a href="javascript:void(0)" ng-click="paginator.sortColumn('descripcion',obtenerLista)">Descripción <span id="descripcionTab" class="sort fa fa-sort icon-only"></span></a></th>
							<th class="center"><a href="javascript:void(0)" ng-click="paginator.sortColumn('fecha',obtenerLista)">Fecha <span id="fechaTab" class="sort fa fa-sort icon-only"></span></a></th>
							<th class="center"><a href="javascript:void(0)" ng-click="paginator.sortColumn('numero_documento',obtenerLista)">Número de documento <span id="numero_documento" class="sort fa fa-sort icon-only"></span></a></th>
							<th class="center"><a href="javascript:void(0)" ng-click="paginator.sortColumn('importe',obtenerLista)">Importe <span id="importeTab" class="sort fa fa-sort icon-only"></span></a></th>
							<th class="center"><a href="javascript:void(0)" ng-click="paginator.sortColumn('usuario',obtenerLista)">Usuario <span id="usuarioTab" class="sort fa fa-sort icon-only"></span></a></th>
							<th class="center">Acciones</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="cotizacion in cotizaciones">
							<td>{{cotizacion.nombre}}</td>
							<td>{{cotizacion.descripcion}}</td>
							<td>{{cotizacion.fecha | date:"dd/MM/yyyy"}}</td>
							<td>{{cotizacion.numero_documento}}</td>
							<td>{{cotizacion.importe}}</td>
							<td>{{cotizacion.usuario.nombre_usuario}}</td>
							<td><a class="red" href="javascript:void(0)" ng-click="ModificarCotizacion(cotizacion)">
											<i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
										</a>
								<a class="green" href="javascript:void(0)" ng-click="imprimirCotizacion(cotizacion)">
													<i class="ace-icon fa fa-print bigger-130"></i>
											</a>
							</td>
						</tr>
					</tbody>
				</table>
				<!-- paginador de vista principal -->
				<div class="row" ng-include src="'/templates/GRAL/paginator.html'">
				</div>
			</div>
		</div>
	</div>
	<!-- col-xs-12 -->

</div>
<!-- fin de vista principal cotizaciones -->

<!-- Imodal de nueva cotizacion -->

<div class="container container-fluid form-inline">
	<div id="modal-wizard-cotizacion-nueva22" class="modal-wizard-posicion" style="overflow:visible !important;">
		<div class="row" style="overflow-y: auto">
			<div class="modal-body col-xs-12" style="overflow-y: visible !important;">
				<div class="row form-group col col- col-lg-4 col-md-6" style="overflow-y: auto">
					<!-- visible sm md lg xl -->
					<div class="widget-header">
						<h4 class="widget-title" ng-if="!cotizacion.id">Nueva Cotización</h4>
						<h4 class="widget-title" ng-if="cotizacion.id">Modificar Cotización</h4>
					</div>
					<form id="formularioCotizacion" name="formularioCotizacion" novalidate ng-submit="guardarCotizacion(formularioCotizacion.$valid,cotizacion)">
						<br>
						<div class="row form-group col-md-12 col-lg-8">
							<div class="col col-xs-4 col-sm-2 col-md-6 col-lg-6">
								<span>Nombre</span>
							</div>
							<div class="col col-xs-4 col-sm-2 col-md-6 col-lg-6">
								<input ng-keypress="interceptarTecla($event,'descripcion',true)" type="text" id="nombre" ng-model="cotizacion.nombre">
							</div>
						</div>
						<div class="row form-group col-md-12 col-lg-8">
							<div class="col col-xs-4 col-sm-2 col-md-6 col-lg-6">
								<span>Descripción</span>
							</div>
							<div class="col col-xs-4 col-sm-2 col-md-6 col-lg-6">
								<input ng-keypress="interceptarTecla($event,'sucursal',true)" id="descripcion" type="text" ng-model="cotizacion.descripcion">
							</div>
						</div>
						<div class="row form-group col-md-12 col-lg-8">
							<div class="col col-xs-4 col-sm-2 col-md-6 col-lg-6">
								<label>Sucursal</label>
							</div>
							<div class="col col-xs-4 col-sm-2 col-md-6 col-lg-6">
								<select required id="sucursal" ng-keypress="interceptarTecla($event,'fechaSM',true)" ng-options="sucursal.id as sucursal.nombre for sucursal in sucursales track by sucursal.id"
								 ng-model="cotizacion.sucursal"></select>
							</div>
						</div>
						<div class="row form-group col-md-12 col-lg-8">
							<div class="col col-xs-4 col-sm-2 col-md-6 col-lg-6">
								<span>Fecha</span>
							</div>
							<div class="col col-xs-4 col-sm-2 col-md-6 col-lg-6">
								<input ng-keypress="interceptarTecla($event,'id_productoTB',true)" class="date-picker" type="text" data-date-format="dd/mm/yyyy"
								 id="fechaSM" ng-model="cotizacion.fechaTexto" placeholder="Ingrese la fecha" />
							</div>
						</div>
						<br>
						<div class="row form-group col-md-12 col-lg-8">
							<div class="col col-sm-5 col-md-5 col-lg-5">
								<button id="guardarCotizacion" type="submit" ng-disabled="cotizacion.detallesCotizacion.length==0" class="btn btn-primary">
									<i class="ace-icon fa fa-floppy-o align-top bigger-125">GUARDAR</i>	
									</button>
							</div>
							<div class="col col-sm-2 col-md-2 col-lg-2"></div>
							<div class="col col-sm-5 col-md-5 col-lg-5">
								<button type="button" class="btn btn-primary btn-danger" ng-click="cerrarNuevaCotizacion()">
									<i class="ace-icon fa fa-times white align-top bigger-125">CERRAR</i>
									</button>
							</div>
						</div>
					</form>
				</div>
				<!-- busqueda de producto -->
				<!-- visible sm md lg-->
				<div class="row form-group col col-md-6 col-lg-8">
					<div class="widget-header">
						<h4 class="widget-title">Busqueda de producto</h4>
					</div>
					<form id="formularioBusquedaProductoCotizacion" name="formularioBusquedaProducto" novalidate>
						<div class="col col-sm-2 col-md-2 col-lg-2 hidden-lg hidden-md visible-sm-block visible-xs-block">
							<div class="row form-group">
								<div class="row col-lg-2">
									<label>PRODUCTO</label>
								</div>
								<!-- visible sm -->
								<div class="row col-lg-2">
									<input required ng-keypress="interceptarTecla($event,'cantidadSM',true)" id="id_producto" required type="text" ng-model="detalleCotizacion.producto.nombre"
									 placeholder="Ingrese el nombre del producto..." uib-typeahead="producto as (producto.codigo+'-'+producto.nombre+'-'+producto.grupo+'-'+producto.subgrupo) for producto in buscarProducto($viewValue)"
									 typeahead-wait-ms="1000" typeahead-template-url="templates/autocompletar.html" typeahead-show-hint="false" typeahead-min-length="3"
									 typeahead-on-select="establecerProducto($item, $model, $label, $event)">

									<button ng-disabled="!productoSeleccionado" id="agregar_detalle_cotizacion" type="button" ng-click="agregarDetalleCotizacion(detalleCotizacion)"
									 class="btn btn-success btn-sm">
												<i class="ace-icon fa fa-plus bigger-110"></i>
											</button>
								</div>
								<!-- <div class="row col-lg-2">
									
								</div> -->
							</div>
							<div ng-if="productoSeleccionado" class="blue">
								<div class="row form-group">
									<div class="col-xs-6">
										<label class="green">CÓD. ITEM</label>
									</div>
									<div class="col-xs-6">
										{{detalleCotizacion.producto.codigo}}
									</div>
								</div>
								<div class="row form-group">
									<div class="col-xs-6">
										<label class="green">UNID. MED.</label>
									</div>
									<div class="col-xs-6">
										{{detalleCotizacion.producto.unidad_medida}}
									</div>
								</div>
								<div class="row form-group">
									<div class="col-xs-6">
										<label class="green">P.U. (Bs/u)</label>
									</div>
									<div class="col-xs-6">
										{{detalleCotizacion.producto.precio_unitario}}
									</div>
								</div>
								<div class="row form-group">
									<div class="col-xs-6">
										<label class="green">CANT. (u)</label>
									</div>
									<div class="col-xs-6">
										<div class="row">
											<div class="col-sm-12">
												<input ng-keypress="interceptarTecla($event,'agregar_detalle_cotizacion',true)" id="cantidad" name="cantidad" step="0.001"
												 min="0.1" max="{{detalleCotizacion.inventario_disponible}}" required class="col-xs-12" ng-change="calcularImporte()"
												 ng-model="detalleCotizacion.cantidad" type="number" />
												<div ng-show="formularioBusquedaProductoCotizacion.cantidad.$dirty && formularioBusquedaProductoCotizacion.cantidad.$invalid">
													<span class="invalid-message">La cantidad debe estar entre 0.1 y {{detalleCotizacion.inventario_disponible}}.</span>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-sm-12">
												<a class="blue" href="javascript:void(0)" ng-click="establecerPrecio()">
																<i class="ace-icon fa fa-check-square-o bigger-130"></i>
															</a>
											</div>
										</div>
									</div>
								</div>
								<div class="row form-group">
									<div class="col-xs-6">
										<label class="green">IMP. (Bs)</label>
									</div>
									<div class="col-xs-6">
										{{detalleCotizacion.importe}}
									</div>
								</div>
							</div>
						</div>

						<!-- visible en md lg xl  -->
						<table class="table table-striped table-bordered table-hover hidden-xs hidden-sm visible-md-block visible-lg-block">
							<thead>
								<tr>
									<th>
										<label>PRODUCTO</label>
									</th>
									<th>
										<label>CÓD. ITEM</label>
									</th>
									<th>
										<label>UNID. MED.</label>
									</th>
									<th>
										<label>P.U. (Bs/u)</label>
									</th>
									<th>
										<label>CANT. (u)</label>
									</th>
									<th>
										<label>IMP. (Bs)</label>
									</th>
									<th>
										<label>ACC.</label>
									</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td class="col-md-2">
										<input  required ng-keypress="interceptarTecla($event,'cantidadTB',true)" id="id_productoTB" required type="text" ng-model="detalleCotizacion.producto.nombre"
										 placeholder="Ingrese el nombre del producto..." uib-typeahead="producto as (producto.codigo+'-'+producto.nombre+'-'+producto.grupo+'-'+producto.subgrupo) for producto in buscarProducto($viewValue)"
										 typeahead-wait-ms="1000" typeahead-template-url="templates/autocompletar.html" typeahead-show-hint="false" typeahead-min-length="3"
										 typeahead-on-select="establecerProducto($item, $model, $label, $event)">

										<div class="space-6"></div>
										<!-- <button id="mostrar_inv" type="button" ng-click="abrirPopupInventario()" class="btn btn-info btn-sm">
													<i class="ace-icon fa fa-search-plus bigger-110"></i>
												</button>
										<span class="red" ng-if="!detalleCotizacion.producto.activar_inventario">Inventario Desactivado</span> -->
									</td>
									<td class="col-md-2">
										{{detalleCotizacion.producto.codigo}}
									</td>
									<td class="col-md-2">
										{{detalleCotizacion.producto.unidad_medida}}
									</td>
									<td ng-if="!editar_precio">
										<div clas="row">
											<div class="col-sm-12">
												{{detalleCotizacion.precio_unitario}}
											</div>
										</div>
										<!-- <div clas="row">
											<div class="col-sm-12">
												<a class="green" href="javascript:void(0)" e-disabled="!aplicacion.puede_modificar" ng-click="modificarPrecio()">
															<i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
														</a>
											</div>
										</div> -->
									</td>
									<td ng-if="editar_precio">
										<div class="row">
											<div class="col-sm-12">
												<input required ng-disabled name="precio_unitario" step="0.001" min="0.1" required class="col-xs-12" ng-change="calcularImporte()"
												 ng-model="detalleCotizacion.precio_unitario" type="number" />
											</div>
										</div>
										<div class="row">
											<div class="col-sm-12">
												<a class="blue" href="javascript:void(0)" ng-click="establecerPrecio()">
															<i class="ace-icon fa fa-check-square-o bigger-130"></i>
														</a>
											</div>
										</div>
									</td>
									<td>
										<input onfocus="this.select();" ng-keypress="interceptarTecla($event,'agregar_detalle_cotizacionTB',true)" id="cantidadTB"
										 name="cantidad" step="0.001" min="0.1" max="{{detalleCotizacion.inventario_disponible}}" required class="col-xs-12"
										 ng-change="calcularImporte()" ng-model="detalleCotizacion.cantidad" type="number" />
										<div ng-show="formularioBusquedaProducto.cantidad.$dirty && formularioBusquedaProducto.cantidad.$invalid">
											<span class="invalid-message">La cantidad debe estar entre 0.1 y {{detalleCotizacion.inventario_disponible}}.</span>
										</div>
									</td>

									<td>
										{{detalleCotizacion.importe}}
									</td>

									<td>
										<button ng-disabled="!productoSeleccionado" ng-keypress="interceptarTecla($event,'id_productoTB',true)" id="agregar_detalle_cotizacionTB" type="button" ng-click="agregarDetalleCotizacion(detalleCotizacion)"
										 class="btn btn-success btn-sm">
													<i class="ace-icon fa fa-plus bigger-110"></i>
												</button>
										<div class="space-6"></div>
										<!-- <button id="mostrar_desc" type="button" ng-click="mostrarDescuentos()" class="btn btn-info btn-sm">
													<i class="ace-icon fa fa-exchange bigger-110"></i>
												</button> -->
									</td>
								</tr>
								<tr class="des-datos" style="display:none;">
									<td>
										<input ng-disabled="detalleCotizacion.producto.descuento_fijo" required ng-change="calcularImporte()" ng-model="detalleCotizacion.descuento"
										 ng-value="detalleCotizacion.producto.descuento" step="0.001" class="col-xs-12" type="number" value="0" />
									</td>
									<td>
										<input required ng-change="calcularImporte()" ng-model="detalleCotizacion.recargo" step="0.001" class="col-xs-12" type="number"
										 value="0" />
									</td>
									<td>
										<input required ng-change="calcularImporte()" ng-model="detalleCotizacion.ice" step="0.001" class="col-xs-12" type="number"
										 value="0" />
									</td>
									<td>
										<input required ng-change="calcularImporte()" ng-model="detalleCotizacion.excento" step="0.001" class="col-xs-12" type="number"
										 value="0" />
									</td>
									<td>
										{{detalleCotizacion.total}}
									</td>
								</tr>
							</tbody>
						</table>
					</form>
				</div>
			</div>
		</div>
		<!-- visible sm -->
		<div class="row form-group" ng-if="cotizacion.detallesCotizacion.length > 0">
			<div class="col-xs-12">
				<div class="widget-header">
					<h4 class="widget-title">Detalles de Cotización</h4>
				</div>
				<div class="container container-fluid visible-xs-block visible-sm-block hidden-lg hidden-md">
					<div ng-if="cotizacion.importe>0">
						<label class="blue">Total:</label>
						<p>{{cotizacion.importe}}</p>
					</div>
					<div class="row div-table" ng-if="!detalleCotizacion.eliminado" ng-repeat="detalleCotizacion in cotizacion.detallesCotizacion">
						<div class="col col-xs-4 col-sm-2">
							<label class="blue">#</label>
							<p>{{$index+1}}</p>
						</div>
						<div class="col col-xs-4 col-sm-2">
							<label class="blue">Nombre</label>
							<p>{{detalleCotizacion.producto.nombre}}</p>
						</div>
						<div class="col col-xs-4 col-sm-2">
							<label class="blue">Código</label>
							<p>{{detalleCotizacion.producto.codigo}}</p>
						</div>
						<div class="col col-xs-4 col-sm-2">
							<label class="blue">UNID. MED.</label>
							<p>{{detalleCotizacion.producto.unidad_medida}}</p>
						</div>
						<div class="col col-xs-4 col-sm-2">
							<label class="blue">P.U. (Bs/u)</label>
							<p>{{detalleCotizacion.precio_unitario}}</p>
						</div>
						<div class="col col-xs-4 col-sm-2">
							<label class="blue">CANT. (u)</label>
							<p>{{detalleCotizacion.cantidad}}</p>
						</div>
						<div class="col col-xs-4 col-sm-2">
							<label class="blue">IMP. (Bs)</label>
							<p>{{detalleCotizacion.importe}}</p>
						</div>
						<div class="col col- col-md-auto col-lg-2"><label class="blue">Acciones:</label>
							<a class="red" href="javascript:void(0)" ng-click="eliminarDetalleCotizacion(detalleCotizacion)">
									<i class="ace-icon fa fa-trash-o bigger-130"></i>
								</a>
						</div>
					</div>
					<div ng-if="cotizacion.importe > 0">
						<label class="blue">Total:</label>
						<p>{{cotizacion.importe}}</p>
					</div>
				</div>
				<!-- visible md lg xl -->
				<table class="table table-striped table-bordered table-hover table-responsive hidden-xs hidden-sm visible-md-block visible-lg-block">
					<thead>
						<tr>
							<th>
								<label>#</label>
							</th>
							<th>
								<label>NOMBRE</label>
							</th>
							<th>
								<label>CÓD. ITEM</label>
							</th>
							<th>
								<label>UNID. MED.</label>
							</th>
							<th>
								<label>P.U. (Bs/u)</label>
							</th>
							<th>
								<label>CANT. (u)</label>
							</th>
							<th>
								<label>IMP. (Bs)</label>
							</th>
							<th>
								<label>ACCIONES</label>
							</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-if="!detalleCotizacion.eliminado" ng-repeat="detalleCotizacion in cotizacion.detallesCotizacion">
							<td>
								{{$index+1}}
							</td>
							<td>
								{{detalleCotizacion.producto.nombre}}
							</td>
							<td>
								{{detalleCotizacion.producto.codigo}}
							</td>
							<td>
								{{detalleCotizacion.producto.unidad_medida}}
							</td>
							<td>
								{{detalleCotizacion.precio_unitario}}
							</td>
							<td>
								{{detalleCotizacion.cantidad}}
							</td>
							<td>
								{{detalleCotizacion.importe}}
							</td>
							<td>
								<a class="red" href="javascript:void(0)" ng-click="eliminarDetalleCotizacion(detalleCotizacion)">
											<i class="ace-icon fa fa-trash-o bigger-130"></i>
										</a>
							</td>
						</tr>
						<tr>
							<td>

							</td>
							<td>
								<b>TOTALES</b>
							</td>
							<td>

							</td>
							<td>

							</td>
							<td>

							</td>
							<td>

							</td>
							<td>
								{{cotizacion.importe}}
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<div id="modal-wizard-cotizacion-nueva" class="modal wizard-posicion">
	<div class="row">
		<div class="col-sm-4">
			<label class="col-md-3 pull-right">
				<br>
				<input ng-model="usuario.usar_lector_de_barra" ng-change="UsarLectorDeBarra()" checked="checked" type="checkbox" class="ace ace-switch ace-switch-5">
				<span class="lbl" data-lbl="Si&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No"></span>
			</label>
			<div class="widget-box">
				<form id="formularioCotizacion" name="formularioCotizacion" novalidate ng-submit="guardarCotizacion(formularioCotizacion.$valid,cotizacion)">
					<div class="widget-header">
						<h4 class="widget-title" ng-if="!cotizacion.id">Nueva Cotización</h4>
						<h4 class="widget-title" ng-if="cotizacion.id">Modificar Cotización</h4>
						&nbsp;
						<p>
							<button id="guardarV" type="submit" ng-if="blockerVenta" ng-disabled="venta.detallesVenta.length==0" class="btn btn-primary">
								<i class="ace-icon fa fa-floppy-o align-top bigger-125"></i>
								GUARDAR
							</button>
							<button id="cerrarV" type="button" class="btn btn-primary btn-danger" ng-click="cerrarPopupEdicion()">
								<i class="ace-icon fa fa-times red2 align-top bigger-125"></i>
								CERRAR
							</button>
						</p>

					</div>

					<div class="widget-body">
						<div class="widget-main">
							<table class="table table-striped table-bordered table-hover">
								<tr>
									<td>
										<label>Nombre</label>
										<input ng-keypress="interceptarTecla($event,'descripcion',true)" type="text" id="nombre" ng-model="cotizacion.nombre">
										<span class="red">(*)</span>
										<!-- <div class="row">
												
											<label uib-tooltip="Usar servicios">
												<input ng-model="venta.usar_servicios" ng-change="UsarLectorDeBarra()" checked="checked" type="checkbox" class="ace ace-switch ace-switch-5">
												<span class="lbl" data-lbl="Si&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No"></span>
											</label>
											<span class="pull-right">Usar servicios</span>
										</div> -->
									</td>
									<td ng-if="tipoEgreso==diccionario.EGRE_FACTURACION || tipoEgreso==diccionario.EGRE_PROFORMA">
										<label>PAGADO (Bs): </label>
										<input id="pagado" name="pagado" ng-disabled="venta.editable" data-validate="validate(required)" required type="number" step="0.01" min="{{pagoMinimo}}"
										 ng-model="venta.pagado" ng-change="calcularCambio()" />
										<span class="red">(*)</span>
										<span class="invalid-message" ng-show="formularioVenta.pagado.$dirty && formularioVenta.pagado.$invalid">
											El pago debe ser superior a {{pagoMinimo}}.
										</span>
										<label>CAMBIO (Bs): </label>
										<input disabled type="number" step="0.01" ng-model="venta.cambio" />
									</td>
								</tr>
								<tr ng-if="tipoEgreso==diccionario.EGRE_TRASPASO">
									<td>
										<label>SUCURSAL ORIGEN</label>
										<select data-validate="validate(required)" id="sucursalOrigen" name="sucursalOrigen" required ng-options="sucursal as sucursal.nombre for sucursal in sucursales track by sucursal.id"
										 ng-model="venta.sucursal" ng-change="obtenerAlmacenesSucursalesDiferente(venta.sucursal.id)" ng-disabled="venta.editable">
										</select>
										<span class="red">(*)</span>
									</td>
									<td ng-if="tipoEgreso==diccionario.EGRE_TRASPASO">
										<label>SUCURSAL DESTINO</label>
										<select ng-disabled="venta.editable" data-validate="validate(required)" id="sucursalDestino" name="sucursalDestino" required ng-options="sucursalDiferente as sucursalDiferente.nombre for sucursalDiferente in sucursalesDiferente track by sucursalDiferente.id"
										 ng-model="venta.sucursalDestino" ng-change="obtenerAlmacenesDiferente(venta.sucursalDestino.id)">
										</select>
										<span class="red">(*)</span>
									</td>
								</tr>
								<tr ng-if="tipoEgreso==diccionario.EGRE_TRASPASO">
									<td>
										<label>ALMACEN ORIGEN</label>
										<select ng-disabled="venta.editable" data-validate="validate(required)" required id="almacen" name="almacen" ng-model="venta.almacen" ng-options="almacen as almacen.nombre for almacen in almacenes track by almacen.id"
										 data-placeholder="Click para escoger"></select>
										<span class="red">(*)</span>
									</td>
									<td>
										<label>ALMACEN DESTINO</label>
										<select ng-disabled="venta.editable" data-validate="validate(required)" required id="almacenDiferente" name="almacenDiferente" ng-model="venta.almacenDestino"
										 ng-options="almacenDiferente as almacenDiferente.nombre for almacenDiferente in almacenesDiferente track by almacenDiferente.id"
										 data-placeholder="Click para escoger"></select>
										<span class="red">(*)</span>
									</td>
								</tr>
								<tr ng-if="tipoEgreso!=diccionario.EGRE_TRASPASO">
									<td>
										<label>SUCURSAL</label>
										<select ng-disabled="venta.editable" ng-disabled="venta.detallesVenta.length>0" data-validate="validate(required)" required id="sucursal" name="sucursal" ng-options="sucursal as sucursal.nombre for sucursal in sucursales track by sucursal.id"
										 ng-model="venta.sucursal" ng-change="obtenerAlmacenesActividades(venta.sucursal.id)">
											<option value="" disabled selected>Selec. Sucursal</option>
										</select>
										<span class="red">(*)</span>
										<span class="invalid-message" ng-show="formularioVenta.sucursal.$dirty && formularioVenta.sucursal.$invalid">
											Debe seleccionar una Sucursal.
										</span>
									</td>
									<td ng-if="tipoEgreso!=diccionario.EGRE_TRASPASO">
										<label>ALMACEN</label>
										<select ng-disabled="venta.editable || venta.detallesVenta.length>0" data-validate="validate(required)" required id="almacen" name="almacen" ng-model="venta.almacen" ng-options="almacen as almacen.nombre for almacen in almacenes track by almacen.id"
										 data-placeholder="Click para escoger">
											<option value="" disabled selected>Selec. Almacen</option>
										</select>
										<span class="red">(*)</span>
										<span class="invalid-message" ng-show="formularioVenta.almacen.$dirty && formularioVenta.almacen.$invalid">
											Debe seleccionar un Almacen.
										</span>
									</td>
								</tr>
								<tr ng-if="tipoEgreso!=diccionario.EGRE_TRASPASO">
									<td ng-if="tipoEgreso==diccionario.EGRE_FACTURACION">
										<label>ACTIVIDAD</label>
									</td>
									<td ng-if="tipoEgreso==diccionario.EGRE_FACTURACION">
										<select style="width:150px;" ng-disabled="venta.editable" data-validate="validate(required)" required id="actividad" name="actividad" ng-model="venta.actividad"
										 ng-options="actividad as actividad.nombre for actividad in actividades track by actividad.id" data-placeholder="Click para escoger">
											<option value="" disabled selected>Selec. Actividad</option>
										</select>
										<span class="red">(*)</span>
										<span ng-if="dosificacionesExpiradas" style="color: red">Las Actividades con dosificaciones expiradas no se muestran</span>
										<div class="invalid-message help-block" ng-messages="formularioVenta.actividad.$error" ng-if=" (formularioVenta.$submitted && formularioVenta.actividad.$invalid)">
											<div ng-messages-include="/templates/GRAL/messages.html"></div>
										</div>
									</td>
								</tr>
								<tr>
									<td ng-if="tipoEgreso==diccionario.EGRE_FACTURACION || tipoEgreso==diccionario.EGRE_PROFORMA">
										<label>NIT CLIENTE</label>
										<input ng-disabled="venta.editable" ng-keypress="interceptarTecla($event,'razon_social',true)" data-validate="validate(required)" id="nit" name="nit"
										 required type="number" min="0" ng-model="venta.cliente.nit" placeholder="Ingrese el NIT" uib-typeahead="cliente as cliente.nit for cliente in buscarCliente($viewValue)"
										 typeahead-wait-ms="2000" typeahead-template-url="templates/autocompletar.html" typeahead-show-hint="false" typeahead-min-length="0"
										 typeahead-on-select="establecerCliente($item, $model, $label, $event)">
										<span class="red">(*)</span>
										<span class="invalid-message" ng-show="formularioVenta.nit.$dirty && formularioVenta.nit.$invalid">
											Debe ingresar un número mayor o igual a 0.
										</span>
									</td>
									<td ng-if="tipoEgreso==diccionario.EGRE_FACTURACION || tipoEgreso==diccionario.EGRE_PROFORMA">
										<label>RAZÓN SOCIAL CLIENTE</label>
										<input ng-disabled="venta.editable" ng-keypress="interceptarTecla($event,'id_producto',true)" autocomplete="off" data-validate="validate(required)" id="razon_social"
										 name="razon_social" required type="text" ng-model="venta.cliente.razon_social" placeholder="Ingrese la Razon Social"
										 uib-typeahead="cliente as cliente.razon_social for cliente in buscarCliente($viewValue)" typeahead-wait-ms="2000"
										 typeahead-template-url="templates/autocompletar.html" typeahead-show-hint="false" typeahead-min-length="0" typeahead-on-select="establecerCliente($item, $model, $label, $event)">
										<span class="red">(*)</span>
										<span class="invalid-message" ng-show="formularioVenta.razon_social.$dirty && formularioVenta.razon_social.$invalid">
											Dato requerido.
										</span>
									</td>
								</tr>
								<tr>
									<td>
										<label>FECHA</label>
										<input ng-disabled="venta.editable" name="fecha" required ng-update-hidden class="form-control date-picker" type="text" data-date-format="dd/mm/yyyy"
										 id="fecha" ng-model="venta.fechaTexto" placeholder="Ingrese la fecha" />
										<span class="red">(*)</span>
										<span class="invalid-message" ng-show="formularioVenta.fecha.$dirty && formularioVenta.fecha.$invalid">
											Dato requerido.
										</span>
									</td>
									<td ng-if="tipoEgreso==diccionario.EGRE_FACTURACION || tipoEgreso==diccionario.EGRE_PROFORMA">
										<label>TIPO DE PAGO</label>
										<select data-validate="validate(required)" required id="pago" name="pago" ng-model="venta.tipoPago" data-placeholder="Elija un tipo de pago"
										 ng-change="cambiarTipoPago(venta)" ng-options="tipoPago as tipoPago.nombre for tipoPago in tiposPago track by tipoPago.id">
										</select>
										<span class="red">(*)</span>
									</td>
								</tr>
								<tr ng-if="tipoEgreso==diccionario.EGRE_FACTURACION || tipoEgreso==diccionario.EGRE_PROFORMA">
									<td ng-if="!esContado">
										<label>DIAS</label>
										<input required type="number" min="1" name="dias" ng-model="venta.dias_credito" />
										<span class="red">(*)</span>
										<span class="invalid-message" ng-show="formularioVenta.dias.$dirty && formularioVenta.dias.$invalid">
											Debe especificar un valor numérico mayor a 0.
										</span>
									</td>
									<td ng-if="!esContado">
										<label>SUJETO A CF</label>
										<input disabled type="number" step="0.001" ng-model="venta.total" />
									</td>
								</tr>
								<tr ng-if="tipoEgreso==diccionario.EGRE_FACTURACION || tipoEgreso==diccionario.EGRE_PROFORMA">
									<td ng-if="!esContado">
										<label>A CUENTA (Bs)</label>
										<input min="0" name="acuenta" required type="number" step="0.001" ng-model="venta.a_cuenta" value="0.0" ng-change="calcularSaldo()"
										/>
										<span class="red">(*)</span>
										<span class="invalid-message" ng-show="formularioVenta.acuenta.$dirty && formularioVenta.acuenta.$invalid">
											Debe especificar un valor numérico mayor o igual a 0.
										</span>
									</td>
									<td ng-if="!esContado">
										<label>SALDO</label>
										<input disabled type="number" step="0.001" ng-model="venta.saldo" />
									</td>
								</tr>
								<tr ng-if="tipoEgreso==diccionario.EGRE_FACTURACION || tipoEgreso==diccionario.EGRE_PROFORMA">
									<td>
										<div class="row">
											<div class="col-sm-6">
												<label>VENDEDOR</label>
											</div>
											<div class="col-sm-6">
												<div class="col-sm-1">
													<a class="blue" href="javascript:void(0)" ng-click="abrirPopuEdicionVendedor()">
														<i class="ace-icon fa fa-plus bigger-130"></i>
													</a>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-sm-10">
												<select class="col-sm-10" ng-options="vendedor as vendedor.persona.nombre_completo for vendedor in vendedores" ng-model="venta.vendedor"></select>
											</div>
											<div class="col-sm-1" ng-if="venta.vendedor">
												<a class="green" href="javascript:void(0)" ng-click="modificarVendedor(venta.vendedor)">
													<i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
												</a>
											</div>
											<div class="col-sm-1" ng-if="venta.vendedor">
												<a class="red" href="javascript:void(0)" ng-click="abrirPopupConfirmacionEliminacion(eliminarVendedor,venta.vendedor)">
													<i class="ace-icon fa fa-trash-o bigger-130"></i>
												</a>
											</div>
										</div>
									</td>
									<td></td>
								</tr>
							</table>
						</div>
					</div>
				</form>
			</div>
		</div>
		<div class="col-sm-8">
			<div class="widget-box">
				<div class="widget-header">
					<h4 class="widget-title">BUSQUEDA PRODUCTO</h4>

				</div>
				<div class="widget-body">
					<div class="widget-main">
						<!-- <form id="formularioBusquedaProducto" name="formularioBusquedaProducto" novalidate> -->
						<table class="table table-striped table-bordered table-hover">
							<thead>
								<tr>
									<th>
										<label>PRODUCTO</label>
										<div>
											<div class="col-md-1">
												<a class="green">
													<i class="ace-icon fa fa-barcode dark bigger-250 fa-stack-2x"></i>
													<i class="ace-icon fa  fa-filter red bigger-200 fa-stack-1x"></i>
													<!-- <img class="bg-orange text-cut" style="width:25%;height:25%" src="img/iconos-polifuncional/asistencia-capacitacion.png"> -->
												</a>
											</div>

											<label class="col-md-3 pull-left" uib-tooltip="Usar lector de barra">

												<input ng-model="usuario.usar_lector_de_barra" ng-change="UsarLectorDeBarra()" checked="checked" type="checkbox" class="ace ace-switch ace-switch-5">
												<span class="lbl" data-lbl="Si&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No"></span>
											</label>
										</div>
									</th>
									<th>
										<label>CÓD. ITEM</label>
									</th>
									<th>
										<label>UNID. MED.</label>
									</th>
									<th ng-if="usuario.empresa.usar_vencimientos">
										<label>VENCIMIENTO</label>
									</th>
									<th ng-if="usuario.empresa.usar_vencimientos">
										<label>LOTE</label>
									</th>
									<th>
										<label>INVENTARIO DISPONIBLE</label>
									</th>
									<th>
										<label>P.U. (Bs/u)</label>
									</th>
									<th>
										<label>CANT. (u)</label>
									</th>
									<th>
										<label>IMP. (Bs)</label>
									</th>
									<th>
										<label>ACC.</label>
									</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<input ng-if="usuario.usar_lector_de_barra" ng-keypress="interceptarTecla($event,'cantidad',true)" id="id_producto" required
										 ng-disabled="!venta.almacen" type="text" ng-model="detalleVenta.producto.nombre" placeholder="Ingrese el nombre del producto..."
										 uib-typeahead="producto as (producto.codigo+'-'+producto.nombre+'-'+producto.grupo+'-'+producto.subgrupo) for producto in buscarProductoLectorBarra($viewValue)"
										 typeahead-wait-ms="100" typeahead-template-url="templates/autocompletar.html" typeahead-show-hint="false" typeahead-min-length="3"
										 typeahead-on-select="establecerProducto($item, $model, $label, $event)">

										<input ng-if="!usuario.usar_lector_de_barra" autocomplete="off" ng-keypress="interceptarTecla($event,'cantidad',true)" id="id_producto"
										 required ng-disabled="!venta.almacen" type="text" ng-model="detalleVenta.producto.nombre" placeholder="Ingrese el nombre del producto..."
										 uib-typeahead="producto as (producto.codigo+'-'+producto.nombre+'-'+producto.grupo+'-'+producto.subgrupo) for producto in buscarProducto($viewValue)"
										 typeahead-wait-ms="1000" typeahead-template-url="templates/autocompletar.html" typeahead-show-hint="false" typeahead-select-on-exact="true"
										 typeahead-min-length="3" typeahead-on-select="establecerProducto($item, $model, $label, $event)">

										<div class="space-6"></div>
										<button ng-disabled="!venta.almacen" id="mostrar_inv" type="button" ng-click="abrirPopupInventario()" class="btn btn-info btn-sm">
											<i class="ace-icon fa fa-search-plus bigger-110"></i>
										</button>
										<span class="red" ng-if="!detalleVenta.producto.activar_inventario">Inventario Desactivado</span>
									</td>
									<td>
										{{detalleVenta.producto.codigo}}
									</td>
									<td>
										{{detalleVenta.producto.unidad_medida}}
									</td>
									<td ng-if="usuario.empresa.usar_vencimientos">
										<select style="width:95px;" id="fechaVencimiento" name="fechaVencimiento" ng-if="detalleVenta.producto.activar_inventario"
										 ng-model="detalleVenta.inventarioProducto" data-placeholder="Elija la fecha de vencimiento" ng-change="actualizarInventarioDisponibleFechaVencimiento(detalleVenta)"
										 ng-options="inventario as ('FV:'+inventario.fechaVencimientoTexto+'-'+'F:'+inventario.detallesMovimiento[0].movimiento.fechaTexto+'-'+inventario.detallesMovimiento[0].movimiento.clase.nombre) for inventario in inventariosDisponibleProducto track by inventario.id">
										</select>
									</td>
									<td ng-if="usuario.empresa.usar_vencimientos">
										{{detalleVenta.lote}}
									</td>
									<td>
										<div class="c100 p{{porcentaje}} small {{color}}" ng-if="detalleVenta.producto.activar_inventario">
											<span id="CantProd" style="color:black !important;">{{detalleVenta.inventario_disponible}}</span>
											<div class="slice">
												<div class="bar"></div>
												<div class="fill"></div>
											</div>
										</div>
									</td>
									<td ng-if="!editar_precio">
										<div clas="row">
											<div id="Precio" class="col-sm-12">
												{{detalleVenta.precio_unitario}}
											</div>
										</div>
										<div clas="row">
											<div class="col-sm-12">
												<a class="green" href="javascript:void(0)" e-disabled="!aplicacion.puede_modificar" ng-click="modificarPrecio()">
													<i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
												</a>
											</div>
										</div>

										<span class="blue">
                                    	Último precio
                                		</span>
										<span class="label label-danger label-white middle tooltip-info" ng-if="precio_inventario"  data-rel="tooltip" tooltip-placement="top" uib-tooltip="Último precio de compra">{{precio_inventario}}</span>
									</td>
									<td ng-if="editar_precio">
										<form ng-submit="establecerPrecio()">
											<div class="row">
												<div class="col-sm-12">
													<input required name="precio_unitario" step="0.001" min="{{detalleVenta.producto.rango_negativo?detalleVenta.producto.rango_negativo:0}}"
													 max="{{detalleVenta.producto.rango_positivo?detalleVenta.producto.rango_positivo:10000000}}" required class="col-xs-12"
													 ng-change="calcularImporte()" ng-model="detalleVenta.precio_unitario" type="number" />
												</div>
											</div>
											<div class="row">
												<div class="col-sm-12">
													<button class="blue" type "submit">
														<i class="ace-icon fa fa-check-square-o bigger-130"></i>
													</button>
												</div>
											</div>
										</form>
									</td>
									<td>
										<input onfocus="this.select();" ng-keypress="interceptarTecla($event,'agregar_detalle_venta',false)" id="cantidad" name="cantidad"
										 step="0.001" min="0.1" max="{{detalleVenta.inventario_disponible}}" required class="col-xs-12" ng-change="calcularImporte()"
										 ng-model="detalleVenta.cantidad" type="number" />
										<div ng-show="formularioBusquedaProducto.cantidad.$dirty && formularioBusquedaProducto.cantidad.$invalid">
											<span class="invalid-message">La cantidad debe estar entre 0.1 y {{detalleVenta.inventario_disponible}}.</span>
										</div>
									</td>
									<td>
										{{detalleVenta.importe}}
									</td>
									<td>
										<button id="agregar_detalle_venta" type="button" ng-disabled="formularioBusquedaProducto.$invalid" ng-click="agregarDetalleVenta(detalleVenta)"
										 class="btn btn-success btn-sm">
											<i class="ace-icon fa fa-plus bigger-110"></i>
										</button>
										<div class="space-6"></div>
										<button id="mostrar_desc" type="button" ng-click="mostrarDescuentos()" class="btn btn-info btn-sm">
											<i class="ace-icon fa fa-exchange bigger-110"></i>
										</button>
									</td>
								</tr>
								<tr class="des-datos" style="display:none;">
									<th>
										<label>DESCUENTOS (-)</label>
										<label>
											<input ng-disabled="detalleVenta.producto.descuento_fijo" class="ace ace-switch ace-switch-4" type="checkbox" ng-model="detalleVenta.tipo_descuento"
											 ng-change="recalcular()" />
											<span class="lbl check-compra"></span>
										</label>
									</th>
									<th>
										<label>RECARGOS (+)</label>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="detalleVenta.tipo_recargo" ng-change="recalcular()"
											/>
											<span class="lbl check-compra"></span>
										</label>
									</th>
									<th>
										<label>ICE (-)</label>
									</th>
									<th>
										<label>EXCENTOS (-)</label>
									</th>
									<th>
										<label>SUJETO A DF</label>
									</th>
								</tr>
								<tr class="des-datos" style="display:none;">
									<td>
										<input ng-disabled="detalleVenta.producto.descuento_fijo" required ng-change="calcularImporte()" ng-model="detalleVenta.descuento"
										 ng-value="detalleVenta.producto.descuento" step="0.001" class="col-xs-12" type="number" value="0" />
									</td>
									<td>
										<input required ng-change="calcularImporte()" ng-model="detalleVenta.recargo" step="0.001" class="col-xs-12" type="number"
										 value="0" />
									</td>
									<td>
										<input required ng-change="calcularImporte()" ng-model="detalleVenta.ice" step="0.001" class="col-xs-12" type="number" value="0"
										/>
									</td>
									<td>
										<input required ng-change="calcularImporte()" ng-model="detalleVenta.excento" step="0.001" class="col-xs-12" type="number"
										 value="0" />
									</td>
									<td>
										{{detalleVenta.total}}
									</td>
								</tr>
							</tbody>
						</table>
						<!-- </form> -->
					</div>
				</div>
			</div>
			<div class="widget-box">
				<div class="widget-header" ng-if="venta.detallesVenta.length>0">
					<div class="row">
						<div class="col-sm-6">
							<h4 class="widget-title">DETALLE DE VENTA</h4>
						</div>
						<div class="col-sm-6">
							<div class="inline pos-rel pull-right">
								<a data-toggle="dropdown" href="javascript:void(0)" class="dropdown-toggle">
									<i class="glyphicon  glyphicon-list-alt"></i>
								</a>

								<ul id="campos-detalle-venta" class="dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret">
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_producto" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>NOMBRE</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_codigo_producto" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>CÓD. ITEM</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_unidad_producto" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>UNID. MED.</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_precio_unitario" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>P.U. (Bs/u)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_cantidad" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>CANT. (u)</label>
									</li>
									<li ng-if="usuario.empresa.usar_vencimientos">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_fecha_vencimiento" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>VENC.</label>
									</li>
									<li ng-if="usuario.empresa.usar_vencimientos">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_lote" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>LOTE</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_importe" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>IMP. (Bs)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_descuento" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>DESC. (-)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_recargo" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>REC. (+)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_ice" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>ICE (-)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_excento" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>EXC. (-)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionVentaVista.mostrar_total" ng-change="guardarConfiguracionVentaVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>SUJETO A DF</label>
									</li>
									<li class="divider"></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="widget-body" ng-if="venta.detallesVenta.length>0">
					<div class="widget-main">
						<table class="table table-striped table-bordered table-hover">
							<thead>
								<tr>
									<th>
										<label>#</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_producto">
										<label>NOMBRE</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_codigo_producto">
										<label>CÓD. ITEM</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_unidad_producto">
										<label>UNID. MED.</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_precio_unitario">
										<label>P.U. (Bs/u)</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_cantidad">
										<label>CANT. (u)</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										<label>VENC.</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										<label>LOTE</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_importe">
										<label>IMP. (Bs)</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_descuento">
										<label>DESC. (-)</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_recargo">
										<label>REC. (+)</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_ice">
										<label>ICE (-)</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_excento">
										<label>EXC. (-)</label>
									</th>
									<th ng-if="configuracionVentaVista.mostrar_total">
										<label>SUJETO A DF</label>
									</th>
									<th>
										<label>ACCIONES</label>
									</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="detalleVenta in venta.detallesVenta|filter:{eliminado:false}">
									<td>
										{{$index+1}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_producto">
										{{detalleVenta.producto.nombre}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_codigo_producto">
										{{detalleVenta.producto.codigo}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_unidad_producto">
										{{detalleVenta.producto.unidad_medida}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_precio_unitario">
										{{detalleVenta.precio_unitario}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_cantidad">
										{{detalleVenta.cantidad}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										{{detalleVenta.fecha_vencimiento | date:"dd/MM/yyyy"}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										{{detalleVenta.lote}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_importe">
										{{detalleVenta.importe}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_descuento">
										{{detalleVenta.descuento}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_recargo">
										{{detalleVenta.recargo}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_ice">
										{{detalleVenta.ice}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_excento">
										{{detalleVenta.excento}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_total">
										{{detalleVenta.total}}
									</td>
									<td>
										<a class="red" href="javascript:void(0)" ng-click="eliminarDetalleVenta(detalleVenta)">
											<i class="ace-icon fa fa-trash-o bigger-130"></i>
										</a>
									</td>
								</tr>
								<tr>
									<td>

									</td>
									<td ng-if="configuracionVentaVista.mostrar_producto">
										<b>TOTALES</b>
									</td>
									<td ng-if="configuracionVentaVista.mostrar_codigo_producto">

									</td>
									<td ng-if="configuracionVentaVista.mostrar_unidad_producto">

									</td>
									<td ng-if="configuracionVentaVista.mostrar_precio_unitario">

									</td>
									<td ng-if="configuracionVentaVista.mostrar_cantidad">

									</td>
									<td ng-if="configuracionVentaVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">

									</td>
									<td ng-if="configuracionVentaVista.mostrar_lote && usuario.empresa.usar_vencimientos">

									</td>
									<td ng-if="configuracionVentaVista.mostrar_importe">
										{{venta.importe}}
									</td>
									<td ng-if="configuracionVentaVista.mostrar_descuento">

									</td>
									<td ng-if="configuracionVentaVista.mostrar_recargo">

									</td>
									<td ng-if="configuracionVentaVista.mostrar_ice">

									</td>
									<td ng-if="configuracionVentaVista.mostrar_excento">
									</td>
									<td ng-if="configuracionVentaVista.mostrar_total">
										{{venta.total}}
									</td>
									<td>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>