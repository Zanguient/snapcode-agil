<div class="row">
	<div class="col-xs-12">
		<h3 class="header smaller lighter blue">ESTADO DE CUENTAS CLIENTES</h3>
		<div class="clearfix">
			<div class="pull-right tableTools-container"></div>
		</div>
		<div class="table-header">
			Lista de Clientes
		</div>

		<!-- div.table-responsive -->

		<!-- div.dataTables_borderWrap -->
		<div>
		<div id="tabla-clientes_wrapper" class="dataTables_wrapper form-inline no-footer">
			<div class="row">
				<div class="col-xs-4">
					<div class="dataTables_length" id="tabla-clientes_length"><label>
				Mostrar <select ng-model="itemsPorPagina" ng-change="buscarClientes(1,itemsPorPagina,textoBusqueda,cuentasLiquidadas)" name="tabla-clientes_length" aria-controls="tabla-clientes" class="form-control input-sm">
							<option selected value="10">10</option>
							<option value="25">25</option>
							<option value="50">50</option>
							<option value="100">100</option>
					    </select> clientes por página</label></div></div>	
					    <div class="col-xs-4">		
					    <label>Cuentas liquidadas
									<input name="switch-field-1" class="ace ace-switch ace-switch-4 ng-valid ng-dirty ng-valid-parse ng-touched ng-empty" type="checkbox" ng-model="cuentasLiquidadas" ng-change="buscarClientes(1,itemsPorPagina,textoBusqueda,cuentasLiquidadas)">
									<span class="lbl check-descuento"></span>
							</label>		  
						</div>  
						<div class="col-xs-4">
							
							<div id="tabla-clientes_filter" class="dataTables_filter">
								<label>Buscar:<input type="search" class="form-control input-sm" ng-model="textoBusqueda" placeholder="" aria-controls="tabla-clientes" ng-keydown="verificarPulso($event,textoBusqueda)">
								</label>
							</div>
						</div>
			</div>
			<table id="tabla-clientes" class="table table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th class="center">
							<label class="pos-rel">
								<input type="checkbox" class="ace" />
								<span class="lbl"></span>
							</label>
						</th>
						<th>Código</th>
						<th>Razón Social</th>
						<th>Nit</th>
						<th>
							<i class="ace-icon fa fa-clock-o bigger-110 hidden-480"></i>
							Dirección
						</th>
						<th class="hidden-480">Telefono 1</th>
						<th class="hidden-480">Rubro</th>
						<th class="hidden-480">Categoria</th>
						<th class="hidden-480">Ubicación Geográfica</th>
						<th class="hidden-480">Fecha Importante 1</th>
						<th class="hidden-480">Fecha Importante 2</th>
						<th>Acciones</th>
					</tr>
				</thead>

				<tbody>
					<tr ng-repeat="cliente in clientes">
						<td class="center">
							<label class="pos-rel">
								<input type="checkbox" class="ace" />
								<span class="lbl"></span>
							</label>
						</td>
						<td>
							{{cliente.codigo}}
						</td>
						<td>
							{{cliente.razon_social}}
						</td>
						<td>{{cliente.nit}}</td>
						<td>{{cliente.direccion}}</td>

						<td>
							{{cliente.telefono1}}
						</td>
						<td>
							{{cliente.rubro}}
						</td>
						<td>
							{{cliente.categoria}}
						</td>
						<td>
							{{cliente.ubicacion_geografica}}
						</td>
						<td>
							{{cliente.fecha1 | date:"dd/MM"}}
						</td>
						<td>
							{{cliente.fecha2 | date:"dd/MM"}}
						</td>
						<td>
							<a class="red" href="javascript:void(0)" ng-click="generarPdfEstadoCuentasCliente(cliente,0)">
									<i class="ace-icon fa fa-file-pdf-o bigger-130"></i>
								</a>								
								<a class="green" href="javascript:void(0)" ng-click="generarExcelEstadoCuentasCliente(cliente,0)">
									<i class="ace-icon fa fa-file-excel-o bigger-130 "></i>
								</a>	
							<a class="blue" href="javascript:void(0)" ng-click="abrirEstadoCuentaCliente(cliente)">
									<i class="ace-icon fa fa-filter bigger-130 "></i>
								</a>	
						</td>
					</tr>
				</tbody>
			</table>
			<div class="row">
				<div class="col-xs-6">
					<div class="dataTables_info" id="tabla-clientes_info" role="status" aria-live="polite">Mostrando página {{paginaActual}} de {{paginas.length}}</div>
				</div>
				<div class="col-xs-6">
					<div class="dataTables_paginate paging_simple_numbers" id="tabla-clientes_paginate">
						<ul class="pagination">
							<li class="paginate_button previous" aria-controls="tabla-clientes" tabindex="0" id="tabla-clientes_previous"><a href="javascript:void(0)" ng-click="buscarClientes(1,itemsPorPagina,textoBusqueda)">Primero</a></li>
							<li class="paginate_button previous" ng-class="{disabled:paginaActual==1}" aria-controls="tabla-clientes" tabindex="0" id="tabla-clientes_previous"><a href="javascript:void(0)" e-disabled="paginaActual==1" ng-click="buscarClientes(paginaActual-1,itemsPorPagina,textoBusqueda)"><<</a></li>
							<li class="paginate_button" ng-class="{active:paginaActual==pagina}" aria-controls="tabla-clientes" tabindex="0" ng-repeat="pagina in paginas" ng-if="abs(paginaActual-pagina)<4"><a href="javascript:void(0)" ng-click="buscarClientes(pagina,itemsPorPagina,textoBusqueda)">{{pagina}}</a></li>
							<li class="paginate_button" ng-class="{disabled:paginaActual==paginas.length}" aria-controls="tabla-clientes" tabindex="0" id="tabla-clientes_next"><a href="javascript:void(0)" e-disabled="paginaActual==paginas.length" ng-click="buscarClientes(paginaActual+1,itemsPorPagina,textoBusqueda)">>></a></li>
							<li class="paginate_button previous" aria-controls="tabla-clientes" tabindex="0" id="tabla-clientes_previous"><a href="javascript:void(0)" ng-click="buscarClientes(paginas.length,itemsPorPagina,textoBusqueda)">Ultimo</a></li>
						</ul>
					</div>
				</div>
			</div>
			</div>
		</div>
		<div id="tabla-estado-cuenta">
			<div class="row">
				<div class="col-xs-12 col-sm-12" align="center">
					<h3>Estado de Cuenta</h3>
				</div>
				<div class="col-xs-6">
					<h4>{{clienteVentas.razon_social}}</h4>
				</div>
					<div class="col-xs-5" align="right">
					<a  class="blue" href="javascript:void(0)" ng-click="click(clienteVentas.ventas)">
					<i class="ace-icon fa fa-plus-circle bigger-200"></i>
					</a>
					</div>
				
				
			</div>
			<div class="row">
				<table class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th>Fecha</th>
							<th>No. Recibo</th>
							<th>descripcion</th>
							<th>Saldo</th>
							<th>Total</th>
							<th>Acciones</th>
						</tr>
					</thead>

					<tbody>
						<tr ng-repeat="venta in clienteVentas.ventas">
							<td>{{venta.fecha | date:"dd/MM/yyyy"}}</td>
							<td>{{venta.id_movimiento}} <span ng-if="venta.tipoPago.nombre == diccionario.TIPO_PAGO_CREDITO">({{venta.fecha_vencimiento | date:"dd/MM/yyyy"}})<span></td>
							<td ng-if="venta.movimiento.clase.nombre_corto != diccionario.EGRE_FACTURACION">PROFORMA Nro. {{venta.factura}}({{venta.total}})</td>
							<td ng-if="venta.movimiento.clase.nombre_corto == diccionario.EGRE_FACTURACION">Factura Nro. {{venta.factura}}  (Bs. {{venta.total}})</td>

							<td>{{venta.saldo}}</td>
							<td>{{venta.totalgeneral}}</td>
							<td>
								<div  class="hidden-sm hidden-xs action-buttons">
									<a  type="button" class="verDetallePago"id="input" ng-if="venta.pagosVenta.length!=0" href="javascript:void(0)" ng-click="verDetallePagos(venta)">
										<i class="ace-icon fa fa-plus bigger-130"></i>
									</a>
									
									<table  id="{{venta.id_movimiento}}" style="display:none;" class="table table-striped table-bordered table-hover">
									<thead >
										<tr>
											<th>Fecha</th>
											<th>Recibo</th>
											<th>Descripción</th>
											<th>Pago</th>
											<th>Saldo</th>
											<th>Acciones</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="pagosVenta in venta.pagosVenta">
											<td>{{pagosVenta.createdAt | date:"dd/MM/yyyy" }}</td>
											<td>{{pagosVenta.numero_documento}}</td>
											<td>Pago a cuenta Saldo anterior {{pagosVenta.saldo_anterior}}</td>
											<td>{{pagosVenta.monto_pagado}}</td>
											<td>{{pagosVenta.total}}</td>							
											<td>
											<a class="blue col-sm-3" href="javascript:void(0)" ng-click="imprimirRecibo(pagosVenta,venta)">
												<i class="ace-icon fa fa-print align-top bigger-125"></i>
											</a>
											</td>
										</tr>
										 <tr>
											<th></th>
											<th></th>
											<th>Total Pagos</th>
											<th>{{venta.totalPago}}</th>
											<th></th>
											<th></th>
										</tr>
									</tbody>
								</table>
								</div>							
							</td>
							
						</tr>
						<tr>
							<th></th>
							<th></th>
							<th>Total General</th>
							<th>{{totalgeneral}}</th>
							<th></th>
							<th></th>
						</tr>
					</tbody>					
				</table>
				<div class="col-xs-12" align="center">
					<button class="btn btn-danger col-sm-3" href="javascript:void(0)" ng-click="cerrarEstadoCuentaCliente()">
						<i class="ace-icon fa fa-times align-top bigger-120">Cancelar</i>
					</button>

					<a class="blue col-sm-3" href="javascript:void(0)" ng-click="generarPdfEstadoCuentasCliente(clienteVentas,1)">
						<i class="ace-icon fa fa-print align-top bigger-200"></i>
					</a>							
					<a class="green col-sm-3" href="javascript:void(0)" ng-click="generarExcelEstadoCuentasCliente(clienteVentas,1)">
						<i class="ace-icon fa fa-file-excel-o bigger-200"></i>
					</a>							
				</div>
			</div>
		</div>
	</div>
</div>
