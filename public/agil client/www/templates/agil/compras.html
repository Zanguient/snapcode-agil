<div class="row">
	<div class="col-xs-12">
		<h3 class="header smaller lighter blue">COMPRAS</h3>

		<button id="nuevaCompra" ng-disabled="!aplicacion.puede_crear" class="btn btn-primary" ng-click="crearNuevaCompra()">
			<i class="ace-icon fa fa-plus align-top bigger-125" id="nuevaCompra"></i>
			Nuevo
		</button>

		<form name="formularioFiltroCompras" novalidate ng-submit="filtrarCompras(sucursalesUsuario,filtro.fechaInicioTexto,filtro.fechaFinTexto,filtro.razon_social,filtro.nit,filtro.monto,filtro.tipo_pago,filtro.sucursal,filtro.usuario,filtro.tipo)">
			<fieldset>
				<legend>Filtro Compras</legend>
				<div style="overflow-x:auto;">
					<table class="table table-striped table-bordered table-hover">
						<tbody>
							<tr>
								<td>

								</td>
								<td>
									<label>Desde</label>&nbsp
								</td>
								<td>
									<label>Hasta</label>&nbsp
								</td>
								<td>
								</td>
							</tr>
							<tr>
								<td>
									<label>PERIODO</label>&nbsp
								</td>
								<td>
									<input required ng-update-hidden autocomplete="off" class="form-control date-picker" type="text" data-date-format="dd/mm/yyyy" id="fechainicio"
									 ng-model="filtro.fechaInicioTexto" placeholder="Ingrese la fecha inicial" />
								</td>
								<td>
									<input required ng-update-hidden autocomplete="off" class="form-control date-picker" type="text" data-date-format="dd/mm/yyyy" id="fechafin"
									 ng-model="filtro.fechaFinTexto" autocomplete="off" placeholder="Ingrese la fecha final" /> &nbsp
								</td>
								<td>
									<button type="submit" ng-disabled="formularioFiltroCompras.$invalid" class="btn btn-primary">
										<i class="ace-icon fa fa-plus align-top bigger-125"></i>
										Filtrar
									</button>
								</td>
							</tr>
							<tr>
								<td>
									&nbsp
								</td>
								<td>
									<label>Razón Social</label>&nbsp
								</td>
								<td>
									<label>NIT</label>&nbsp
								</td>
								<td>
									<label>Monto</label>&nbsp
								</td>
								<td>
									<label>Tipo de Compra</label>&nbsp
								</td>
							</tr>
							<tr>
								<td>
									FILTRO
								</td>
								<td>
									<input type="text" ng-model="filtro.razon_social">
								</td>
								<td>
									<input type="number" ng-model="filtro.nit">
								</td>
								<td>
									<input type="number" step="0.01" ng-model="filtro.monto">
								</td>
								<td>
									<select id="pagoCompra" name="pagoCompra" ng-model="filtro.tipo_pago" data-placeholder="Elija un tipo de pago">
										<option value="0">TODOS</option>
										<option ng-repeat="tipoPago in tiposPago" value="{{tipoPago.id}}">{{tipoPago.nombre}}</option>
									</select>
								</td>
							</tr>
							<tr>
								<td>
									&nbsp
								</td>
								<td>
									<label>Sucursal</label>&nbsp
								</td>
								<td>
									<label>Usuario</label>&nbsp
								</td>
								<td>
									<label>Tipo Compra</label>&nbsp
								</td>
							</tr>
							<tr>
								<td>

								</td>
								<td>
									<select id="sucursalFiltro" name="sucursalFiltro" ng-model="filtro.sucursal" data-placeholder="Elija una sucursal">
										<option value="0">TODOS</option>
										<option ng-repeat="sucursalFiltro in sucursales track by $index" value="{{sucursalFiltro.id}}">{{sucursalFiltro.nombre}}</option>
									</select>
								</td>
								<td>
									<input type="text" ng-model="filtro.usuario">
								</td>
								<td>
									<select id="tipoFiltro" name="tipoFiltro" ng-model="filtro.tipo" data-placeholder="Elija una sucursal">
										<option value="0" selected>TODOS</option>
										<option value="productos">PRODUCTOS</option>
										<option value="servicios">SERVICIOS</option>

									</select>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</fieldset>
		</form>

		<div class="clearfix">
			<div class="pull-right tableTools-container"></div>
		</div>
		<div class="table-header">
			Lista de Compras
		</div>

		<!-- div.table-responsive -->

		<!-- div.dataTables_borderWrap -->
		<div style="overflow-x:auto;">
			<table id="tabla-compras" class="table table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th class="center">
							<label class="pos-rel">
								<input type="checkbox" class="ace" />
								<span class="lbl"></span>
							</label>
						</th>
						<th>Nº</th>
						<th>Sucursal</th>
						<th>Razón Social Proveedor</th>
						<th>Nit Proveedor</th>
						<th>Factura</th>
						<th>Fecha Fact.</th>
						<th>Hora - Fecha</th>
						<th>Monto</th>
						<th>Tipo de Pago</th>
						<th>Pago</th>
						<th>Usuario</th>
						<th>Acciones</th>
					</tr>
				</thead>

				<tbody>
					<tr ng-repeat="compra in compras">
						<td class="center">
							<label class="pos-rel">
								<input type="checkbox" class="ace" />
								<span class="lbl"></span>
							</label>
						</td>
						<td>{{$index+1}}</td>
						<td ng-if="compra.almacen">{{compra.almacen.sucursal.nombre}}</td>
						<td ng-if="!compra.almacen">{{compra.sucursal.nombre}}</td>
						<td>{{compra.proveedor.razon_social}}</td>
						<td>{{compra.proveedor.nit}}</td>
						<td>{{compra.factura}}</td>
						<td>{{compra.fecha | date:"dd/MM/yyyy"}}</td>
						<td>{{compra.createdAt | date:"HH:mm - dd/MM/yyyy"}}</td>
						<td>{{compra.total | number:2}}</td>
						<td>{{compra.tipoPago.nombre}}</td>
						<td>
							<div ng-if="compra.tipoPago.nombre==diccionario.TIPO_PAGO_CREDITO" class="hidden-sm hidden-xs action-buttons">
								Plazo: {{compra.dias_credito}} días&nbsp A cuenta: Bs {{compra.a_cuenta | number:2}}&nbsp Saldo: Bs {{compra.saldo | number:2}}&nbsp

								<a class="blue" href="javascript:void(0)" ng-if="compra.saldo>0" ng-click="abrirPopupPago(compra)">
									<i class="ace-icon fa fa-exclamation-circle bigger-130"></i>
								</a>
							</div>
							<div ng-if="compra.tipoPago.nombre==diccionario.TIPO_PAGO_CREDITO" class="hidden-md hidden-lg">
								<div class="inline pos-rel">
									<button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown" data-position="auto">
										<i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
									</button>
									Plazo: {{compra.dias_credito}} días&nbsp A cuenta: Bs {{compra.a_cuenta}}&nbsp Saldo: Bs {{compra.saldo}}&nbsp
									<ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
										<li>
											<a href="javascript:void(0)" ng-if="compra.saldo>0" ng-click="abrirPopupPago(compra)" class="tooltip-info" data-rel="tooltip"
											 title="View">
												<span class="blue">
													<i class="ace-icon fa fa-exclamation-circle bigger-120"></i>
												</span>
											</a>
										</li>
									</ul>
								</div>
							</div>
						</td>
						<td>{{compra.usuario.nombre_usuario}}</td>
						<td>
							<div class="hidden-sm hidden-xs action-buttons">
								<a class="green" href="javascript:void(0)" ng-click="imprimirCompra(compra)">
									<i class="ace-icon fa fa-print bigger-130"></i>
								</a>
								<a class="blue" href="javascript:void(0)" e-disabled="!aplicacion.puede_ver" ng-click="verCompra(compra)">
									<i class="ace-icon fa fa-search-plus bigger-130"></i>
								</a>
								<a class="green" href="javascript:void(0)" e-disabled="!aplicacion.puede_modificar" ng-click="modificarCompra(compra)">
									<i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
								</a>
							</div>

							<div class="hidden-md hidden-lg">
								<div class="inline pos-rel">
									<button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown" data-position="auto">
										<i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
									</button>

									<ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
										<li>
											<a href="javascript:void(0)" ng-click="imprimirCompra(compra)" class="tooltip-info" data-rel="tooltip" title="View">
												<span class="green">
													<i class="ace-icon fa fa-print bigger-120"></i>
												</span>
											</a>
										</li>
										<li>
											<a href="javascript:void(0)" e-disabled="!aplicacion.puede_ver" ng-click="verCompra(compra)" class="tooltip-info" data-rel="tooltip"
											 title="View">
												<span class="blue">
													<i class="ace-icon fa fa-search-plus bigger-120"></i>
												</span>
											</a>
										</li>
										<li>
											<a href="javascript:void(0)" e-disabled="!aplicacion.puede_modificar" ng-click="modificarCompra(compra)" class="tooltip-success"
											 data-rel="tooltip" title="Edit">
												<span class="green">
													<i class="ace-icon fa fa-pencil-square-o bigger-120"></i>
												</span>
											</a>
										</li>
									</ul>
								</div>
							</div>
						</td>

					</tr>
					<tr ng-if="compras.length>0">
						<td colspan="7"></td>
						<td>
							<b>TOTAL</b>
						</td>
						<td colspan="5">{{sumarMonto(compras)|number:2}}</td>

					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>

<div id="modal-wizard-compra-edicion" class="modal wizard-posicion">

	<div class="row">
		<div class="col-sm-4">
			<div class="widget-box">
				<form id="formularioCompra" name="formularioCompra" novalidate ng-submit="guardarCompra(formularioCompra.$valid,compra)">
					<div class="widget-header">
						<h4 class="widget-title">DATOS DE COMPRA</h4>
						&nbsp;
						<button id="btnguardar" type="submit" ng-disabled="compra.detallesCompra.length==0" class="btn btn-primary">
							<i class="ace-icon fa fa-floppy-o align-top bigger-125"></i>
							GUARDAR
						</button>
						<button type="button" class="btn btn-primary btn-danger" ng-click="cerrarPopupEdicion()">
							<i class="ace-icon fa fa-times red2 align-top bigger-125"></i>
							CERRAR
						</button>
					</div>

					<div class="widget-body">
						<div class="widget-main">
							<table class="table table-striped table-bordered table-hover">
								<tr ng-if="usuario.empresa.usar_funciones_erp">
									<td>
										<label>MOVIMIENTO</label>
										<select style="width:180px" ng-disabled="compra.detallesCompra.length>0" ng-change="verificarMomivmiento(compra)" data-validate="validate(required)"
										 required id="movimiento" name="movimiento" ng-model="compra.movimiento.clase" data-placeholder="Click para escoger"
										 ng-options="movimiento as movimiento.nombre for movimiento in movimientosIngreso track by movimiento.id">
											<!--<option ng-disabled="movimiento.nombre_corto==diccionario.EGRE_AJUSTE" ng-repeat="movimiento in movimientosEgreso" value="{{movimiento.id}}-{{movimiento.nombre_corto}}">{{movimiento.nombre}}</option>-->
										</select>
										<span class="red">(*)</span>


									</td>
									<td>

										<div class="col-md-8">
											<div>
												<label>PRODUCTO</label>
											</div>

											<label uib-tooltip="Usar Producto">

												<input ng-disabled="compra.movimiento.clase.nombre==diccionario.MOVING_POR_IMPORTACION||compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_SERVICIOS||compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES||compra.detallesCompra.length>0"
												 ng-model="compra.usar_producto" checked="checked" type="checkbox" class="ace ace-switch ace-switch-5">
												<span class="lbl" data-lbl="Si&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No"></span>
											</label>

										</div>
										<div class="col-md-4">
											<a class=" pull-right" href="javascript:void(0)" ng-click="abrirDialogPedidos()">
												<img src="img/icono-pedidos.png" height="50" width="50" alt="">

											</a>
										</div>
										<div class="col-md-6" ng-if="compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_SERVICIOS||compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">

											<div>
												<label>EMPRESA</label>
											</div>



										</div>
										<div class="col-md-6" ng-if="compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_SERVICIOS||compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
											<label uib-tooltip="Tipo Retencion??">

												<input ng-change="calcularImporte()" ng-model="compra.tipo_retencion" checked="checked" type="checkbox" class="ace ace-switch ace-switch-5">
												<span class="lbl" data-lbl="Si&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No"></span>
											</label>
										</div>

									</td>
								</tr>
								<tr>

									<td>
										<label>NIT</label>
										<input id="nit" ng-keypress="interceptarTecla($event,'razon_social',true)" data-validate="validate(required)" required type="number"
										 min="0" ng-model="compra.proveedor.nit" placeholder="Ingrese el NIT..." uib-typeahead="proveedor as proveedor.nit for proveedor in buscarProveedor($viewValue)"
										 typeahead-wait-ms="2000" typeahead-template-url="templates/autocompletar.html" typeahead-show-hint="false" typeahead-min-length="0"
										 typeahead-on-select="establecerProveedor($item, $model, $label, $event)">
										<span class="red">(*)</span>
									</td>
									<td>
										<label>RAZÓN SOCIAL</label>
										<input id="razon_social" ng-keypress="interceptarTecla($event,'factura',true)" data-validate="validate(required)" required
										 type="text" ng-model="compra.proveedor.razon_social" placeholder="Ingrese la Razon Social" uib-typeahead="proveedor as proveedor.razon_social for proveedor in buscarProveedor($viewValue)"
										 typeahead-wait-ms="2000" typeahead-template-url="templates/autocompletar.html" typeahead-show-hint="false" typeahead-min-length="0"
										 typeahead-on-select="establecerProveedor($item, $model, $label, $event)">
										<span class="red">(*)</span>
									</td>
								</tr>
								<tr ng-if="compra.movimiento.clase.nombre!=diccionario.MOVING_POR_COMPRA_SIN_FACTURA&&compra.movimiento.clase.nombre!=diccionario.MOVING_POR_RETENCION_SERVICIOS&&compra.movimiento.clase.nombre!=diccionario.MOVING_POR_RETENCION_BIENES">
									<td>
										<label>NÚM. FACTURA</label>
										<input id="factura" ng-keypress="interceptarTecla($event,'centro_costo',true)" data-validate="validate(required,number)"
										 required type="number" placeholder="factura" ng-model="compra.factura" ng-disabled="compra.movimiento.clase.nombre===diccionario.MOVING_POR_IMPORTACION"
										/>
										<span class="red">(*)</span>
									</td>
									<td>
										<label>NÚM. AUTORIZACIÓN</label>
										<input data-validate="validate(required,number)" ng-disabled="compra.movimiento.clase.nombre===diccionario.MOVING_POR_IMPORTACION"
										 required type="number" placeholder="numero autorizacion" ng-model="compra.autorizacion" />
										<span class="red">(*)</span>
									</td>
								</tr>
								<tr>
									<td>
										<label>FECHA</label>
										<input data-validate="validate(required)" required ng-update-hidden class="form-control date-picker" type="text" data-date-format="dd/mm/yyyy"
										 id="fechaCompra" ng-model="compra.fechaTexto" placeholder="Ingrese la fecha" />
										<span class="red">(*)</span>
									</td>
									<td ng-if="compra.movimiento.clase.nombre!=diccionario.MOVING_POR_COMPRA_SIN_FACTURA">
										<label>CÓDIGO DE CONTROL</label>
										<input capitalize required type="text" placeholder="codigo de control" ng-model="compra.codigo_control" ng-disabled="compra.movimiento.clase.nombre===diccionario.MOVING_POR_IMPORTACION"
										/>
										<span class="red">(*)</span>
									</td>
								</tr>
								<tr>
									<td>
										<label>SUCURSAL</label>
										<select data-validate="validate(required)" required id="sucursal" name="sucursal" ng-options="sucursal as sucursal.nombre for sucursal in sucursales track by sucursal.id"
										 ng-model="compra.sucursal" ng-change="obtenerAlmacenes(compra.sucursal.id)" ng-disabled="compra.id">
										</select>
										<span class="red">(*)</span>
									</td>
									<td ng-if="compra.usar_producto">
										<label>ALMACEN</label>
										<select data-validate="validate(required)" required id="almacen" name="almacen" ng-model="compra.almacen" ng-options="almacen as almacen.nombre for almacen in almacenes track by almacen.id"
										 data-placeholder="Click para escoger" ng-disabled="compra.id"></select>
										<span class="red">(*)</span>
									</td>
								</tr>
								<tr>
									<td>
										<label>TIPO DE PAGO</label>
										<select required id="pago" name="pago" ng-change="cambiarTipoPago(compra.tipoPago)" ng-model="compra.tipoPago" ng-options="tipoPago as tipoPago.nombre for tipoPago in tiposPago track by tipoPago.id"
										 data-placeholder="Click para escoger" ng-disabled="compra.id"></select>
										<span class="red">(*)</span>

									</td>
									<td ng-if="compra.movimiento.clase.nombre===diccionario.MOVING_POR_IMPORTACION">
										<label>
											DUI
										</label>
										<input type="text" class="form-control" ng-model="compra.dui">
									</td>
								</tr>
								<tr>
									<td ng-if="!esContado">
										<label>DIAS</label>
										<input data-validate="validate(required,number)" required type="number" ng-model="compra.dias_credito" />
										<span class="red">(*)</span>
									</td>
									<td ng-if="!esContado">
										<label>SUJETO A DF</label>
										<input disabled type="number" step="0.001" ng-model="compra.total" />
									</td>
								</tr>
								<tr>
									<td ng-if="!esContado">
										<label>A CUENTA (Bs)</label>
										<input data-validate="validate(required,number)" required type="number" step="0.001" ng-model="compra.a_cuenta" value="0.0"
										 ng-change="calcularSaldo()" />
										<span class="red">(*)</span>
									</td>
									<td ng-if="!esContado">
										<label>SALDO</label>
										<input disabled type="number" step="0.001" ng-model="compra.saldo" />
									</td>
								</tr>
								<tr>
									<td>
										<label>DESCUENTOS GENERALES</label>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-disabled="compra.detallesCompra.length>0||compra.movimiento.clase.nombre===diccionario.MOVING_POR_IMPORTACION||compra.movimiento.clase.nombre===diccionario.MOVING_POR_RETENCION_BIENES||compra.movimiento.clase.nombre===diccionario.MOVING_POR_RETENCION_SERVICIOS"
											 ng-model="compra.descuento_general" />
											<span id="descuentos_generales" class="lbl check-descuento"></span>
										</label>
									</td>
								</tr>
								<tr>
									<td ng-if="compra.descuento_general">
										<label>DESCUENTOS (-)</label>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="compra.tipo_descuento" ng-change="recalcular()" />
											<span id="descuentos" class="lbl check-compra"></span>
										</label>
										<input required ng-change="calcularImporteGeneral()" ng-model="compra.descuento" step="0.001" class="col-xs-12" type="number"
										 value="0.0" />
										<span class="red">(*)</span>
									</td>
									<td ng-if="compra.descuento_general">
										<label>RECARGOS (+)</label>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="compra.tipo_recargo" ng-change="recalcular()" />
											<span id="recargos" class="lbl check-compra"></span>
										</label>
										<input required ng-change="calcularImporteGeneral()" ng-model="compra.recargo" step="0.001" class="col-xs-12" type="number"
										 value="0" />
										<span class="red">(*)</span>
									</td>
								</tr>
								<tr>
									<td ng-if="compra.descuento_general">
										<label>ICE (-)</label>
										<input required ng-change="calcularImporteGeneral()" ng-model="compra.ice" step="0.001" class="col-xs-12" type="number" value="0"
										/>
										<span class="red">(*)</span>
									</td>
									<td ng-if="compra.descuento_general">
										<label>EXCENTOS (-)</label>
										<input required ng-change="calcularImporteGeneral()" ng-model="compra.excento" step="0.001" class="col-xs-12" type="number"
										 value="0" />
										<span class="red">(*)</span>
									</td>
									<tr>
										<td colspan="2">
											<a class="green" href="javascript:void(0)" ng-click="compra.usarObservacion=(compra.usarObservacion)?false:true">
												<i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
											</a>
											<label ng-if="compra.usarObservacion">
												<b>OBSERVACIÓN</b>
											</label>
											<input ng-if="compra.usarObservacion" ng-model="compra.observacion" type="text" class="form-control">
										</td>
									</tr>
								</tr>
							</table>
						</div>
					</div>
				</form>
			</div>
		</div>
		<div class="col-sm-8">
			<div class="widget-box" ng-if="compra.usar_producto">
				<div class="widget-header">
					<h4 class="widget-title">BUSQUEDA PRODUCTO</h4>
				</div>
				<div class="widget-body">
					<div class="widget-main">
						<form id="formularioBusquedaProducto" name="formularioBusquedaProducto" novalidate>
							<table class="table table-striped table-bordered table-hover">
								<thead>
									<tr>
										<th>
											<label>CENTRO DE COSTO</label>
										</th>
										<th>
											<label>PRODUCTO</label>
											<!-- <div>
												<div class="col-md-1">
													<a class="green">
														<i class="ace-icon fa fa-barcode dark bigger-250 fa-stack-2x"></i>
														<i class="ace-icon fa  fa-filter red bigger-200 fa-stack-1x"></i>
														
													</a>
												</div>

												<label class="col-md-3 pull-left" uib-tooltip="Usar lector de barra">

													<input ng-model="usuario.usar_lector_de_barra" ng-change="UsarLectorDeBarra()" checked="checked" type="checkbox" class="ace ace-switch ace-switch-5">
													<span class="lbl" data-lbl="Si&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No"></span>
												</label>
											</div> -->
										</th>
										<!--<th>
																	<label>CÓD. ITEM</label>
																</th>-->
										<th>
											<label>UNID. MED.</label>
										</th>
										<th ng-if="usuario.empresa.usar_vencimientos">
											<label>FECHA VENC.</label>
										</th>
										<th ng-if="usuario.empresa.usar_vencimientos">
											<label>LOTE</label>
										</th>
										<th>
											<label>C. U. (Bs/u)</label>
										</th>
										<th>
											<label>CANT. (u)</label>
										</th>
										<th>
											<label>IMP. (Bs)</label>
										</th>
										<th>
											<label>ACC.</label>
										</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>
											<input id="centro_costo" autocomplete="off" ng-keypress="interceptarTecla($event,'id_producto',true)" style="width:130px;"
											 capitalize required ng-disabled="!compra.almacen.id" type="text" ng-model="detalleCompra.centroCosto.nombre" placeholder="Ingrese el centro del costo..."
											 uib-typeahead="centroCosto as centroCosto.nombre for centroCosto in centrosCosto | filter:{nombre:$viewValue}"
											 typeahead-wait-ms="2000" typeahead-template-url="templates/autocompletar.html" typeahead-show-hint="false" typeahead-min-length="0"
											 typeahead-on-select="establecerCentroCosto($item, $model, $label, $event)">

										</td>
										<td>

											<input id="id_producto" ng-keypress="interceptarTecla($event,'fecha_vencimiento',true)" required ng-disabled="!compra.almacen.id"
											 type="text" ng-model="detalleCompra.producto.nombre" placeholder="Ingrese el nombre del producto..." uib-typeahead="producto as (producto.codigo+'-'+producto.nombre+'-'+producto.unidad_medida+'-'+producto.descripcion) for producto in buscarProducto($viewValue)"
											 typeahead-wait-ms="1000" typeahead-template-url="templates/autocompletar.html" typeahead-show-hint="false" typeahead-min-length="3"
											 typeahead-on-select="establecerProducto($item, $model, $label, $event)">
										</td>
										<!--<td ng-if="detalleCompra.producto.nombre.id">
																	{{detalleCompra.producto.nombre.codigo}}
																</td>
																<td ng-if="!detalleCompra.producto.nombre.id">
																	{{detalleCompra.producto.codigo}}
																</td>-->
										<td ng-if="detalleCompra.producto.nombre.id">
											{{detalleCompra.producto.nombre.unidad_medida}}
										</td>
										<td ng-if="!detalleCompra.producto.nombre.id">
											{{detalleCompra.producto.unidad_medida}}
										</td>
										<td ng-if="usuario.empresa.usar_vencimientos">
											<input id="fecha_vencimiento" ng-keypress="interceptarTecla($event,'lote',true)" ng-update-hidden class="form-control date-picker"
											 type="text" data-date-format="dd/mm/yyyy" ng-model="detalleCompra.fechaVencimientoTexto" placeholder="Ingrese la fecha"
											/>
										</td>
										<td ng-if="usuario.empresa.usar_vencimientos">
											<input id="lote" ng-keypress="interceptarTecla($event,'costo_unitario',true)" type="text" ng-model="detalleCompra.lote" class="col-xs-12"
											/>

										</td>
										<td style="text-align:  center;">
											<input onfocus="this.select();" id="costo_unitario" ng-keypress="interceptarTecla($event,'cantidad',true)" required class="col-xs-12"
											 ng-change="calcularImporte()" step="0.001" ng-model="detalleCompra.costo_unitario" value="{{detalleCompra.producto.inventarios.length>0?detalleCompra.producto.nombre.inventarios[0].costo_unitario:0}}"
											 type="number" />

											<span class="blue">
												Último precio
											</span>
											<span class="label label-danger label-white middle tooltip-info" ng-if="precio_inventario" data-rel="tooltip" tooltip-placement="top"
											 uib-tooltip="Último precio de compra">{{precio_inventario}}</span>
										</td>
										<td>
											<input onfocus="this.select();" id="cantidad" ng-keypress="interceptarTecla($event,'agregar_detalle_compra',false)" required
											 class="col-xs-12" ng-change="calcularImporte()" ng-model="detalleCompra.cantidad" type="number" />
										</td>
										<td>
											{{detalleCompra.importe|number:2}}
										</td>
										<td>
											<button id="agregar_detalle_compra" type="button" ng-disabled="formularioBusquedaProducto.$invalid" ng-click="verificarProducto(detalleCompra)"
											 class="btn btn-success btn-sm">
												<i class="ace-icon fa fa-plus bigger-110"></i>
											</button>
											<div class="space-6"></div>
											<button id="mostrar_desc" type="button" ng-click="mostrarDescuentos()" class="btn btn-info btn-sm">
												<i class="ace-icon fa fa-exchange bigger-110"></i>
											</button>
										</td>
									</tr>
									<tr class="des-datos" style="display:none;">
										<th ng-if="!compra.descuento_general">
											<label>DESC. (-)</label>
											<label>
												<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="detalleCompra.tipo_descuento" ng-change="recalcular()"
												/>
												<span class="lbl check-compra"></span>
											</label>
										</th>
										<th ng-if="!compra.descuento_general">
											<label>REC. (+)</label>
											<label>
												<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="detalleCompra.tipo_recargo" ng-change="recalcular()"
												/>
												<span class="lbl check-compra"></span>
											</label>
										</th>
										<th ng-if="!compra.descuento_general">
											<label>ICE (-)</label>
										</th>
										<th ng-if="!compra.descuento_general">
											<label>EXC. (-)</label>
										</th>
										<!--<th>
																	<label>SUJETO A DF</label>
																</th>-->
									</tr>
									<tr class="des-datos" style="display:none;">
										<td ng-if="!compra.descuento_general">
											<input required ng-change="calcularImporte()" ng-model="detalleCompra.descuento" step="0.001" class="col-xs-12" type="number"
											 value="0" />
										</td>
										<td ng-if="!compra.descuento_general">
											<input required ng-change="calcularImporte()" ng-model="detalleCompra.recargo" step="0.001" class="col-xs-12" type="number"
											 value="0" />
										</td>
										<td ng-if="!compra.descuento_general">
											<input required ng-change="calcularImporte()" ng-model="detalleCompra.ice" step="0.001" class="col-xs-12" type="number" value="0"
											/>
										</td>
										<td ng-if="!compra.descuento_general">
											<input required ng-change="calcularImporte()" ng-model="detalleCompra.excento" step="0.001" class="col-xs-12" type="number"
											 value="0" />
										</td>
										<!--<td>
																	{{detalleCompra.total}}
																</td>-->
									</tr>
								</tbody>
							</table>
						</form>
					</div>
				</div>
			</div>
			<div class="widget-box" ng-if="!compra.usar_producto">
				<div class="widget-header">
					<h4 class="widget-title">BUSQUEDA SERVICIOS</h4>
				</div>
				<div class="widget-body">
					<div class="widget-main">
						<form id="formularioBusquedaServicio" name="formularioBusquedaServicio" novalidate>
							<table class="table table-striped table-bordered table-hover">
								<thead>
									<tr>
										<th>
											<label>SERVICIO</label>

										</th>
										<th>
											<label>C. U. (Bs/u)</label>
										</th>
										<th>
											<label>CANT. (u)</label>
										</th>
										<th>
											<label>IMP. (Bs)</label>
										</th>
										<th>
											<label>ACC.</label>
										</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>
											<div class="input-group">
												<span class="input-group-addon glyphicon glyphicon-pencil point-edit green" ng-click="abrirDialogServicios(datosServicios)"></span>


												<input id="id_servicio" autocomplete="off" ng-keypress="interceptarTecla($event,'fecha_vencimiento',true)" required ng-disabled="!compra.sucursal.id"
												 type="text" ng-model="detalleCompra.servicio" placeholder="Ingrese el nombre del servicio..." uib-typeahead="servicio as (servicio.nombre+'-'+servicio.nombre_corto) for servicio in datosServicios.clases"
												 typeahead-wait-ms="1000" typeahead-template-url="templates/autocompletar.html" typeahead-show-hint="false" typeahead-min-length="3"
												 typeahead-on-select="establecerServicio($item, $model, $label, $event)">
											</div>
										</td>

										<td>
											<input autofocus onfocus="this.select();" id="costo_unitario" ng-keypress="interceptarTecla($event,'cantidad',true)" required
											 class="col-xs-12" ng-change="calcularImporte()" step="0.001" ng-model="detalleCompra.costo_unitario" type="number"
											/>
										</td>
										<td>
											<input id="cantidad" ng-keypress="interceptarTecla($event,'agregar_detalle_compra',false)" required class="col-xs-12" ng-change="calcularImporte()"
											 ng-model="detalleCompra.cantidad" type="number" />
										</td>
										<td>
											{{detalleCompra.importe|number:2}}
										</td>
										<td>
											<button id="agregar_detalle_compra" type="button" ng-disabled="formularioBusquedaServicio.$invalid" ng-click="verificarServicio(detalleCompra)"
											 class="btn btn-success btn-sm">
												<i class="ace-icon fa fa-plus bigger-110"></i>
											</button>

										</td>
									</tr>
								</tbody>
							</table>
						</form>
					</div>
				</div>
			</div>
			<div class="widget-box" ng-if="compra.usar_producto">
				<div class="widget-header" ng-if="compra.detallesCompra.length>0">
					<div class="row">
						<div class="col-sm-6">
							<h4 class="widget-title">DETALLE DE COMPRA</h4>
						</div>
						<div class="col-sm-6">
							<div class="inline pos-rel pull-right">
								<a data-toggle="dropdown" href="javascript:void(0)" class="dropdown-toggle">
									<i class="glyphicon  glyphicon-list-alt"></i>
								</a>

								<ul id="campos-detalle-compra" class="dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret">
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_producto" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>NOMBRE</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_codigo_producto" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>CÓD. ITEM</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_unidad_producto" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>UNID. MED.</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_costo_unitario" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>C.U. (Bs/u)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_cantidad" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>CANT. (u)</label>
									</li>
									<li ng-if="usuario.empresa.usar_vencimientos">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_fecha_vencimiento"
											 ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>VENC.</label>
									</li>
									<li ng-if="usuario.empresa.usar_vencimientos">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_lote" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>LOTE</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_importe" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>IMP. (Bs)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_descuento" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>DESC. (-)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_recargo" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>REC. (+)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_ice" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>ICE (-)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_excento" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>EXC. (-)</label>
									</li>
									<li ng-if="compra.movimiento.clase.nombre!=diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_total" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>SUJETO A CF</label>
									</li>
									<li ng-if="usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_it_retencion" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>IT</label>
									</li>
									<li ng-if="usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_iue" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>IUE</label>
									</li>
									<li ng-if="usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_pagado" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>PAGADO</label>
									</li>
									<li class="divider"></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="widget-body" ng-if="compra.detallesCompra.length>0">
					<div class="widget-main">
						<table class="table table-striped table-bordered table-hover">
							<thead>
								<tr>
									<th>
										<label>#</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_producto">
										<label>PRODUCTO</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_codigo_producto">
										<label>CÓD. ITEM</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_unidad_producto">
										<label>UNID. MED.</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_costo_unitario">
										<label>C.U. (Bs/u)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_cantidad">
										<label>CANT. (u)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										<label>VENC</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										<label>LOTE</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_importe">
										<label>IMP. (Bs)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_descuento">
										<label>DESC. (-)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_recargo">
										<label>REC. (+)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_ice">
										<label>ICE (-)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_excento">
										<label>EXC. (-)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre!=diccionario.MOVING_POR_RETENCION_BIENES">
										<label>SUJETO A CF</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_it_retencion && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>IT</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_iue && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>IUE</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_pagado && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>Pagado</label>
									</th>
									<th>
										<label>ACCIONES</label>
									</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="detalleCompra in compra.detallesCompra" ng-if="!detalleCompra.eliminado">
									<td>
										{{$index+1}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_producto">
										{{detalleCompra.producto.nombre}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_codigo_producto">
										{{detalleCompra.producto.codigo}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_unidad_producto">
										{{detalleCompra.producto.unidad_medida}}
									</td>
									<td ng-if="!compra.id && configuracionCompraVista.mostrar_costo_unitario">
										{{detalleCompra.costo_unitario}}
									</td>
									<td ng-if="!compra.id && configuracionCompraVista.mostrar_cantidad">
										{{detalleCompra.cantidad}}
									</td>
									<td ng-if="compra.id && configuracionCompraVista.mostrar_costo_unitario">
										<input required class="col-xs-12" ng-change="calcularImporteDetalleEdicion(detalleCompra)" step="0.001" ng-model="detalleCompra.costo_unitario"
										 type="number" min="0.001" />
									</td>
									<td ng-if="compra.id && configuracionCompraVista.mostrar_cantidad">
										<input required class="col-xs-12" ng-change="calcularImporteDetalleEdicion(detalleCompra)" step="0.001" ng-model="detalleCompra.cantidad"
										 type="number" min="0.001" />
									</td>
									<td ng-if="(!compra.id || !detalleCompra.id) && configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										{{detalleCompra.fechaVencimientoTexto}}
									</td>
									<td ng-if="(compra.id && detalleCompra.id) && configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										<input ng-update-hidden class="form-control date-picker" type="text" data-date-format="dd/mm/yyyy" ng-model="detalleCompra.inventario.fechaVencimientoTexto"
										 placeholder="Ingrese la fecha" />
									</td>
									<td ng-if="(!compra.id || !detalleCompra.id) && configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										{{detalleCompra.lote}}
									</td>
									<td ng-if="(compra.id && detalleCompra.id) && configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										<input class="col-xs-12" type="text" ng-model="detalleCompra.inventario.lote" />
									</td>
									<td ng-if="configuracionCompraVista.mostrar_importe">
										{{detalleCompra.importe|number:2}}
									</td>
									<td ng-if="!compra.descuento_general && configuracionCompraVista.mostrar_descuento">
										{{detalleCompra.descuento|number:2}}
									</td>
									<td ng-if="!compra.descuento_general && configuracionCompraVista.mostrar_recargo">
										{{detalleCompra.recargo|number:2}}
									</td>
									<td ng-if="!compra.descuento_general && configuracionCompraVista.mostrar_ice">
										{{detalleCompra.ice|number:2}}
									</td>
									<td ng-if="!compra.descuento_general && configuracionCompraVista.mostrar_excento">
										{{detalleCompra.excento|number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_descuento">
										{{compra.descuento|number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_recargo">
										{{compra.recargo|number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_ice">
										{{compra.ice|number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_excento">
										{{compra.excento|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre!=diccionario.MOVING_POR_RETENCION_BIENES">
										{{detalleCompra.total|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_it_retencion && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>{{detalleCompra.it|number:2}}</label>
									</td>
									<td ng-if="configuracionCompraVista.mostrar_iue && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>{{detalleCompra.iue|number:2}}</label>
									</td>
									<td ng-if="configuracionCompraVista.mostrar_pagado && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>{{detalleCompra.total|number:2}}</label>
									</td>
									<td>
										<a class="red" href="javascript:void(0)" ng-click="eliminarDetalleCompra(detalleCompra)">
											<i class="ace-icon fa fa-trash-o bigger-130"></i>
										</a>
									</td>
								</tr>
								<tr>
									<td>

									</td>
									<td ng-if="configuracionCompraVista.mostrar_producto">
										<b>TOTALES</b>
									</td>
									<td ng-if="configuracionCompraVista.mostrar_codigo_producto">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_unidad_producto">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_costo_unitario">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_cantidad">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_importe">
										{{compra.importe|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_descuento">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_recargo">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_ice">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_excento">

									</td>
									<td id="total_compra" ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre!=diccionario.MOVING_POR_RETENCION_BIENES">
										{{compra.total|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_it_retencion">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_iue">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_pagado">
										{{compra.total|number:2}}
									</td>
									<td>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="widget-box" ng-if="!compra.usar_producto">
				<div class="widget-header" ng-if="compra.detallesCompra.length>0">
					<div class="row">
						<div class="col-sm-6">
							<h4 class="widget-title">DETALLE DE COMPRA</h4>
						</div>
						<div class="col-sm-6">
							<div class="inline pos-rel pull-right">
								<a data-toggle="dropdown" href="javascript:void(0)" class="dropdown-toggle">
									<i class="glyphicon  glyphicon-list-alt"></i>
								</a>

								<ul id="campos-detalle-compra" class="dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret">
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_producto" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>NOMBRE</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_codigo_producto" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>CÓD. ITEM</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_unidad_producto" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>UNID. MED.</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_costo_unitario" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>C.U. (Bs/u)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_cantidad" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>CANT. (u)</label>
									</li>
									<li ng-if="usuario.empresa.usar_vencimientos">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_fecha_vencimiento"
											 ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>VENC.</label>
									</li>
									<li ng-if="usuario.empresa.usar_vencimientos">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_lote" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>LOTE</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_importe" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>IMP. (Bs)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_descuento" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>DESC. (-)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_recargo" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>REC. (+)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_ice" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>ICE (-)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_excento" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>EXC. (-)</label>
									</li>
									<li ng-if="compra.movimiento.clase.nombre!=diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_total" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>SUJETO A CF</label>
									</li>
									<li ng-if="usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_it_retencion" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>IT</label>
									</li>
									<li ng-if="usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_iue" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>IUE</label>
									</li>
									<li ng-if="usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="configuracionCompraVista.mostrar_pagado" ng-change="guardarConfiguracionCompraVista()"
											/>
											<span class="lbl check-descuento"></span>
										</label>
										<label>PAGADO</label>
									</li>
									<li class="divider"></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="widget-body" ng-if="compra.detallesCompra.length>0">
					<div class="widget-main">
						<table class="table table-striped table-bordered table-hover">
							<thead>
								<tr>
									<th>
										<label>#</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_producto">
										<label>SERVICIO</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_codigo_producto">
										<label>CÓD. ITEM</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_unidad_producto">
										<label>UNID. MED.</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_costo_unitario">
										<label>C.U. (Bs/u)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_cantidad">
										<label>CANT. (u)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										<label>VENC</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										<label>LOTE</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_importe">
										<label>IMP. (Bs)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_descuento">
										<label>DESC. (-)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_recargo">
										<label>REC. (+)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_ice">
										<label>ICE (-)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_excento">
										<label>EXC. (-)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre!=diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>SUJETO A CF</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_it_retencion && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>IT</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_iue && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>IUE</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_pagado && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>Pagado</label>
									</th>
									<th>
										<label>ACCIONES</label>
									</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="detalleCompra in compra.detallesCompra" ng-if="!detalleCompra.eliminado">
									<td>
										{{$index+1}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_producto">
										{{detalleCompra.servicio.nombre}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_codigo_producto">
										{{detalleCompra.producto.codigo}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_unidad_producto">
										{{detalleCompra.producto.unidad_medida}}
									</td>
									<td ng-if="!compra.id && configuracionCompraVista.mostrar_costo_unitario">
										{{detalleCompra.costo_unitario}}
									</td>
									<td ng-if="!compra.id && configuracionCompraVista.mostrar_cantidad">
										{{detalleCompra.cantidad}}
									</td>
									<td ng-if="compra.id && configuracionCompraVista.mostrar_costo_unitario">
										<input required class="col-xs-12" ng-change="calcularImporteDetalleEdicion(detalleCompra)" step="0.001" ng-model="detalleCompra.costo_unitario"
										 type="number" min="0.001" />
									</td>
									<td ng-if="compra.id && configuracionCompraVista.mostrar_cantidad">
										<input required class="col-xs-12" ng-change="calcularImporteDetalleEdicion(detalleCompra)" step="0.001" ng-model="detalleCompra.cantidad"
										 type="number" min="0.001" />
									</td>
									<td ng-if="(!compra.id || !detalleCompra.id) && configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										{{detalleCompra.fechaVencimientoTexto}}
									</td>
									<td ng-if="(compra.id && detalleCompra.id) && configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										<input ng-update-hidden class="form-control date-picker" type="text" data-date-format="dd/mm/yyyy" ng-model="detalleCompra.inventario.fechaVencimientoTexto"
										 placeholder="Ingrese la fecha" />
									</td>
									<td ng-if="(!compra.id || !detalleCompra.id) && configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										{{detalleCompra.lote}}
									</td>
									<td ng-if="(compra.id && detalleCompra.id) && configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										<input class="col-xs-12" type="text" ng-model="detalleCompra.inventario.lote" />
									</td>
									<td ng-if="configuracionCompraVista.mostrar_importe">
										{{detalleCompra.importe|number:2}}
									</td>
									<td ng-if="!compra.descuento_general && configuracionCompraVista.mostrar_descuento">
										{{detalleCompra.descuento|number:2}}
									</td>
									<td ng-if="!compra.descuento_general && configuracionCompraVista.mostrar_recargo">
										{{detalleCompra.recargo|number:2}}
									</td>
									<td ng-if="!compra.descuento_general && configuracionCompraVista.mostrar_ice">
										{{detalleCompra.ice|number:2}}
									</td>
									<td ng-if="!compra.descuento_general && configuracionCompraVista.mostrar_excento">
										{{detalleCompra.excento|number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_descuento">
										{{compra.descuento|number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_recargo">
										{{compra.recargo|number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_ice">
										{{compra.ice|number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_excento">
										{{compra.excento|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre!=diccionario.MOVING_POR_RETENCION_SERVICIOS">
										{{detalleCompra.total|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_it_retencion && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>{{detalleCompra.it|number:2}}</label>
									</td>
									<td ng-if="configuracionCompraVista.mostrar_iue && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>{{detalleCompra.iue|number:2}}</label>
									</td>
									<td ng-if="configuracionCompraVista.mostrar_pagado && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>{{detalleCompra.total|number:2}}</label>
									</td>
									<td>
										<a class="red" href="javascript:void(0)" ng-click="eliminarDetalleCompra(detalleCompra)">
											<i class="ace-icon fa fa-trash-o bigger-130"></i>
										</a>
									</td>
								</tr>
								<tr>
									<td>

									</td>
									<td ng-if="configuracionCompraVista.mostrar_producto">
										<b>TOTALES</b>
									</td>
									<td ng-if="configuracionCompraVista.mostrar_codigo_producto">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_unidad_producto">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_costo_unitario">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_cantidad">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_importe">
										{{compra.importe|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_descuento">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_recargo">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_ice">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_excento">

									</td>
									<td id="total_compra" ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre!=diccionario.MOVING_POR_RETENCION_SERVICIOS">
										{{compra.total|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_it_retencion">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_iue">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_pagado && compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										{{compra.total|number:2}}
									</td>

									<td>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

</div>
<!-- PAGE CONTENT ENDS -->

<div id="modal-wizard-compra-vista" class="modal wizard-posicion">
	<div class="row">
		<div class="col-sm-12">
			<div class="widget-box">
				<div class="widget-header">
					<h4 class="widget-title">DATOS DE COMPRA</h4>
					&nbsp;
					<button class="btn btn-primary btn-danger" ng-click="cerrarPopupVista()">
						<i class="ace-icon fa fa-times red2 align-top bigger-125"></i>
						CERRAR
					</button>
				</div>

				<div class="widget-body">
					<div class="widget-main">
						<table class="table table-striped table-bordered table-hover">
							<tr ng-if="usuario.empresa.usar_funciones_erp">
								<td>
									<label>MOVIMIENTO</label>
								</td>
								<td ng-if="compra.movimiento.clase">
									{{compra.movimiento.clase.nombre}}
								</td>
								<td ng-if="!compra.movimiento.clase">
									{{compra.tipoMovimiento.nombre}}
								</td>
								<td>
									COMPRA DE
								</td>
								<td>

									<div ng-if="compra.usar_producto">

										<label>PRODUCTOS</label>

									</div>
									<div ng-if="!compra.usar_producto">

										<label>SERVICIOS</label>

									</div>

								</td>
								<td ng-if="compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_SERVICIOS||compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
									TIPO RETENCION
								</td>
								<td ng-if="compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_SERVICIOS||compra.movimiento.clase.nombre==diccionario.MOVING_POR_RETENCION_BIENES">
									<div ng-if="compra.tipo_retencion">

										<label>COMPRA DE PRODUCTOS</label>

									</div>
									<div ng-if="!compra.tipo_retencion">

										<label>COMPRA DE SERVICIO</label>

									</div>
								</td>
							</tr>
							<tr>
								<td>
									<label>NIT</label>
								</td>
								<td>
									{{compra.proveedor.nit}}
								</td>
								<td>
									<label>RAZÓN SOCIAL</label>
								</td>
								<td>
									{{compra.proveedor.razon_social}}
								</td>
								<td>
									<label>NÚM. FACTURA</label>
								</td>
								<td>
									{{compra.factura}}
								</td>
							</tr>
							<tr>
								<td>
									<label>NÚM. AUTORIZACIÓN</label>
								</td>
								<td>
									{{compra.autorizacion}}
								</td>
								<td>
									<label>FECHA</label>
								</td>
								<td>
									{{compra.fecha | date:"dd/MM/yyyy"}}
								</td>
								<td>
									<label>CÓDIGO DE CONTROL</label>
								</td>
								<td>
									{{compra.codigo_control}}
								</td>
							</tr>
							<tr>
								<td>
									<label>SUCURSAL</label>
								</td>
								<td ng-if="compra.almacen">
									{{compra.almacen.sucursal.nombre}}
								</td>
								<td ng-if="!compra.almacen">
									{{compra.sucursal.nombre}}
								</td>
								<td ng-if="compra.almacen">
									<label>ALMACÉN</label>
								</td>
								<td ng-if="compra.almacen">
									{{compra.almacen.nombre}}
								</td>
								<td>

								</td>
								<td>

								</td>
							</tr>
							<tr>
								<td>
									TIPO DE PAGO : {{compra.tipoPago.nombre}}
								</td>
								<td ng-if="compra.saldo">
									DIAS : {{compra.dias_credito}}
								</td>
								<td ng-if="compra.saldo">
									SUJETO A DF : {{compra.total}}
								</td>
								<td ng-if="compra.saldo">
									A CUENTA (Bs) : {{compra.a_cuenta}}
								</td>
								<td ng-if="compra.saldo">
									SALDO : {{compra.saldo}}
								</td>
							</tr>
							<tr>
								<td>
									<label>DESCUENTOS GENERALES</label>
								</td>
								<td>
									<label>
										<input class="ace ace-switch ace-switch-4" type="checkbox" ng-disabled="true" ng-model="compra.descuento_general" />
										<span class="lbl check-descuento"></span>
									</label>
								</td>
								<td ng-if="compra.descuento_general">
									<label>DESCUENTOS (-)</label>
									<label>
										<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="compra.tipo_descuento" ng-disabled="true" />
										<span class="lbl check-compra"></span>
									</label>
									{{compra.descuento}}
								</td>
								<td ng-if="compra.descuento_general">
									<label>RECARGOS (+)</label>
									<label>
										<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="compra.tipo_recargo" ng-change="recalcular()" />
										<span class="lbl check-compra"></span>
									</label>
									{{compra.recargo}}
								</td>
								<td ng-if="compra.descuento_general">
									<label>ICE (-)</label>
									<input required ng-change="calcularImporteGeneral()" ng-model="compra.ice" step="0.001" class="col-xs-12" type="number" value="0"
									/>
								</td>
								<td ng-if="compra.descuento_general">
									<label>EXCENTOS (-)</label>
									{{compra.excento}}
								</td>
							</tr>
						</table>
					</div>
				</div>
			</div>
			<div class="space-6"></div>
			<div class="widget-header" ng-if="compra.detallesCompra.length>0">
				<h4 class="widget-title">DETALLE DE COMPRA</h4>
			</div>
			<div class="widget-body" ng-if="compra.detallesCompra.length>0">
				<div class="widget-main">
					<table class="table table-striped table-bordered table-hover">
						<thead>
							<tr>
								<th>
									<label>NOMBRE</label>
								</th>
								<th>
									<label>CÓDIGO ÍTEM</label>
								</th>
								<th>
									<label>UNIDAD DE MEDIDA</label>
								</th>
								<th>
									<label>COSTO UNITARIO (Bs/u)</label>
								</th>
								<th>
									<label>CANTIDAD (u)</label>
								</th>
								<th>
									<label>IMPORTE (Bs)</label>
								</th>
								<th ng-if="!compra.descuento_general">
									<label>DESCUENTOS (-)</label>
								</th>
								<th ng-if="!compra.descuento_general">
									<label>RECARGOS (+)</label>
								</th>
								<th ng-if="!compra.descuento_general">
									<label>ICE (-)</label>
								</th>
								<th ng-if="!compra.descuento_general">
									<label>EXENTOS (-)</label>
								</th>
								<th>
									<label>SUJETO A CF</label>
								</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="detalleCompra in compra.detallesCompra">
								<td ng-if="detalleCompra.producto">
									{{detalleCompra.producto.nombre}}
								</td>
								<td ng-if="detalleCompra.servicio">
									{{detalleCompra.servicio.nombre}}
								</td>
								<td>
									<span ng-if="detalleCompra.producto">{{detalleCompra.producto.codigo}}</span>
								</td>
								<td>
									<span ng-if="detalleCompra.producto">{{detalleCompra.producto.unidad_medida}}</span>
								</td>
								<td>
									{{detalleCompra.costo_unitario}}
								</td>
								<td>
									{{detalleCompra.cantidad}}
								</td>
								<td>
									{{detalleCompra.importe}}
								</td>
								<td ng-if="!compra.descuento_general">
									{{detalleCompra.descuento}}
								</td>
								<td ng-if="!compra.descuento_general">
									{{detalleCompra.recargo}}
								</td>
								<td ng-if="!compra.descuento_general">
									{{detalleCompra.ice}}
								</td>
								<td ng-if="!compra.descuento_general">
									{{detalleCompra.excento}}
								</td>
								<td>
									{{detalleCompra.total}}
								</td>
							</tr>
							<tr>
								<td>
									<b>TOTALES</b>
								</td>
								<td>

								</td>
								<td>

								</td>
								<td>

								</td>
								<td>

								</td>
								<td>
									{{compra.importe}}
								</td>
								<td ng-if="!compra.descuento_general">

								</td>
								<td ng-if="!compra.descuento_general">

								</td>
								<td ng-if="!compra.descuento_general">

								</td>
								<td ng-if="!compra.descuento_general">

								</td>
								<td>
									{{compra.total}}
								</td>
								<td>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>
</div>
<div id="dialog-eliminar-compra" title="¿Eliminación de Compra?">
	<p>
		<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>¿Esta seguro de eliminar la sucursal seleccionada?</p>
	<button type="button" class="btn btn-danger" ng-click="eliminarSucursal(sucursal)">Si</button>
	<button type="button" class="btn btn-success" ng-click="cerrarConfirmacionEliminacion()">No</button>
</div>
<div id="dialog-pago" title="Cobro deuda pendiente">
	<form name="formularioPago" novalidate ng-submit="efectuarPago(pago)">

		<div ng-if="compra.tipoPago.nombre==diccionario.TIPO_PAGO_CREDITO" class="hidden-sm hidden-xs action-buttons">
			<p class="center">{{compra.proveedor.razon_social}}</p>
			<p class="center">
				<b>Factura Nro. </b>{{compra.factura}}</p>
			<b>Plazo: </b>{{compra.dias_credito}} días&nbsp
			<b>A cuenta: Bs </b>{{compra.a_cuenta}}&nbsp
			<b>Saldo: Bs </b>{{compra.saldo}}&nbsp
			<b>Importe: Bs. </b>{{compra.total}}&nbsp
		</div>
		<p>
			<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>¿Ingrese el monto a pagar?</p>
		<input required ng-model="pago" min="1" max="compra.saldo" type="number" step="0.001">
		<button type="submit" class="btn btn-success" ng-disabled="formularioPago.$invalid">Pagar</button>
		<button type="button" class="btn btn-danger" ng-click="cerrarPopupPago()">Cancelar</button>
	</form>
</div>
<!-- === modal SERVICIOS"==== -->
<div id="dialog-servicios" class="modal" t item-width="500">
	<div class="modal-header bg-primary">
		<h4 class='smaller text-white text-uppercase'>
			<i class='icono-prerequisito'></i>
			<label> &nbsp;{{tipo_edicion.nombre}}:</label>
		</h4>
	</div>
	<div class="modal-body">
		<form ng-submit="agregarConceptoEdicion(clase)">

			<div class="row">


				<div class="col-sm-4">
					<div class="form-group">
						<label for="servicio">Servicio</label>
						<input type="text" ng-model="clase.nombre" type="text" capitalize style="text-transform:uppercase;" class="form-control"
						 id="servicio" name="servicio" placeholder="Servicio">
					</div>
				</div>
				<div class="col-sm-4">
					<div class="form-group">
						<label for="comentario">Comentario</label>
						<input type="text" ng-model="clase.nombre_corto" type="text" capitalize style="text-transform:uppercase;" class="form-control"
						 id="comentario" name="comentario" placeholder="Comentario">
					</div>
				</div>
				<div class="col-sm-2">
					<br>
					<div class="form-group">
						<!-- <button type="button" class="btn btn-success" ng-click="AgregarDepartamento(clase)">
                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                    </button> -->
						<button ng-if="!clase.edit" type="submit" class="btn btn-success">
							<span class="glyphicon glyphicon-plus" aria-hidden="true">Agregar</span>
						</button>
						<button ng-if="clase.edit" type="submit" class="btn btn-primary">
							<span class="glyphicon glyphicon-plus" aria-hidden="true">Modificar</span>
						</button>
						<button ng-if="clase.edit" type="button" class="btn btn-danger" ng-click="cancelarEdicionDepartamento(clase)">
							<span class="" aria-hidden="true">Cancelar</span>
						</button>
					</div>
				</div>
			</div>
		</form>
		<table class="table table-striped table-hover">
			<thead>
				<tr>
					<th>Servicio</th>
					<th>Comentario</th>
					<th>Editar</th>
					<th>Habilitar</th>
					<th>Acciones</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="clase in tipo_edicion.clases">
					<th scope="row">{{clase.nombre}}</th>
					<th scope="row">{{clase.nombre_corto}}</th>
					<td>
						<a href="javascript:void(0)" ng-click="modificarConceptoEdicion(clase)">
							<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
						</a>
					</td>
					<td>
						<label>
							<input name="switch-field-1" class="ace ace-switch ace-switch-5" type="checkbox" ng-model="clase.habilitado">
							<span class="lbl check-espaniol"></span>
						</label>
					</td>
					<td>
						<a href="javascript:void(0)" role="button" data-rel="tooltip" data-placement="top" uib-tooltip="Anticipos Regulares" ng-click="establecerServicioSeleccionado(clase)">
							<span class="badge badge-success ">
								<span class="fa fa-check bigger-200" aria-hidden="true"></span>
							</span>
						</a>

					</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="modal-footer wizard-actions">
		<button class="btn btn-primary btn-sm" ng-click="guardarConceptoEdicion(tipo_edicion)">
			<i class="glyphicon glyphicon-floppy-disk"></i>Guardar
		</button>
		<button class="btn btn-danger btn-sm" ng-click="cerrarDialogServicios()">
			<i class="ace-icon fa fa-times"></i>Cancelar
		</button>
	</div>

</div>
<!-- ========= fin SERVICIOS ========= -->

<!-- === modal pedidos"==== -->
<div id="dialog-pedidos" class="modal" t item-width="500">
	<div class="modal-header bg-primary">
		<h4 class='smaller text-white text-uppercase'>
			<i class='icono-prerequisito'></i>
			<label>Pedidos</label>
		</h4>
	</div>
	<div class="modal-body">
		<form ng-submit="agregarConceptoEdicion(clase)">

			<div class="row">



			</div>
		</form>
		<table class="table table-striped table-hover">
			<thead>
				<tr>
					<th>Provedor</th>
					<th>Sucursal</th>
					<th>Fecha</th>

					<th>Acciones</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="pedido in pedidos">
					<td>{{pedido.proveedor.razon_social}}</td>
					<td></td>
					<td>{{pedido.fecha | date:"dd/MM/yyyy"}}</td>

					<td>
						<label ng-if="!pedido.eliminado"> 
							<a  ng-click="abrirDialogDetallePedidos(pedido)">
								<i class="fa fa-check bigger-200"></i>
							</a>
						</label>
						<label>
							<a class="red" ng-click="abrirDialogEliminarPedido(pedido)">
								<i class="fa fa-trash-o bigger-200"></i>
							</a>
						</label>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="modal-footer wizard-actions">

		<button class="btn btn-danger btn-sm" ng-click="cerrarDialogPedidos()">
			<i class="ace-icon fa fa-times"></i>Cancelar
		</button>
	</div>

</div>
<!-- ========= fin pedidos ========= -->
<div id="dialog-eliminar-pedido" title="¿Eliminación de pedido?">
		<p>
			<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>¿Esta seguro de eliminar el pedido seleccionado?
		</p>
		<button type="button" class="btn btn-danger" ng-click="EliminarPedido(pedido)">Si</button>
		<button type="button" class="btn btn-success" ng-click="cerrarDialogEliminarPedido()">No</button>
	</div>
	<div id="dialog-eliminar-producto-pedido" title="¿Eliminación de pedido?">
		<p>
			<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>¿Esta seguro de eliminar el producto seleccionado?
		</p>
		<button type="button" class="btn btn-danger" ng-click="EliminarPedidoDetalle(detalle)">Si</button>
		<button type="button" class="btn btn-success" ng-click="cerrarDialogEliminarPedido()">No</button>
	</div>
<!-- === modal detalle pedidos"==== -->
<div id="dialog-detalle-pedidos" class="modal" t item-width="500">
	<div class="modal-header bg-primary">
		<h4 class='smaller text-white text-uppercase'>
			<i class='icono-prerequisito'></i>
			<label>Detalle Pedido</label>
		</h4>
	</div>
	<form name="formDetallePedido" id="formDetallePedido" ng-submit="guardarDetalleCompraDePedido(pedido.detallesPedido)">
		<div class="modal-body">

			<div class="widget-box" ng-if="compra.usar_producto">
				<div class="widget-header">
					<h4 class="widget-title">BUSQUEDA PRODUCTO</h4>
				</div>
				<button type="button" ng-click="verDescuentosPedido()" class="btn btn-info btn-sm">
					<i class="ace-icon fa fa-exchange bigger-110"></i>
				</button>
				<div class="widget-body">
					<div class="widget-main">

						<table class="table table-striped table-bordered table-hover">
							<thead>
								<tr>

									<th>
										<label>PRODUCTO</label>

									</th>

									<th>
										<label>UNID. MED.</label>
									</th>
									<th ng-if="usuario.empresa.usar_vencimientos">
										<label>FECHA VENC.</label>
									</th>
									<th ng-if="usuario.empresa.usar_vencimientos">
										<label>LOTE</label>
									</th>
									<th>
										<label>C. U. (Bs/u)</label>
									</th>
									<th>
										<label>CANT. (u)</label>
									</th>
									<th ng-if="verDescuento">
										<label>DESC. (-)</label>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="detalle.detalleCompra.tipo_descuento" ng-change="recalcular()"
											/>
											<span class="lbl check-compra"></span>
										</label>
									</th>
									<th ng-if="verDescuento">
										<label>REC. (+)</label>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox" ng-model="detalle.detalleCompra.tipo_recargo" ng-change="recalcular()"
											/>
											<span class="lbl check-compra"></span>
										</label>
									</th>
									<th ng-if="verDescuento">
										<label>ICE (-)</label>
									</th>
									<th ng-if="verDescuento">
										<label>EXC. (-)</label>
									</th>

									<th>
										<label>IMP. (Bs)</label>
									</th>

									<th>
										<label>ACC.</label>
									</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="detalle in pedido.detallesPedido | filter:{eliminado:false}">
									<td>
										{{detalle.detalleCompra.producto.nombre}}
									</td>
									<td ng-if="detalle.detalleCompra.producto.nombre.id">
										{{detalle.detalleCompra.producto.nombre.unidad_medida}}
									</td>
									<td ng-if="!detalle.detalleCompra.producto.nombre.id">
										{{detalle.detalleCompra.producto.unidad_medida}}
									</td>
									<td ng-if="usuario.empresa.usar_vencimientos">
										<input ng-keypress="interceptarTecla($event,'lote',true)" ng-update-hidden class="form-control date-picker" type="text" data-date-format="dd/mm/yyyy"
										 ng-model="detalle.detalleCompra.fechaVencimientoTexto" placeholder="Ingrese la fecha" />
									</td>
									<td ng-if="usuario.empresa.usar_vencimientos">
										<input ng-keypress="interceptarTecla($event,'costo_unitario',true)" type="text" ng-model="detalle.detalleCompra.lote" class="col-xs-12"
										/>
									</td>
									<td>
										<input required onfocus="this.select();" ng-keypress="interceptarTecla($event,'cantidad',true)" class="col-xs-12" ng-change="calcularImportePedido(detalle.detalleCompra)"
										 step="0.001" min="0.001" ng-model="detalle.detalleCompra.costo_unitario" value="{{detalle.detalleCompra.producto.inventarios.length>0?detalle.detalleCompra.producto.nombre.inventarios[0].costo_unitario:0}}"
										 type="number" required/>
									</td>
									<td>
										<!-- <input onfocus="this.select();" id="cantidad" ng-keypress="interceptarTecla($event,'agregar_detalle_compra',false)" required
											 class="col-xs-12" ng-change="calcularImportePedido(detalle.detalleCompra)" ng-model="detalle.detalleCompra.cantidad" type="number" /> -->
										{{detalle.detalleCompra.cantidad}}
									</td>

									<td ng-if="verDescuento">
										<input required ng-change="calcularImportePedido(detalle.detalleCompra)" ng-model="detalle.detalleCompra.descuento" step="0.001"
										 class="col-xs-12" type="number" value="0" />
									</td>
									<td ng-if="verDescuento">
										<input required ng-change="calcularImportePedido(detalle.detalleCompra)" ng-model="detalle.detalleCompra.recargo" step="0.001"
										 class="col-xs-12" type="number" value="0" />
									</td>
									<td ng-if="verDescuento">
										<input required ng-change="calcularImportePedido(detalle.detalleCompra)" ng-model="detalle.detalleCompra.ice" step="0.001"
										 class="col-xs-12" type="number" value="0" />
									</td>
									<td ng-if="verDescuento">
										<input required ng-change="calcularImportePedido(detalle.detalleCompra)" ng-model="detalle.detalleCompra.excento" step="0.001"
										 class="col-xs-12" type="number" value="0" />
									</td>
									<td>
										{{detalle.detalleCompra.importe|number:2}}
									</td>
									<td>



										<button type="button" ng-click="abrirDialogEliminarDetallePedido(detalle)" class="btn btn-danger btn-sm">
											<i class="ace-icon fa fa-trash-o bigger-110"></i>
										</button>
									</td>
								</tr>

							</tbody>
						</table>

					</div>
				</div>
			</div>

		</div>
		<div class="modal-footer wizard-actions">
			<button class="btn btn-success btn-sm" type="submit">
				<i class="ace-icon fa fa-disck bigger-110">Generar Detalle Compra</i>
			</button>
			<button class="btn btn-danger btn-sm pull-left" ng-click="cerrarDialogDetallePedidos()">
				<i class="ace-icon fa fa-times"></i>Cancelar
			</button>
		</div>
	</form>

</div>
<!-- ========= fin detalle pedidos ========= -->