<div class="row">
	<div class="col-xs-12">
		<h3 class="header smaller lighter blue">Despachos</h3>

		<div class="clearfix">
			<div class="pull-right tableTools-container"></div>
		</div>
		<!--<div class="fileUpload btn btn-primary btn-success">
			<span class="fileUpload-button ace-icon fa fa-cloud-upload align-top bigger-125">&nbsp&nbspImportar</span>
			<input ng-disabled="!aplicacion.puede_crear" class="upload" type="file" custom-on-file-change="subirExcelClientes" />&nbsp&nbsp
		</div>
		<a href="/recursos/EJEMPLO-DATOS-CLIENTES.xlsx" class="btn btn-primary btn-danger">
			<i class="ace-icon fa fa-cloud-download align-top bigger-125"></i>
			Ejemplo Importacion
		</a>
		<div class="clearfix">
			<div class="pull-right tableTools-container"></div>
		</div>-->
		<div class="table-header">
			Lista de Despachos
		</div>

		<!-- div.table-responsive -->

		<!-- div.dataTables_borderWrap -->
		<div>
			<div id="tabla-clientes_wrapper" class="dataTables_wrapper form-inline no-footer">
				
				<table id="tabla-destinos" class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th class="center">
								N°
							</th>
							<th>Fecha</th>
							<th>Transportista</th>
							<th>Costo Transporte</th>
							<th>Grupo Estibaje</th>
							<th>Tipo Estibaje</th>
							<th>Costo Estibaje</th>
							<th>Factura</th>
							<th>Acciones</th>
						</tr>
					</thead>

					<tbody>
						<tr ng-repeat="gtm_detalle_despacho in despachos">
							<td class="center">
								{{$index+1}}
							</td>
							<td>{{gtm_detalle_despacho.despacho.fecha | date:"dd/MM/yyyy"}}</td>
							<td>{{gtm_detalle_despacho.transportista.persona.nombre_completo}}</td>
							<td>{{gtm_detalle_despacho.transportista.costo_transporte}}</td>
							<td>{{gtm_detalle_despacho.grupo_estibaje.nombre}}</td>
							
							<td>{{gtm_detalle_despacho.estibaje.nombre}}</td>
							<td>{{gtm_detalle_despacho.estibaje.costo}}</td>
							
							<td>{{gtm_detalle_despacho.factura}}</td>
							<td>
								<div class="hidden-sm hidden-xs action-buttons">
									<a class="blue" href="javascript:void(0)" ng-click="imprimir(gtm_detalle_despacho)">
									<i class="ace-icon fa fa-print bigger-130"></i>
								</a>

									<a class="green" href="javascript:void(0)" ng-click="abrirModalAsignacionFactura(gtm_detalle_despacho)">
									<i class="ace-icon fa fa-unlock bigger-130"></i>
								</a>

									<a class="red" href="javascript:void(0)" ng-click="abrirPopupConfirmacionEliminacion(removerDetalleDespacho,gtm_detalle_despacho)">
									<i class="ace-icon fa fa-trash-o bigger-130"></i>
								</a>
								</div>

								<div class="hidden-md hidden-lg">
									<div class="inline pos-rel">
										<button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown" data-position="auto">
										<i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
									</button>

										<ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
											<li>
												<a href="javascript:void(0)" ng-click="imprimir(gtm_detalle_despacho)" class="tooltip-info" data-rel="tooltip"
												 title="View">
												<span class="blue">
													<i class="ace-icon fa fa-printer bigger-120"></i>
												</span>
											</a>
											</li>

											<li>
												<a href="javascript:void(0)" ng-click="abrirModalAsignacionFactura(gtm_detalle_despacho)" class="tooltip-success"
												 data-rel="tooltip" title="Edit">
												<span class="green">
													<i class="ace-icon fa fa-unlock bigger-120"></i>
												</span>
											</a>
											</li>

											<li>
												<a href="javascript:void(0)" e-disabled="!aplicacion.puede_eliminar" ng-click="mostrarConfirmacionEliminacion(cliente)" class="tooltip-error"
												 data-rel="tooltip" title="Delete">
												<span class="red">
													<i class="ace-icon fa fa-trash-o bigger-120"></i>
												</span>
											</a>
											</li>
										</ul>
									</div>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<div id="modal-asignacion-factura">
<div class="modal-header bg-primary">
	<h4 class='smaller text-white text-uppercase'>
		<label>Asignacion Factura</label>
	</h4>
  </div>
  <form name="asig" ng-submit="establecerFactura(detalle_despacho)">
  <div class="row">
	<div class="col-sm-12">
		<div class="form-group">
			<label for="ciudad">N° Factura</label>
			  <input type="number" required ng-model="detalle_despacho.factura">
		</div>
	</div>
  </div>
  <div class="row">
	  <div class="col-sm-12">
		  <div class="modal-footer wizard-actions">
			  <button ng-disabled="asig.$invalid" type="submit" class="btn btn-primary btn-sm">
				  <i class="glyphicon glyphicon-floppy-disk"></i>Asignar
			  </button>
			  <button type="button" class="btn btn-danger btn-sm" ng-click="cerrarAsignacionFactura()">
				  <i class="ace-icon fa fa-times"></i>Cancelar
			  </button>
		  </div>
	  </div>
  </div>
  </form>
</div>