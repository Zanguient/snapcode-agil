<form name="desp" ng-submit="guardarDespachos()">
<div>
	<div class="col-xs-12 col-sm-12">
		<div>
			<div class="col-xs-2 col-sm-2">
				<h3>Despachos</h3>
			</div>
			<div class="col-xs-2 col-sm-2">
				<button class="btn btn-primary" type="button" ng-click="imprimirListaVencimientoProductos(vencimientosProductos)">
				<i class="ace-icon fa fa-print align-top bigger-125"></i>
				</button>
			</div>
			<div class="col-xs-2 col-sm-2">
				<button class="btn btn-success" type="button" ng-disabled="gtm_detalles_despacho_seleccionados.length==0" ng-click="abrirAsignacionDespacho()">
				<i class="ace-icon fa fa-truck align-top bigger-125"></i>
				</button>
			</div>
			<div class="col-xs-2 col-sm-2">
				<button class="btn btn-primary" ng-disabled="gtm_detalles_despacho_seleccionados.length==0" type="submit">
				<i class="ace-icon fa fa-floppy-o align-top bigger-125"></i>
				</button>
			</div>
			<div class="col-xs-2 col-sm-2">
				<button class="btn btn-danger" type="button" ng-click="cerrarListaDespachos()">
				<i class="ace-icon fa fa-times red2 align-top bigger-125"></i>
				</button>
			</div>
			<div class="col-xs-2 col-sm-2">
				<a type="button" ng-click="verificarDespachos(usuario.id_empresa)">
				<i class="ace-icon fa fa-refresh icon-animated-bell red2 align-top bigger-200"></i>
				</a>
			</div>
			<div class="col-xs-2 col-sm-2">
				Total Peso: {{calcularTotalCantidad()}}
			</div>
		</div>
		<div>
			<table class="table table-striped table-bordered table-hover">
			<thead>
			<tr>
				<th class="center">
						<label class="pos-rel">
						<input type="checkbox" class="ace" ng-change="cambiarSeleccionDetallesDespacho(detalles_despacho_seleccionados)" ng-model="detalles_despacho_seleccionados" />
						<span class="lbl"></span>
					</label>
				</th>
				<th>NÂº</th>
				<th>Vendedor</th>
				<th>Cliente</th>
				<th>Direccion</th>
				<th>Fecha</th>
				<th>Telefono</th>
				<th>Producto</th>
				<th>Cantidad</th>
				<th>Despacho</th>
				<th>Despachar</th>
				<th>Saldo</th>
				<th>Transportista</th>
				<th>Estibaje</th>
				<th>Grupo Estibaje</th>
				<th>Acciones</th>
			</tr>
			</thead>
			<tbody>
			<tr ng-repeat="gtm_detalle_despacho in gtm_detalles_despacho">
				<td class="center">
					<label class="pos-rel">
					<input type="checkbox" class="ace" ng-change="cambiarSeleccionDetalleDespacho(gtm_detalle_despacho)" ng-model="gtm_detalle_despacho.seleccionado" />
					<span class="lbl"></span>
				</label></td>
			<td>{{$index+1}}</td>
			<td>{{gtm_detalle_despacho.despacho.usuario.nombre_usuario}}</td>
			<td>{{gtm_detalle_despacho.despacho.cliente.razon_social}}</td>
			<td>{{gtm_detalle_despacho.despacho.destino.destino}}</td>
			<td>{{gtm_detalle_despacho.despacho.fecha | date:"dd/MM/yyyy"}}</td>
			<td>{{gtm_detalle_despacho.despacho.cliente.telefono1}}</td>
			<td>{{gtm_detalle_despacho.producto.nombre}}</td>
			<td>{{gtm_detalle_despacho.cantidad}}</td>
			<td>{{gtm_detalle_despacho.cantidad_despacho}}</td>
			<td><input required max="{{gtm_detalle_despacho.saldo}}" ng-change="calcularSaldoDespacho(gtm_detalle_despacho)" ng-required="gtm_detalle_despacho.seleccionado" type="number" step="0.001" ng-model="gtm_detalle_despacho.cantidad_despacho2"></td>
			<td>{{gtm_detalle_despacho.saldo2}}</td>
			<!-- <td ng-hide="gtm_detalle_despacho.saldo2">{{gtm_detalle_despacho.saldo}}</td> -->
			<td><select ng-required="gtm_detalle_despacho.seleccionado" ng-model="gtm_detalle_despacho.id_transportista" ng-options="gtm_transportista.id as gtm_transportista.persona.nombre_completo for gtm_transportista in gtm_transportistas"></select></td>
			<td><select ng-required="gtm_detalle_despacho.seleccionado" ng-model="gtm_detalle_despacho.id_estibaje" ng-options="gtm_estibaje.id as gtm_estibaje.nombre for gtm_estibaje in gtm_estibajes"></select></td>
			<td><select ng-required="gtm_detalle_despacho.seleccionado" ng-model="gtm_detalle_despacho.id_grupo_estibaje" ng-options="gtm_grupo_estibaje.id as gtm_grupo_estibaje.nombre for gtm_grupo_estibaje in gtm_grupo_estibajes"></select></td>
			<td>
			<div class="hidden-sm hidden-xs action-buttons">
				
				<a class="red" href="javascript:void(0)" ng-click="abrirPopupConfirmacionEliminacion(removerDetalleDespachoAlerta,gtm_detalle_despacho)">
				<i class="ace-icon fa fa-trash bigger-130"></i>
				</a>
			</div>
			<div class="hidden-md hidden-lg">
				<div class="inline pos-rel">
				<button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown" data-position="auto">
				<i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
				</button>
				<ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
				<li>
				<a href="javascript:void(0)" ng-click="abrirPopupConfirmacionEliminacion(removerDetalleDespachoAlerta,gtm_detalle_despacho)" class="tooltip-error" data-rel="tooltip" title="Delete">
				<span class="red">
				<i class="ace-icon fa fa-trash bigger-120"></i>
				</span>
				</a>
				</li>
				</ul>
				</div>
			</div>
			</td>
			</tr>
			</tbody>
			</table>
		</div>
		<div>
			<div class="row" ng-repeat="transportista in gtm_transportistas">
				<span>{{transportista.persona.nombre_completo}}</span>
				<span><b>Capacidad:</b> {{transportista.capacidad}}</span>
				<span><b>Total Carga:</b> {{calcularTotalCarga(transportista)}}</span>
				<span style="color:red"><b>Faltante:</b> {{transportista.capacidad-calcularTotalCarga(transportista)}}</span>
			</div>
		</div>
	</div>
</div>
</form>